# ========================================
# HTACCESS - CONFIGURAÇÕES PARA METATAGS E SEO
# ========================================

# Habilitar compressão GZIP
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json image/svg+xml
</IfModule>

# Cache para imagens OG
<FilesMatch "\.(jpg|jpeg|png|gif|webp)$">
    ExpiresActive On
    ExpiresDefault "access plus 1 day"
    Header set Cache-Control "public, max-age=86400"
</FilesMatch>

# Cache para arquivos estáticos
<FilesMatch "\.(css|js|woff|woff2|ttf|svg|ico)$">
    ExpiresActive On
    ExpiresDefault "access plus 1 week"
    Header set Cache-Control "public, max-age=604800"
</FilesMatch>

# Forçar HTTPS (se aplicável)
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Redirecionar HTTP para HTTPS
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
    
    # Garantir que og-default.jpg seja acessível
    RewriteCond %{REQUEST_URI} ^/og-default\.(jpg|png)$
    RewriteRule ^(.*)$ /public/$1 [L]
</IfModule>

# Headers de segurança
<IfModule mod_headers.c>
    # Prevenir clickjacking
    Header always append X-Frame-Options SAMEORIGIN
    
    # Prevenir MIME type sniffing
    Header set X-Content-Type-Options "nosniff"
    
    # XSS Protection
    Header set X-XSS-Protection "1; mode=block"
    
    # Referrer Policy
    Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# MIME types para fontes e imagens
<IfModule mod_mime.c>
    AddType image/webp .webp
    AddType font/woff .woff
    AddType font/woff2 .woff2
</IfModule>

# ========================================
# CONFIGURAÇÕES ESPECÍFICAS PARA OG IMAGES
# ========================================

# Garantir que imagens OG sempre retornem 200
<Files "og-default.jpg">
    Header set Content-Type "image/jpeg"
    Header set Cache-Control "public, max-age=86400"
</Files>

<Files "og-default.png">
    Header set Content-Type "image/png" 
    Header set Cache-Control "public, max-age=86400"
</Files>