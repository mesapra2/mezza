b04c02c291d29bd78022a9cce0194325
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = tslib_1.__importStar(require("react"));
const react_helmet_async_1 = require("react-helmet-async");
const framer_motion_1 = require("framer-motion");
const react_router_dom_1 = require("react-router-dom");
const lucide_react_1 = require("lucide-react");
const input_1 = require("@/features/shared/components/ui/input");
const button_1 = require("@/features/shared/components/ui/button");
const supabaseClient_1 = require("@/lib/supabaseClient");
const RestaurantsPage = () => {
    const [restaurants, setRestaurants] = (0, react_1.useState)([]);
    const [filteredRestaurants, setFilteredRestaurants] = (0, react_1.useState)([]);
    const [searchTerm, setSearchTerm] = (0, react_1.useState)('');
    const [loading, setLoading] = (0, react_1.useState)(true);
    const [error, setError] = (0, react_1.useState)(null);
    (0, react_1.useEffect)(() => {
        loadRestaurants();
    }, []);
    (0, react_1.useEffect)(() => {
        filterRestaurants();
    }, [searchTerm, restaurants]);
    const loadRestaurants = async () => {
        setLoading(true);
        setError(null);
        try {
            const { data, error: fetchError } = await supabaseClient_1.supabase
                .from('partners')
                .select('*')
                .order('name', { ascending: true });
            if (fetchError)
                throw fetchError;
            console.log('✅ Restaurantes carregados:', data?.length || 0);
            setRestaurants(data || []);
        }
        catch (err) {
            console.error('❌ Erro ao carregar restaurantes:', err);
            setError('Erro ao carregar restaurantes. Tente novamente.');
        }
        finally {
            setLoading(false);
        }
    };
    const filterRestaurants = () => {
        if (!searchTerm) {
            setFilteredRestaurants(restaurants);
            return;
        }
        const filtered = restaurants.filter(restaurant => restaurant.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||
            restaurant.cuisine_type?.toLowerCase().includes(searchTerm.toLowerCase()) ||
            getAddress(restaurant).toLowerCase().includes(searchTerm.toLowerCase()));
        setFilteredRestaurants(filtered);
    };
    const getAddress = (restaurant) => {
        if (!restaurant?.address)
            return 'Endereço não informado';
        if (typeof restaurant.address === 'string') {
            return restaurant.address;
        }
        if (typeof restaurant.address === 'object') {
            const parts = [
                restaurant.address.street || restaurant.address.rua,
                restaurant.address.city || restaurant.address.cidade,
            ].filter(Boolean);
            return parts.length > 0 ? parts.join(', ') : 'Endereço não informado';
        }
        return 'Endereço não informado';
    };
    const getRestaurantPhoto = (restaurant) => {
        if (!restaurant?.photos || !Array.isArray(restaurant.photos))
            return null;
        if (restaurant.photos.length === 0)
            return null;
        const photo = restaurant.photos[0];
        // Se já for URL completa, retorna
        if (photo.startsWith('http'))
            return photo;
        // Busca do bucket 'photos'
        const { data } = supabaseClient_1.supabase.storage
            .from('photos')
            .getPublicUrl(photo);
        return data.publicUrl;
    };
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center min-h-screen", children: (0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500" }) }));
    }
    if (error) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col items-center justify-center min-h-screen", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-white/60 text-lg mb-4", children: error }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: loadRestaurants, className: "bg-purple-600 hover:bg-purple-700", children: "Tentar Novamente" })] }));
    }
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)(react_helmet_async_1.Helmet, { children: [(0, jsx_runtime_1.jsx)("title", { children: "Restaurantes - Mesapra2" }), (0, jsx_runtime_1.jsx)("meta", { name: "description", content: "Conhe\u00E7a os melhores restaurantes parceiros do Mesapra2" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-8 py-6 px-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-4xl font-bold gradient-text mb-2", children: "Restaurantes Parceiros" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60 text-lg", children: "Descubra lugares incr\u00EDveis para suas experi\u00EAncias gastron\u00F4micas" }), restaurants.length > 0 && ((0, jsx_runtime_1.jsxs)("p", { className: "text-white/40 text-sm mt-2", children: [restaurants.length, " ", restaurants.length === 1 ? 'restaurante parceiro' : 'restaurantes parceiros'] }))] }), (0, jsx_runtime_1.jsx)("div", { className: "glass-effect rounded-2xl p-6 border border-white/10", children: (0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Search, { className: "absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40" }), (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: "Buscar por nome, tipo de culin\u00E1ria ou localiza\u00E7\u00E3o...", value: searchTerm, onChange: (e) => setSearchTerm(e.target.value), className: "pl-10 glass-effect border-white/10" })] }) }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: filteredRestaurants.map((restaurant, index) => {
                            const photo = getRestaurantPhoto(restaurant);
                            return ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: index * 0.05 }, children: (0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: `/restaurant/${restaurant.id}`, children: (0, jsx_runtime_1.jsxs)("div", { className: "glass-effect rounded-2xl border border-white/10 overflow-hidden hover:bg-white/5 transition-all cursor-pointer h-full group", children: [(0, jsx_runtime_1.jsxs)("div", { className: "relative h-48 overflow-hidden", children: [photo ? ((0, jsx_runtime_1.jsx)("img", { src: photo, alt: restaurant.name, className: "w-full h-full object-cover group-hover:scale-110 transition-transform duration-300", onError: (e) => {
                                                            e.target.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(restaurant.name)}&size=400&background=8b5cf6&color=fff`;
                                                        } })) : ((0, jsx_runtime_1.jsx)("div", { className: "w-full h-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Utensils, { className: "w-16 h-16 text-white/40" }) })), (0, jsx_runtime_1.jsx)("div", { className: "absolute inset-0 bg-gradient-to-t from-black/60 to-transparent" }), restaurant.cuisine_type && ((0, jsx_runtime_1.jsx)("div", { className: "absolute top-3 right-3", children: (0, jsx_runtime_1.jsx)("span", { className: "px-3 py-1 rounded-full bg-purple-500/30 backdrop-blur-sm text-purple-200 text-xs border border-purple-400/50 font-medium", children: restaurant.cuisine_type }) })), restaurant.type === 'premium' && ((0, jsx_runtime_1.jsx)("div", { className: "absolute top-3 left-3", children: (0, jsx_runtime_1.jsx)("span", { className: "px-3 py-1 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold", children: "Premium" }) }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "p-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-start justify-between mb-3", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-xl font-semibold text-white line-clamp-2 flex-1", children: restaurant.name }), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronRight, { className: "w-5 h-5 text-white/40 group-hover:text-white group-hover:translate-x-1 transition-all flex-shrink-0 ml-2" })] }), restaurant.description && ((0, jsx_runtime_1.jsx)("p", { className: "text-white/60 text-sm line-clamp-2 mb-4", children: restaurant.description })), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [restaurant.address && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-start gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.MapPin, { className: "w-4 h-4 text-purple-400 mt-0.5 flex-shrink-0" }), (0, jsx_runtime_1.jsx)("span", { className: "text-white/60 text-sm line-clamp-1", children: getAddress(restaurant) })] })), restaurant.phone && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Phone, { className: "w-4 h-4 text-purple-400 flex-shrink-0" }), (0, jsx_runtime_1.jsx)("span", { className: "text-white/60 text-sm", children: restaurant.phone })] })), restaurant.website && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ExternalLink, { className: "w-4 h-4 text-purple-400 flex-shrink-0" }), (0, jsx_runtime_1.jsx)("span", { className: "text-white/60 text-sm truncate", children: "Website dispon\u00EDvel" })] }))] })] })] }) }) }, restaurant.id));
                        }) }), filteredRestaurants.length === 0 && !loading && ((0, jsx_runtime_1.jsxs)("div", { className: "glass-effect rounded-2xl p-12 border border-white/10 text-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Search, { className: "w-16 h-16 text-white/20 mx-auto mb-4" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60 text-lg mb-4", children: restaurants.length === 0
                                    ? 'Nenhum restaurante parceiro cadastrado ainda'
                                    : 'Nenhum restaurante encontrado com esses filtros' }), searchTerm && ((0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => setSearchTerm(''), variant: "outline", children: "Limpar busca" }))] }))] })] }));
};
exports.default = RestaurantsPage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxmZWF0dXJlc1xcc2hhcmVkXFxwYWdlc1xcUmVzdGF1cmFudHNQYWdlLmpzeCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsdURBQW1EO0FBQ25ELDJEQUE0QztBQUM1QyxpREFBdUM7QUFDdkMsdURBQXdDO0FBQ3hDLCtDQUEyRjtBQUMzRixpRUFBOEQ7QUFDOUQsbUVBQWdFO0FBQ2hFLHlEQUFnRDtBQUVoRCxNQUFNLGVBQWUsR0FBRyxHQUFHLEVBQUU7SUFDM0IsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkQsTUFBTSxDQUFDLG1CQUFtQixFQUFFLHNCQUFzQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25FLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLElBQUksQ0FBQyxDQUFDO0lBRXpDLElBQUEsaUJBQVMsRUFBQyxHQUFHLEVBQUU7UUFDYixlQUFlLEVBQUUsQ0FBQztJQUNwQixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFUCxJQUFBLGlCQUFTLEVBQUMsR0FBRyxFQUFFO1FBQ2IsaUJBQWlCLEVBQUUsQ0FBQztJQUN0QixDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztJQUU5QixNQUFNLGVBQWUsR0FBRyxLQUFLLElBQUksRUFBRTtRQUNqQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakIsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2YsSUFBSSxD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cmNlcyI6WyJDOlxcREVWTWl4XFxBcHAuTWVzYXByYTIuY29tXFxzcmNcXGZlYXR1cmVzXFxzaGFyZWRcXHBhZ2VzXFxSZXN0YXVyYW50c1BhZ2UuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBIZWxtZXQgfSBmcm9tICdyZWFjdC1oZWxtZXQtYXN5bmMnO1xyXG5pbXBvcnQgeyBtb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBTZWFyY2gsIE1hcFBpbiwgUGhvbmUsIEV4dGVybmFsTGluaywgQ2hldnJvblJpZ2h0LCBVdGVuc2lscyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9mZWF0dXJlcy9zaGFyZWQvY29tcG9uZW50cy91aS9pbnB1dCc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvZmVhdHVyZXMvc2hhcmVkL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcclxuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZUNsaWVudCc7XHJcblxyXG5jb25zdCBSZXN0YXVyYW50c1BhZ2UgPSAoKSA9PiB7XHJcbiAgY29uc3QgW3Jlc3RhdXJhbnRzLCBzZXRSZXN0YXVyYW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2ZpbHRlcmVkUmVzdGF1cmFudHMsIHNldEZpbHRlcmVkUmVzdGF1cmFudHNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtzZWFyY2hUZXJtLCBzZXRTZWFyY2hUZXJtXSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbG9hZFJlc3RhdXJhbnRzKCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmlsdGVyUmVzdGF1cmFudHMoKTtcclxuICB9LCBbc2VhcmNoVGVybSwgcmVzdGF1cmFudHNdKTtcclxuXHJcbiAgY29uc3QgbG9hZFJlc3RhdXJhbnRzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgc2V0TG9hZGluZyh0cnVlKTtcclxuICAgIHNldEVycm9yKG51bGwpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncGFydG5lcnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5vcmRlcignbmFtZScsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG5cclxuICAgICAgaWYgKGZldGNoRXJyb3IpIHRocm93IGZldGNoRXJyb3I7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFJlc3RhdXJhbnRlcyBjYXJyZWdhZG9zOicsIGRhdGE/Lmxlbmd0aCB8fCAwKTtcclxuICAgICAgc2V0UmVzdGF1cmFudHMoZGF0YSB8fCBbXSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm8gYW8gY2FycmVnYXIgcmVzdGF1cmFudGVzOicsIGVycik7XHJcbiAgICAgIHNldEVycm9yKCdFcnJvIGFvIGNhcnJlZ2FyIHJlc3RhdXJhbnRlcy4gVGVudGUgbm92YW1lbnRlLicpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZmlsdGVyUmVzdGF1cmFudHMgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXNlYXJjaFRlcm0pIHtcclxuICAgICAgc2V0RmlsdGVyZWRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaWx0ZXJlZCA9IHJlc3RhdXJhbnRzLmZpbHRlcihyZXN0YXVyYW50ID0+XHJcbiAgICAgIHJlc3RhdXJhbnQubmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpIHx8XHJcbiAgICAgIHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkgfHxcclxuICAgICAgZ2V0QWRkcmVzcyhyZXN0YXVyYW50KS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSlcclxuICAgICk7XHJcblxyXG4gICAgc2V0RmlsdGVyZWRSZXN0YXVyYW50cyhmaWx0ZXJlZCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0QWRkcmVzcyA9IChyZXN0YXVyYW50KSA9PiB7XHJcbiAgICBpZiAoIXJlc3RhdXJhbnQ/LmFkZHJlc3MpIHJldHVybiAnRW5kZXJlw6dvIG7Do28gaW5mb3JtYWRvJztcclxuICAgIFxyXG4gICAgaWYgKHR5cGVvZiByZXN0YXVyYW50LmFkZHJlc3MgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiByZXN0YXVyYW50LmFkZHJlc3M7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICh0eXBlb2YgcmVzdGF1cmFudC5hZGRyZXNzID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBjb25zdCBwYXJ0cyA9IFtcclxuICAgICAgICByZXN0YXVyYW50LmFkZHJlc3Muc3RyZWV0IHx8IHJlc3RhdXJhbnQuYWRkcmVzcy5ydWEsXHJcbiAgICAgICAgcmVzdGF1cmFudC5hZGRyZXNzLmNpdHkgfHwgcmVzdGF1cmFudC5hZGRyZXNzLmNpZGFkZSxcclxuICAgICAgXS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbignLCAnKSA6ICdFbmRlcmXDp28gbsOjbyBpbmZvcm1hZG8nO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gJ0VuZGVyZcOnbyBuw6NvIGluZm9ybWFkbyc7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0UmVzdGF1cmFudFBob3RvID0gKHJlc3RhdXJhbnQpID0+IHtcclxuICAgIGlmICghcmVzdGF1cmFudD8ucGhvdG9zIHx8ICFBcnJheS5pc0FycmF5KHJlc3RhdXJhbnQucGhvdG9zKSkgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAocmVzdGF1cmFudC5waG90b3MubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcclxuICAgIFxyXG4gICAgY29uc3QgcGhvdG8gPSByZXN0YXVyYW50LnBob3Rvc1swXTtcclxuICAgIFxyXG4gICAgLy8gU2UgasOhIGZvciBVUkwgY29tcGxldGEsIHJldG9ybmFcclxuICAgIGlmIChwaG90by5zdGFydHNXaXRoKCdodHRwJykpIHJldHVybiBwaG90bztcclxuXHJcbiAgICAvLyBCdXNjYSBkbyBidWNrZXQgJ3Bob3RvcydcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgICAuZnJvbSgncGhvdG9zJylcclxuICAgICAgLmdldFB1YmxpY1VybChwaG90byk7XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhLnB1YmxpY1VybDtcclxuICB9O1xyXG5cclxuICBpZiAobG9hZGluZykge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtaW4taC1zY3JlZW5cIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItcHVycGxlLTUwMFwiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWluLWgtc2NyZWVuXCI+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MCB0ZXh0LWxnIG1iLTRcIj57ZXJyb3J9PC9wPlxyXG4gICAgICAgIDxCdXR0b24gb25DbGljaz17bG9hZFJlc3RhdXJhbnRzfSBjbGFzc05hbWU9XCJiZy1wdXJwbGUtNjAwIGhvdmVyOmJnLXB1cnBsZS03MDBcIj5cclxuICAgICAgICAgIFRlbnRhciBOb3ZhbWVudGVcclxuICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxIZWxtZXQ+XHJcbiAgICAgICAgPHRpdGxlPlJlc3RhdXJhbnRlcyAtIE1lc2FwcmEyPC90aXRsZT5cclxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiQ29uaGXDp2Egb3MgbWVsaG9yZXMgcmVzdGF1cmFudGVzIHBhcmNlaXJvcyBkbyBNZXNhcHJhMlwiIC8+XHJcbiAgICAgIDwvSGVsbWV0PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTggcHktNiBweC00XCI+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTR4bCBmb250LWJvbGQgZ3JhZGllbnQtdGV4dCBtYi0yXCI+XHJcbiAgICAgICAgICAgIFJlc3RhdXJhbnRlcyBQYXJjZWlyb3NcclxuICAgICAgICAgIDwvaDE+XHJcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzYwIHRleHQtbGdcIj5cclxuICAgICAgICAgICAgRGVzY3VicmEgbHVnYXJlcyBpbmNyw612ZWlzIHBhcmEgc3VhcyBleHBlcmnDqm5jaWFzIGdhc3Ryb27DtG1pY2FzXHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICB7cmVzdGF1cmFudHMubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvNDAgdGV4dC1zbSBtdC0yXCI+XHJcbiAgICAgICAgICAgICAge3Jlc3RhdXJhbnRzLmxlbmd0aH0ge3Jlc3RhdXJhbnRzLmxlbmd0aCA9PT0gMSA/ICdyZXN0YXVyYW50ZSBwYXJjZWlybycgOiAncmVzdGF1cmFudGVzIHBhcmNlaXJvcyd9XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIHsvKiBCdXNjYSAqL31cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdsYXNzLWVmZmVjdCByb3VuZGVkLTJ4bCBwLTYgYm9yZGVyIGJvcmRlci13aGl0ZS8xMFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgICA8U2VhcmNoIGNsYXNzTmFtZT1cImFic29sdXRlIGxlZnQtMyB0b3AtMS8yIC10cmFuc2xhdGUteS0xLzIgdy01IGgtNSB0ZXh0LXdoaXRlLzQwXCIgLz5cclxuICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJCdXNjYXIgcG9yIG5vbWUsIHRpcG8gZGUgY3VsaW7DoXJpYSBvdSBsb2NhbGl6YcOnw6NvLi4uXCJcclxuICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVGVybX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlYXJjaFRlcm0oZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInBsLTEwIGdsYXNzLWVmZmVjdCBib3JkZXItd2hpdGUvMTBcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIHsvKiBHcmlkIGRlIFJlc3RhdXJhbnRlcyAqL31cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTMgZ2FwLTZcIj5cclxuICAgICAgICAgIHtmaWx0ZXJlZFJlc3RhdXJhbnRzLm1hcCgocmVzdGF1cmFudCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcGhvdG8gPSBnZXRSZXN0YXVyYW50UGhvdG8ocmVzdGF1cmFudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgIDxtb3Rpb24uZGl2XHJcbiAgICAgICAgICAgICAgICBrZXk9e3Jlc3RhdXJhbnQuaWR9XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAsIHk6IDIwIH19XHJcbiAgICAgICAgICAgICAgICBhbmltYXRlPXt7IG9wYWNpdHk6IDEsIHk6IDAgfX1cclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb249e3sgZGVsYXk6IGluZGV4ICogMC4wNSB9fVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL3Jlc3RhdXJhbnQvJHtyZXN0YXVyYW50LmlkfWB9PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdsYXNzLWVmZmVjdCByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIG92ZXJmbG93LWhpZGRlbiBob3ZlcjpiZy13aGl0ZS81IHRyYW5zaXRpb24tYWxsIGN1cnNvci1wb2ludGVyIGgtZnVsbCBncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBGb3RvICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgaC00OCBvdmVyZmxvdy1oaWRkZW5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHtwaG90byA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17cGhvdG99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtyZXN0YXVyYW50Lm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXIgZ3JvdXAtaG92ZXI6c2NhbGUtMTEwIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTMwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcj17KGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNyYyA9IGBodHRwczovL3VpLWF2YXRhcnMuY29tL2FwaS8/bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChyZXN0YXVyYW50Lm5hbWUpfSZzaXplPTQwMCZiYWNrZ3JvdW5kPThiNWNmNiZjb2xvcj1mZmZgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1wdXJwbGUtNTAwLzIwIHRvLXBpbmstNTAwLzIwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFV0ZW5zaWxzIGNsYXNzTmFtZT1cInctMTYgaC0xNiB0ZXh0LXdoaXRlLzQwXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWdyYWRpZW50LXRvLXQgZnJvbS1ibGFjay82MCB0by10cmFuc3BhcmVudFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBCYWRnZSBkZSB0aXBvIGRlIGN1bGluw6FyaWEgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICB7cmVzdGF1cmFudC5jdWlzaW5lX3R5cGUgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0zIHJpZ2h0LTNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJweC0zIHB5LTEgcm91bmRlZC1mdWxsIGJnLXB1cnBsZS01MDAvMzAgYmFja2Ryb3AtYmx1ci1zbSB0ZXh0LXB1cnBsZS0yMDAgdGV4dC14cyBib3JkZXIgYm9yZGVyLXB1cnBsZS00MDAvNTAgZm9udC1tZWRpdW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN0YXVyYW50LmN1aXNpbmVfdHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB7LyogQmFkZ2UgUHJlbWl1bSAqL31cclxuICAgICAgICAgICAgICAgICAgICAgIHtyZXN0YXVyYW50LnR5cGUgPT09ICdwcmVtaXVtJyAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTMgbGVmdC0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHgtMyBweS0xIHJvdW5kZWQtZnVsbCBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTUwMCB0by1waW5rLTUwMCB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1ib2xkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcmVtaXVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBDb250ZcO6ZG8gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTZcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4gbWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtd2hpdGUgbGluZS1jbGFtcC0yIGZsZXgtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN0YXVyYW50Lm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LXdoaXRlLzQwIGdyb3VwLWhvdmVyOnRleHQtd2hpdGUgZ3JvdXAtaG92ZXI6dHJhbnNsYXRlLXgtMSB0cmFuc2l0aW9uLWFsbCBmbGV4LXNocmluay0wIG1sLTJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAge3Jlc3RhdXJhbnQuZGVzY3JpcHRpb24gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzYwIHRleHQtc20gbGluZS1jbGFtcC0yIG1iLTRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdGF1cmFudC5kZXNjcmlwdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVzdGF1cmFudC5hZGRyZXNzICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXBQaW4gY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LXB1cnBsZS00MDAgbXQtMC41IGZsZXgtc2hyaW5rLTBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MCB0ZXh0LXNtIGxpbmUtY2xhbXAtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0QWRkcmVzcyhyZXN0YXVyYW50KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN0YXVyYW50LnBob25lICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGhvbmUgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LXB1cnBsZS00MDAgZmxleC1zaHJpbmstMFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzYwIHRleHQtc21cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Jlc3RhdXJhbnQucGhvbmV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVzdGF1cmFudC53ZWJzaXRlICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXh0ZXJuYWxMaW5rIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1wdXJwbGUtNDAwIGZsZXgtc2hyaW5rLTBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MCB0ZXh0LXNtIHRydW5jYXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdlYnNpdGUgZGlzcG9uw612ZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KX1cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgey8qIE1lbnNhZ2VtIHF1YW5kbyBuw6NvIGjDoSByZXN1bHRhZG9zICovfVxyXG4gICAgICAgIHtmaWx0ZXJlZFJlc3RhdXJhbnRzLmxlbmd0aCA9PT0gMCAmJiAhbG9hZGluZyAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdsYXNzLWVmZmVjdCByb3VuZGVkLTJ4bCBwLTEyIGJvcmRlciBib3JkZXItd2hpdGUvMTAgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJ3LTE2IGgtMTYgdGV4dC13aGl0ZS8yMCBteC1hdXRvIG1iLTRcIiAvPlxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzYwIHRleHQtbGcgbWItNFwiPlxyXG4gICAgICAgICAgICAgIHtyZXN0YXVyYW50cy5sZW5ndGggPT09IDAgXHJcbiAgICAgICAgICAgICAgICA/ICdOZW5odW0gcmVzdGF1cmFudGUgcGFyY2Vpcm8gY2FkYXN0cmFkbyBhaW5kYSdcclxuICAgICAgICAgICAgICAgIDogJ05lbmh1bSByZXN0YXVyYW50ZSBlbmNvbnRyYWRvIGNvbSBlc3NlcyBmaWx0cm9zJ31cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICB7c2VhcmNoVGVybSAmJiAoXHJcbiAgICAgICAgICAgICAgPEJ1dHRvbiBcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlYXJjaFRlcm0oJycpfVxyXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIExpbXBhciBidXNjYVxyXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8Lz5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVzdGF1cmFudHNQYWdlO1xyXG5cclxuLy8gPT09PT0gSU5TVFJVw4fDlUVTIFBBUkEgQVRVQUxJWkFSIFJlc3RhdXJhbnRTZWxlY3Rvci5qc3ggPT09PT1cclxuLy8gXHJcbi8vIE5vIGFycXVpdm8gUmVzdGF1cmFudFNlbGVjdG9yLmpzeCwgcHJvY3VyZSBwZWxhIGZ1bsOnw6NvIGdldFJlc3RhdXJhbnRQaG90b1xyXG4vLyBlIHN1YnN0aXR1YSAncGFydG5lci1waG90b3MnIHBvciAncGhvdG9zJzpcclxuLy9cclxuLy8gY29uc3QgeyBkYXRhIH0gPSBzdXBhYmFzZS5zdG9yYWdlXHJcbi8vICAgLmZyb20oJ3Bob3RvcycpICAvLyA8LS0gRXJhICdwYXJ0bmVyLXBob3RvcycsIGFnb3JhIMOpICdwaG90b3MnXHJcbi8vICAgLmdldFB1YmxpY1VybChwaG90byk7XHJcbi8vXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSJdLCJ2ZXJzaW9uIjozfQ==