{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\services\\EventStatusService.test.ts","mappings":"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","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\services\\EventStatusService.test.ts"],"sourcesContent":["// src/services/EventStatusService.test.ts\r\n\r\nimport { describe, it, expect, jest, beforeEach, afterEach, beforeAll } from '@jest/globals';\r\n\r\n// --- 1. MOCKING DEPENDÊNCIAS (ANTES DAS IMPORTAÇÕES) ---\r\n\r\n// Mock do Supabase\r\n// Definimos apenas o 'from' que será mockado em cada teste\r\nconst mockSupabaseInstance = {\r\n  from: jest.fn(),\r\n};\r\n\r\njest.mock('../lib/supabaseClient', () => ({\r\n  supabase: mockSupabaseInstance,\r\n}));\r\n\r\n// Mock dos outros serviços (todos são default exports)\r\njest.mock('./EventSecurityService', () => ({\r\n  default: {\r\n    generateAndSavePassword: jest.fn(() => Promise.resolve({ success: true, password: 'mock-123' })),\r\n    lockEventEntry: jest.fn(() => Promise.resolve({ success: true })),\r\n  },\r\n}));\r\n\r\njest.mock('./PushNotificationService', () => ({\r\n  default: {\r\n    sendPasswordToHost: jest.fn(() => Promise.resolve({ success: true })),\r\n    sendEventStartNotificationToParticipants: jest.fn(() => Promise.resolve({ success: true })),\r\n  },\r\n}));\r\n\r\njest.mock('./TrustScoreService', () => ({\r\n  default: {\r\n    penalizeNoShowsForEvent: jest.fn(() => Promise.resolve()),\r\n  },\r\n}));\r\n\r\n\r\n// --- 2. IMPORTAÇÕES (DEPOIS DOS MOCKS) ---\r\n\r\n// Importa o serviço que queremos testar\r\nimport EventStatusService from './EventStatusService';\r\n\r\n// Importa os mocks para que possamos espioná-los\r\nimport { supabase } from '../lib/supabaseClient';\r\nimport EventSecurityService from './EventSecurityService';\r\nimport PushNotificationService from './PushNotificationService';\r\nimport TrustScoreService from './TrustScoreService';\r\n\r\n// Typecast dos mocks para termos intellisense e conformidade com TypeScript\r\nconst mockedSupabase = supabase as jest.Mocked<typeof supabase>;\r\nconst mockedSecurityService = EventSecurityService as jest.Mocked<typeof EventSecurityService>;\r\nconst mockedPushService = PushNotificationService as jest.Mocked<typeof PushNotificationService>;\r\nconst mockedTrustService = TrustScoreService as jest.Mocked<typeof TrustScoreService>;\r\n\r\n\r\n// --- 3. CONFIGURAÇÃO DOS TESTES ---\r\n\r\ndescribe('EventStatusService', () => {\r\n\r\n  // Usamos timers falsos para controlar o new Date()\r\n  beforeAll(() => {\r\n    jest.useFakeTimers();\r\n  });\r\n\r\n  // Limpa todos os mocks antes de cada teste\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    (mockedSupabase.from as jest.Mock).mockReset();\r\n  });\r\n\r\n  // Restaura os timers reais após todos os testes\r\n  afterAll(() => {\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  // --- 4. TESTES ---\r\n\r\n  describe('Gerenciamento de Auto-Update', () => {\r\n    afterEach(() => {\r\n      // Garante que paramos qualquer timer iniciado nos testes\r\n      EventStatusService.stopAutoUpdate();\r\n    });\r\n\r\n    it('should start auto-update e ser \"running\"', () => {\r\n      // Espiona o método principal para evitar que ele execute a lógica real\r\n      const spy = jest.spyOn(EventStatusService, 'updateAllEventStatuses').mockImplementation(() => Promise.resolve());\r\n      \r\n      const intervalId = EventStatusService.startAutoUpdate(30);\r\n      \r\n      expect(intervalId).toBeDefined();\r\n      expect(EventStatusService.isAutoUpdateRunning()).toBe(true);\r\n      expect(spy).toHaveBeenCalledTimes(1); // Deve rodar imediatamente\r\n      \r\n      spy.mockRestore();\r\n    });\r\n\r\n    it('should stop auto-update', () => {\r\n      EventStatusService.startAutoUpdate(30);\r\n      expect(EventStatusService.isAutoUpdateRunning()).toBe(true);\r\n\r\n      EventStatusService.stopAutoUpdate();\r\n      expect(EventStatusService.isAutoUpdateRunning()).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('updateEventStatus', () => {\r\n    it('deve chamar supabase.update com os parâmetros corretos', async () => {\r\n      // ✅ CORREÇÃO: Usando mockImplementation\r\n      const mockUpdateEq = jest.fn().mockImplementation(() => Promise.resolve({ error: null }));\r\n      (mockedSupabase.from as jest.Mock).mockReturnValue({\r\n        update: jest.fn(() => ({\r\n          eq: mockUpdateEq,\r\n        })),\r\n      });\r\n\r\n      await EventStatusService.updateEventStatus(123, 'NovoStatus');\r\n\r\n      expect(mockedSupabase.from).toHaveBeenCalledWith('events');\r\n      expect(mockedSupabase.from('events').update).toHaveBeenCalledWith(\r\n        expect.objectContaining({\r\n          status: 'NovoStatus',\r\n        })\r\n      );\r\n      expect(mockUpdateEq).toHaveBeenCalledWith('id', 123);\r\n    });\r\n  });\r\n\r\n  describe('Lógica de Status (updateAllEventStatuses)', () => {\r\n\r\n    const now = new Date('2025-10-01T10:00:00Z');\r\n    \r\n    beforeEach(() => {\r\n      // Define a hora global para todos os testes de lógica\r\n      jest.setSystemTime(now);\r\n    });\r\n\r\n    it('deve mudar status para \"Em Andamento\" quando a hora de início for atingida', async () => {\r\n      const event = {\r\n        id: 1,\r\n        status: 'Aberto',\r\n        start_time: '2025-10-01T09:59:59Z', // 1 segundo atrás\r\n        end_time: '2025-10-01T12:00:00Z',\r\n      };\r\n      \r\n      // ✅ CORREÇÃO: Usando mockImplementation\r\n      const mockSelectNeq = jest.fn().mockImplementation(() => Promise.resolve({ data: [event], error: null }));\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          neq: jest.fn(() => ({\r\n            neq: mockSelectNeq,\r\n          })),\r\n        })),\r\n      }));\r\n      \r\n      // ✅ CORREÇÃO: Usando mockImplementation\r\n      const mockUpdateEq = jest.fn().mockImplementation(() => Promise.resolve({ error: null }));\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        update: jest.fn(() => ({\r\n          eq: mockUpdateEq,\r\n        })),\r\n      }));\r\n\r\n      await EventStatusService.updateAllEventStatuses();\r\n\r\n      expect(mockSelectNeq).toHaveBeenCalled();\r\n      expect(mockedSupabase.from).toHaveBeenCalledWith('events');\r\n      expect(mockUpdateEq).toHaveBeenCalledWith('id', 1);\r\n      expect(mockedSupabase.from('events').update).toHaveBeenCalledWith(\r\n        expect.objectContaining({ status: 'Em Andamento' })\r\n      );\r\n    });\r\n\r\n    it('deve gerar senha e enviar push 1 minuto antes do evento', async () => {\r\n      const startTime = new Date('2025-10-01T10:01:00Z'); // Daqui a 1 min\r\n      const event = {\r\n        id: 2,\r\n        status: 'Aberto',\r\n        start_time: startTime.toISOString(),\r\n        end_time: '2025-10-01T12:00:00Z',\r\n        creator_id: 'host-id',\r\n        title: 'Evento Teste',\r\n        event_entry_password: null, // Sem senha\r\n      };\r\n\r\n      // ✅ CORREÇÃO (Linha 190)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          neq: jest.fn(() => ({\r\n            neq: jest.fn().mockImplementation(() => Promise.resolve({ data: [event], error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n      \r\n      // ✅ CORREÇÃO (Linha 199)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          eq: jest.fn(() => ({\r\n            single: jest.fn().mockImplementation(() => Promise.resolve({ data: { username: 'Host' }, error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n      \r\n      // ✅ CORREÇÃO (Linha 208)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          eq: jest.fn(() => ({\r\n            eq: jest.fn().mockImplementation(() => Promise.resolve({ data: [{ user_id: 'part-1' }], error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n\r\n      await EventStatusService.updateAllEventStatuses();\r\n\r\n      // Verifica se a senha foi gerada\r\n      expect(mockedSecurityService.generateAndSavePassword).toHaveBeenCalledWith(2);\r\n      \r\n      // Verifica se o push foi enviado ao anfitrião\r\n      expect(mockedPushService.sendPasswordToHost).toHaveBeenCalledWith(\r\n        'host-id',\r\n        2,\r\n        'mock-123', // Senha mockada\r\n        'Evento Teste'\r\n      );\r\n      \r\n      // Verifica se o push foi enviado aos participantes\r\n      expect(mockedPushService.sendEventStartNotificationToParticipants).toHaveBeenCalledWith(\r\n        ['part-1'],\r\n        2,\r\n        'Evento Teste'\r\n      );\r\n    });\r\n    \r\n    it('deve bloquear entrada 1 minuto antes do fim', async () => {\r\n      const endTime = new Date('2025-10-01T10:01:00Z'); // Daqui a 1 min\r\n      const event = {\r\n        id: 3,\r\n        status: 'Em Andamento',\r\n        start_time: '2025-10-01T09:00:00Z',\r\n        end_time: endTime.toISOString(),\r\n        entry_locked: false, // Não bloqueado\r\n      };\r\n\r\n      // ✅ CORREÇÃO (Linha 248)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          neq: jest.fn(() => ({\r\n            neq: jest.fn().mockImplementation(() => Promise.resolve({ data: [event], error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n\r\n      await EventStatusService.updateAllEventStatuses();\r\n\r\n      // Verifica se o bloqueio foi chamado\r\n      expect(mockedSecurityService.lockEventEntry).toHaveBeenCalledWith(3);\r\n    });\r\n\r\n    it('deve mudar status para \"Finalizado\" e penalizar quem não foi', async () => {\r\n      const endTime = new Date('2025-10-01T09:59:59Z'); // 1 segundo atrás\r\n      const event = {\r\n        id: 4,\r\n        status: 'Em Andamento',\r\n        start_time: '2025-10-01T08:00:00Z',\r\n        end_time: endTime.toISOString(),\r\n      };\r\n\r\n      // ✅ CORREÇÃO (Linha 272)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          neq: jest.fn(() => ({\r\n            neq: jest.fn().mockImplementation(() => Promise.resolve({ data: [event], error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n      \r\n      // ✅ CORREÇÃO (Linha 280)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        update: jest.fn(() => ({\r\n          eq: jest.fn().mockImplementation(() => Promise.resolve({ error: null })),\r\n        })),\r\n      }));\r\n      \r\n      // ✅ CORREÇÃO (Linha 288)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          eq: jest.fn(() => ({\r\n            eq: jest.fn().mockImplementation(() => Promise.resolve({ data: [], error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n      \r\n      await EventStatusService.updateAllEventStatuses();\r\n      \r\n      // Verifica se o status mudou para Finalizado\r\n      expect(mockedSupabase.from('events').update).toHaveBeenCalledWith(\r\n        expect.objectContaining({ status: 'Finalizado' })\r\n      );\r\n      \r\n      // Verifica se a penalização foi chamada\r\n      expect(mockedTrustService.penalizeNoShowsForEvent).toHaveBeenCalledWith(4);\r\n    });\r\n\r\n    it('deve mudar status para \"Concluído\" se todos avaliaram', async () => {\r\n      const endTime = new Date('2025-10-01T09:00:00Z'); // Já terminou\r\n      const event = {\r\n        id: 5,\r\n        status: 'Finalizado',\r\n        start_time: '2025-10-01T08:00:00Z',\r\n        end_time: endTime.toISOString(),\r\n      };\r\n\r\n      const participants = [\r\n        { id: 'p1', presenca_confirmada: true, avaliacao_feita: true },\r\n        { id: 'p2', presenca_confirmada: false, avaliacao_feita: false }, // não foi\r\n        { id: 'p3', presenca_confirmada: true, avaliacao_feita: true },\r\n      ];\r\n\r\n      // ✅ CORREÇÃO (Linha 323)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          neq: jest.fn(() => ({\r\n            neq: jest.fn().mockImplementation(() => Promise.resolve({ data: [event], error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n      \r\n      // ✅ CORREÇÃO (Linha 332)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        select: jest.fn(() => ({\r\n          eq: jest.fn(() => ({\r\n            eq: jest.fn().mockImplementation(() => Promise.resolve({ data: participants, error: null })),\r\n          })),\r\n        })),\r\n      }));\r\n      \r\n      // ✅ CORREÇÃO (Linha 340)\r\n      (mockedSupabase.from as jest.Mock).mockImplementationOnce(() => ({\r\n        update: jest.fn(() => ({\r\n          eq: jest.fn().mockImplementation(() => Promise.resolve({ error: null })),\r\n        })),\r\n      }));\r\n      \r\n      await EventStatusService.updateAllEventStatuses();\r\n      \r\n      // Verifica se o status mudou para Concluído\r\n      expect(mockedSupabase.from('events').update).toHaveBeenCalledWith(\r\n        expect.objectContaining({ status: 'Concluído' })\r\n      );\r\n    });\r\n\r\n  });\r\n});\r\n\r\n"],"version":3}