71dcd20235dcc9c50fb904f0cfc6136b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
// src/features/shared/pages/ProfilePage.jsx
const react_1 = tslib_1.__importStar(require("react"));
const react_helmet_async_1 = require("react-helmet-async");
const framer_motion_1 = require("framer-motion");
const lucide_react_1 = require("lucide-react");
const AuthContext_jsx_1 = require("@/contexts/AuthContext.jsx");
const button_jsx_1 = require("@/features/shared/components/ui/button.jsx");
const input_jsx_1 = require("@/features/shared/components/ui/input.jsx");
const label_jsx_1 = require("@/features/shared/components/ui/label.jsx");
const textarea_jsx_1 = require("@/features/shared/components/ui/textarea.jsx");
const HashtagInterestSelector_1 = tslib_1.__importDefault(require("@/features/shared/components/profile/HashtagInterestSelector"));
const supabaseClient_1 = require("@/lib/supabaseClient");
const use_toast_1 = require("@/features/shared/components/ui/use-toast");
const customStyles = {
    avatar: 'w-32 h-32 rounded-full object-cover',
};
const ProfilePage = () => {
    const { user, profile: initialProfile, getProfile, updateProfile, uploadAvatar, createProfileIfNotExists, logout } = (0, AuthContext_jsx_1.useAuth)();
    const { toast } = (0, use_toast_1.useToast)();
    // const [loading, setLoading] = useState(false); // --- VARIÁVEL REMOVIDA ---
    const [saving, setSaving] = (0, react_1.useState)(false);
    const [uploading, setUploading] = (0, react_1.useState)(false);
    const [error, setError] = (0, react_1.useState)(null);
    const [success, setSuccess] = (0, react_1.useState)(null);
    const [username, setUsername] = (0, react_1.useState)('');
    const [bio, setBio] = (0, react_1.useState)('');
    const [avatarUrl, setAvatarUrl] = (0, react_1.useState)(null);
    const [avatarPath, setAvatarPath] = (0, react_1.useState)(null);
    const [photos, setPhotos] = (0, react_1.useState)([]);
    const [hashtagsInteresse, setHashtagsInteresse] = (0, react_1.useState)([]);
    const [isPremium, setIsPremium] = (0, react_1.useState)(false);
    const fileInputRef = (0, react_1.useRef)(null);
    const photosInputRef = (0, react_1.useRef)(null);
    // --- CORREÇÃO NO USEEFFECT ---
    (0, react_1.useEffect)(() => {
        console.log("⚙️ Carregando dados do perfil no ProfilePage...");
        if (initialProfile) {
            console.log('ProfileData completa (do contexto):', initialProfile);
            setUsername(initialProfile.username || '');
            setBio(initialProfile.bio || '');
            setAvatarPath(initialProfile.avatar_url || null);
            const photosArray = initialProfile.photos || [];
            setPhotos(Array.isArray(photosArray) ? photosArray : []);
            const hashtags = initialProfile.hashtags_interesse || [];
            setHashtagsInteresse(Array.isArray(hashtags) ? hashtags : []);
            setIsPremium(initialProfile.is_premium || false);
        }
        else if (user) {
            // Fallback: Se o profile não veio do context, tenta buscar
            console.warn("Profile não estava no contexto, buscando manualmente...");
            const fetchProfile = async () => {
                try {
                    let profileData = await getProfile(user);
                    if (!profileData) {
                        profileData = await createProfileIfNotExists(user);
                    }
                    console.log('ProfileData completa (buscado manualmente):', profileData);
                    if (profileData) {
                        setUsername(profileData.username || '');
                        setBio(profileData.bio || '');
                        setAvatarPath(profileData.avatar_url || null);
                        setPhotos(Array.isArray(profileData.photos) ? profileData.photos : []);
                        setHashtagsInteresse(Array.isArray(profileData.hashtags_interesse) ? profileData.hashtags_interesse : []);
                        setIsPremium(profileData.is_premium || false);
                    }
                }
                catch (err) {
                    console.error('Erro ao carregar perfil (fallback):', err);
                    setError('Falha ao carregar perfil. Tente novamente.');
                }
            };
            fetchProfile();
        }
        // Desabilitamos a regra para este useEffect também, pois getProfile e createProfile...
        // são estáveis (vêm do useMemo/useCallback do Context)
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [user, initialProfile]);
    (0, react_1.useEffect)(() => {
        if (avatarPath) {
            if (!avatarPath.startsWith('http')) {
                const { data } = supabaseClient_1.supabase.storage.from('avatars').getPublicUrl(avatarPath);
                setAvatarUrl(`${data.publicUrl}?t=${new Date().getTime()}`);
            }
            else {
                setAvatarUrl(avatarPath);
            }
        }
        else {
            setAvatarUrl(null);
        }
    }, [avatarPath]);
    const getAvatarFallbackUrl = (0, react_1.useCallback)(() => {
        return `https://ui-avatars.com/api/?name=${encodeURIComponent(username || user?.email || 'U')}&background=8b5cf6&color=fff&size=128`;
    }, [username, user?.email]);
    const handleUpdateProfile = async (e) => {
        if (e)
            e.preventDefault();
        setSaving(true);
        setError(null);
        setSuccess(null);
        try {
            await updateProfile({
                username,
                bio,
                photos,
                hashtags_interesse: hashtagsInteresse,
                avatar_url: avatarPath
            });
            setSuccess('Perfil atualizado com sucesso!');
            toast({ title: "Sucesso!", description: "Perfil atualizado com sucesso!" });
            setTimeout(() => setSuccess(null), 3000);
        }
        catch (err) {
            setError('Falha ao salvar alterações. Verifique os dados.');
            toast({ variant: "destructive", title: "Erro", description: "Falha ao salvar alterações." });
        }
        setSaving(false);
    };
    const handleAvatarClick = () => {
        if (!uploading) {
            fileInputRef.current.click();
        }
    };
    const handleAvatarUpload = async (event) => {
        const file = event.target.files[0];
        if (!file || uploading)
            return;
        setUploading(true);
        setError(null);
        try {
            const newAvatarPath = await uploadAvatar(file, false);
            if (newAvatarPath) {
                setAvatarPath(newAvatarPath);
                setSuccess('Foto de perfil atualizada! Clique em "Salvar" para confirmar.');
                toast({ title: "Foto Pronta!", description: 'Clique em "Guardar Alterações" para salvar.' });
                setTimeout(() => setSuccess(null), 3000);
            }
            else {
                throw new Error("Upload falhou ou não retornou path.");
            }
        }
        catch (err) {
            setError('Falha ao enviar foto. Tente novamente.');
            toast({ variant: "destructive", title: "Erro no Upload", description: "Falha ao enviar foto." });
        }
        setUploading(false);
    };
    const getPublicPhotoUrl = (path) => {
        if (!path)
            return null;
        if (path.startsWith('http'))
            return path;
        const { data } = supabaseClient_1.supabase.storage.from('photos').getPublicUrl(path);
        return data.publicUrl;
    };
    const handlePhotosUpload = async (event) => {
        const filesToUpload = Array.from(event.target.files);
        const availableSlots = 3 - photos.length;
        if (availableSlots <= 0) {
            toast({ variant: "destructive", title: "Limite atingido", description: "Você já tem 3 fotos." });
            return;
        }
        const files = filesToUpload.slice(0, availableSlots);
        if (files.length === 0 || uploading)
            return;
        setUploading(true);
        setError(null);
        try {
            const uploadPromises = files.map(async (file) => await uploadAvatar(file, true));
            const newPhotoPaths = (await Promise.all(uploadPromises)).filter(Boolean);
            const updatedPhotos = [...photos, ...newPhotoPaths];
            setPhotos(updatedPhotos);
            console.log('Fotos adicionadas (paths):', updatedPhotos);
            setSuccess('Fotos adicionadas! Clique em "Salvar" para confirmar.');
            toast({ title: "Fotos Prontas!", description: `Adicionadas ${newPhotoPaths.length} foto(s). Clique em "Guardar Alterações" para salvar.` });
            setTimeout(() => setSuccess(null), 3000);
        }
        catch (err) {
            console.error('Erro ao enviar fotos:', err);
            setError('Falha ao enviar fotos. Tente novamente.');
            toast({ variant: "destructive", title: "Erro no Upload", description: "Falha ao enviar fotos." });
        }
        setUploading(false);
    };
    const handleDeletePhoto = async (index) => {
        const photoToDelete = photos[index];
        if (!photoToDelete)
            return;
        try {
            const updatedPhotos = photos.filter((_, i) => i !== index);
            setPhotos(updatedPhotos);
            console.log('Foto removida localmente. Array atualizado:', updatedPhotos);
            if (!photoToDelete.startsWith('http')) {
                const { error: deleteError } = await supabaseClient_1.supabase.storage.from('photos').remove([photoToDelete]);
                if (deleteError) {
                    console.warn("Não foi possível deletar a foto do storage (pode já ter sido removida):", deleteError.message);
                }
                else {
                    console.log("Foto deletada do storage:", photoToDelete);
                }
            }
            setSuccess('Foto removida! Clique em "Salvar" para confirmar.');
            toast({ title: "Foto Removida!", description: 'Clique em "Guardar Alterações" para salvar a mudança.' });
            setTimeout(() => setSuccess(null), 3000);
        }
        catch (err) {
            console.error('Erro ao remover foto:', err);
            setError('Falha ao remover foto. Tente novamente.');
        }
    };
    // Se o contexto ainda estiver carregando, mostramos um spinner
    if ((0, AuthContext_jsx_1.useAuth)().loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center min-h-screen", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Loader, { className: "w-8 h-8 animate-spin text-purple-500" }) }));
    }
    // O resto do JSX permanece idêntico...
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(react_helmet_async_1.Helmet, { children: (0, jsx_runtime_1.jsx)("title", { children: "Meu Perfil - Mesapra2" }) }), (0, jsx_runtime_1.jsx)("div", { className: "py-6 px-4 sm:px-6 lg:px-8", children: (0, jsx_runtime_1.jsxs)(framer_motion_1.motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "max-w-2xl mx-auto space-y-6", children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-3xl font-bold text-white", children: "Editar Perfil" }), (0, jsx_runtime_1.jsxs)("div", { className: "glass-effect rounded-2xl p-8 border border-white/10", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-xl font-semibold text-white mb-6", children: "Informa\u00E7\u00F5es B\u00E1sicas" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col items-center space-y-4 mb-8", children: [(0, jsx_runtime_1.jsxs)("div", { className: "relative group", children: [(0, jsx_runtime_1.jsx)("img", { src: avatarUrl || getAvatarFallbackUrl(), alt: "Avatar", className: customStyles.avatar, onError: (e) => { e.target.src = getAvatarFallbackUrl(); } }, avatarUrl), (0, jsx_runtime_1.jsx)("input", { type: "file", ref: fileInputRef, onChange: handleAvatarUpload, className: "hidden", accept: "image/png, image/jpeg", disabled: uploading }), (0, jsx_runtime_1.jsx)("button", { onClick: handleAvatarClick, disabled: uploading, className: "absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer", "aria-label": "Alterar foto de perfil", children: uploading ? ((0, jsx_runtime_1.jsx)(lucide_react_1.Loader, { className: "w-6 h-6 text-white animate-spin" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.UploadCloud, { className: "w-8 h-8 text-white" })) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xl font-semibold text-white", children: username || 'Novo Utilizador' }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-white/60", children: user?.email })] })] }), (0, jsx_runtime_1.jsxs)("form", { onSubmit: handleUpdateProfile, className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)(label_jsx_1.Label, { htmlFor: "username", className: "text-white/80", children: "Nome de Utilizador" }), (0, jsx_runtime_1.jsx)(input_jsx_1.Input, { id: "username", value: username, onChange: (e) => setUsername(e.target.value), className: "pl-4 glass-effect border-white/10 text-white", maxLength: 50 })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)(label_jsx_1.Label, { htmlFor: "bio", className: "text-white/80", children: "Bio" }), (0, jsx_runtime_1.jsx)(textarea_jsx_1.Textarea, { id: "bio", value: bio, onChange: (e) => setBio(e.target.value), placeholder: "Conte um pouco sobre si...", className: "pl-4 glass-effect border-white/10 min-h-[100px] text-white", maxLength: 200 })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)(label_jsx_1.Label, { className: "text-white/80", children: "Fotos Adicionais (m\u00E1ximo 3)" }), (0, jsx_runtime_1.jsx)("div", { className: "flex gap-3 mb-4 flex-wrap", children: photos && photos.length > 0 ? (photos.map((photoPath, index) => {
                                                        const photoUrl = getPublicPhotoUrl(photoPath);
                                                        return ((0, jsx_runtime_1.jsx)("div", { className: "relative", children: photoUrl && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)("img", { src: photoUrl, alt: `Foto ${index + 1}`, className: "w-24 h-24 object-cover rounded-lg border-2 border-white/20", onError: (e) => {
                                                                            console.error('Erro ao carregar foto:', photoUrl);
                                                                            e.target.style.display = 'none';
                                                                        } }), (0, jsx_runtime_1.jsx)("button", { type: "button", onClick: () => handleDeletePhoto(index), className: "absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 rounded-full p-1.5 shadow-lg transition-all hover:scale-110", "aria-label": "Deletar foto", title: "Deletar foto", children: (0, jsx_runtime_1.jsx)(lucide_react_1.X, { className: "w-3 h-3 text-white" }) })] })) }, index));
                                                    })) : ((0, jsx_runtime_1.jsx)("p", { className: "text-white/50 text-sm", children: "Nenhuma foto adicional ainda" })) }), photos.length < 3 && photos.length > 0 && ((0, jsx_runtime_1.jsxs)("p", { className: "text-white/60 text-xs mb-2", children: ["Voc\u00EA pode adicionar mais ", 3 - photos.length, " foto(s)"] })), (0, jsx_runtime_1.jsx)("input", { type: "file", ref: photosInputRef, onChange: handlePhotosUpload, className: "hidden", accept: "image/png, image/jpeg", multiple: true, disabled: uploading }), (0, jsx_runtime_1.jsx)(button_jsx_1.Button, { type: "button", onClick: () => photosInputRef.current.click(), disabled: uploading || photos.length >= 3, className: "w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 h-12 text-base font-semibold", children: uploading ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Loader, { className: "mr-2 h-4 w-4 animate-spin" }), "Enviando..."] })) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.UploadCloud, { className: "mr-2 h-4 w-4" }), "Adicionar Fotos"] })) })] }), error && (0, jsx_runtime_1.jsx)("p", { className: "text-red-500 text-sm mt-4 text-center", children: error }), success && (0, jsx_runtime_1.jsx)("p", { className: "text-green-500 text-sm mt-4 text-center", children: success }), (0, jsx_runtime_1.jsx)(button_jsx_1.Button, { type: "submit", disabled: saving || uploading, className: "w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 h-12 text-base font-semibold", children: saving ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Loader, { className: "mr-2 h-4 w-4 animate-spin" }), "A Guardar..."] })) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Save, { className: "mr-2 h-4 w-4" }), "Guardar Altera\u00E7\u00F5es"] })) }), (0, jsx_runtime_1.jsxs)(button_jsx_1.Button, { type: "button", onClick: async () => { await logout(); }, className: "w-full bg-red-500 hover:bg-red-600 h-12 text-base font-semibold flex items-center justify-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.LogOut, { className: "mr-2 h-4 w-4" }), "Deslogar"] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "glass-effect rounded-2xl p-8 border border-white/10", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-xl font-semibold text-white mb-6", children: "Interesses e Notifica\u00E7\u00F5es" }), (0, jsx_runtime_1.jsx)(HashtagInterestSelector_1.default, { selectedHashtags: hashtagsInteresse, onChange: setHashtagsInteresse, isPremium: isPremium }), (0, jsx_runtime_1.jsx)(button_jsx_1.Button, { onClick: handleUpdateProfile, disabled: saving || uploading, className: "w-full mt-6 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 h-12 text-base font-semibold", children: saving ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Loader, { className: "mr-2 h-4 w-4 animate-spin" }), "Salvando..."] })) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Save, { className: "mr-2 h-4 w-4" }), "Salvar Prefer\u00EAncias"] })) })] })] }) })] }));
};
exports.default = ProfilePage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxmZWF0dXJlc1xcc2hhcmVkXFxwYWdlc1xcUHJvZmlsZVBhZ2UuanN4IiwibWFwcGluZ3MiOiI7Ozs7QUFBQSw0Q0FBNEM7QUFDNUMsdURBQXdFO0FBQ3hFLDJEQUE0QztBQUM1QyxpREFBdUM7QUFDdkMsK0NBQW9FO0FBQ3BFLGdFQUFxRDtBQUNyRCwyRUFBb0U7QUFDcEUseUVBQWtFO0FBQ2xFLHlFQUFrRTtBQUNsRSwrRUFBd0U7QUFDeEUsbUlBQW1HO0FBQ25HLHlEQUFnRDtBQUNoRCx5RUFBcUU7QUFFckUsTUFBTSxZQUFZLEdBQUc7SUFDbkIsTUFBTSxFQUFFLHFDQUFxQztDQUM5QyxDQUFDO0FBRUYsTUFBTSxXQUFXLEdBQUcsR0FBRyxFQUFFO0lBQ3ZCLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSx3QkFBd0IsRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFBLHlCQUFPLEdBQUUsQ0FBQztJQUMvSCxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBQSxvQkFBUSxHQUFFLENBQUM7SUFFN0IsOEVBQThFO0lBQzlFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xELE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLElBQUksQ0FBQyxDQUFDO0lBRTdDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxD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LElBQUMsU0FBUyxFQUFDLGNBQWMsR0FBRyxnQ0FFaEMsQ0FDSixHQUNNLElBQ0wsSUFDSyxHQUNULElBQ0wsQ0FDSixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsa0JBQWUsV0FBVyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxERVZNaXhcXEFwcC5NZXNhcHJhMi5jb21cXHNyY1xcZmVhdHVyZXNcXHNoYXJlZFxccGFnZXNcXFByb2ZpbGVQYWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvZmVhdHVyZXMvc2hhcmVkL3BhZ2VzL1Byb2ZpbGVQYWdlLmpzeFxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgSGVsbWV0IH0gZnJvbSAncmVhY3QtaGVsbWV0LWFzeW5jJztcclxuaW1wb3J0IHsgbW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XHJcbmltcG9ydCB7IFNhdmUsIExvYWRlciwgVXBsb2FkQ2xvdWQsIExvZ091dCwgWCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0LmpzeCc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvZmVhdHVyZXMvc2hhcmVkL2NvbXBvbmVudHMvdWkvYnV0dG9uLmpzeCc7XHJcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9mZWF0dXJlcy9zaGFyZWQvY29tcG9uZW50cy91aS9pbnB1dC5qc3gnO1xyXG5pbXBvcnQgeyBMYWJlbCB9IGZyb20gJ0AvZmVhdHVyZXMvc2hhcmVkL2NvbXBvbmVudHMvdWkvbGFiZWwuanN4JztcclxuaW1wb3J0IHsgVGV4dGFyZWEgfSBmcm9tICdAL2ZlYXR1cmVzL3NoYXJlZC9jb21wb25lbnRzL3VpL3RleHRhcmVhLmpzeCc7XHJcbmltcG9ydCBIYXNodGFnSW50ZXJlc3RTZWxlY3RvciBmcm9tICdAL2ZlYXR1cmVzL3NoYXJlZC9jb21wb25lbnRzL3Byb2ZpbGUvSGFzaHRhZ0ludGVyZXN0U2VsZWN0b3InO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlQ2xpZW50JzsgXHJcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9mZWF0dXJlcy9zaGFyZWQvY29tcG9uZW50cy91aS91c2UtdG9hc3QnOyBcclxuXHJcbmNvbnN0IGN1c3RvbVN0eWxlcyA9IHtcclxuICBhdmF0YXI6ICd3LTMyIGgtMzIgcm91bmRlZC1mdWxsIG9iamVjdC1jb3ZlcicsXHJcbn07XHJcblxyXG5jb25zdCBQcm9maWxlUGFnZSA9ICgpID0+IHtcclxuICBjb25zdCB7IHVzZXIsIHByb2ZpbGU6IGluaXRpYWxQcm9maWxlLCBnZXRQcm9maWxlLCB1cGRhdGVQcm9maWxlLCB1cGxvYWRBdmF0YXIsIGNyZWF0ZVByb2ZpbGVJZk5vdEV4aXN0cywgbG9nb3V0IH0gPSB1c2VBdXRoKCk7XHJcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTsgXHJcbiAgXHJcbiAgLy8gY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpOyAvLyAtLS0gVkFSScOBVkVMIFJFTU9WSURBIC0tLVxyXG4gIGNvbnN0IFtzYXZpbmcsIHNldFNhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3VwbG9hZGluZywgc2V0VXBsb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtzdWNjZXNzLCBzZXRTdWNjZXNzXSA9IHVzZVN0YXRlKG51bGwpO1xyXG5cclxuICBjb25zdCBbdXNlcm5hbWUsIHNldFVzZXJuYW1lXSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbYmlvLCBzZXRCaW9dID0gdXNlU3RhdGUoJycpO1xyXG4gIGNvbnN0IFthdmF0YXJVcmwsIHNldEF2YXRhclVybF0gPSB1c2VTdGF0ZShudWxsKTsgXHJcbiAgY29uc3QgW2F2YXRhclBhdGgsIHNldEF2YXRhclBhdGhdID0gdXNlU3RhdGUobnVsbCk7IFxyXG4gIGNvbnN0IFtwaG90b3MsIHNldFBob3Rvc10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2hhc2h0YWdzSW50ZXJlc3NlLCBzZXRIYXNodGFnc0ludGVyZXNzZV0gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2lzUHJlbWl1bSwgc2V0SXNQcmVtaXVtXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgcGhvdG9zSW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIC8vIC0tLSBDT1JSRcOHw4NPIE5PIFVTRUVGRkVDVCAtLS1cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCLimpnvuI8gQ2FycmVnYW5kbyBkYWRvcyBkbyBwZXJmaWwgbm8gUHJvZmlsZVBhZ2UuLi5cIik7XHJcbiAgICBpZiAoaW5pdGlhbFByb2ZpbGUpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2ZpbGVEYXRhIGNvbXBsZXRhIChkbyBjb250ZXh0byk6JywgaW5pdGlhbFByb2ZpbGUpO1xyXG4gICAgICBzZXRVc2VybmFtZShpbml0aWFsUHJvZmlsZS51c2VybmFtZSB8fCAnJyk7XHJcbiAgICAgIHNldEJpbyhpbml0aWFsUHJvZmlsZS5iaW8gfHwgJycpO1xyXG4gICAgICBzZXRBdmF0YXJQYXRoKGluaXRpYWxQcm9maWxlLmF2YXRhcl91cmwgfHwgbnVsbCk7IFxyXG4gICAgICBjb25zdCBwaG90b3NBcnJheSA9IGluaXRpYWxQcm9maWxlLnBob3RvcyB8fCBbXTtcclxuICAgICAgc2V0UGhvdG9zKEFycmF5LmlzQXJyYXkocGhvdG9zQXJyYXkpID8gcGhvdG9zQXJyYXkgOiBbXSk7XHJcbiAgICAgIGNvbnN0IGhhc2h0YWdzID0gaW5pdGlhbFByb2ZpbGUuaGFzaHRhZ3NfaW50ZXJlc3NlIHx8IFtdO1xyXG4gICAgICBzZXRIYXNodGFnc0ludGVyZXNzZShBcnJheS5pc0FycmF5KGhhc2h0YWdzKSA/IGhhc2h0YWdzIDogW10pO1xyXG4gICAgICBzZXRJc1ByZW1pdW0oaW5pdGlhbFByb2ZpbGUuaXNfcHJlbWl1bSB8fCBmYWxzZSk7XHJcbiAgICB9IGVsc2UgaWYgKHVzZXIpIHtcclxuICAgICAgLy8gRmFsbGJhY2s6IFNlIG8gcHJvZmlsZSBuw6NvIHZlaW8gZG8gY29udGV4dCwgdGVudGEgYnVzY2FyXHJcbiAgICAgIGNvbnNvbGUud2FybihcIlByb2ZpbGUgbsOjbyBlc3RhdmEgbm8gY29udGV4dG8sIGJ1c2NhbmRvIG1hbnVhbG1lbnRlLi4uXCIpO1xyXG4gICAgICBjb25zdCBmZXRjaFByb2ZpbGUgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcm9maWxlRGF0YSA9IGF3YWl0IGdldFByb2ZpbGUodXNlcik7IFxyXG4gICAgICAgICAgICBpZiAoIXByb2ZpbGVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgcHJvZmlsZURhdGEgPSBhd2FpdCBjcmVhdGVQcm9maWxlSWZOb3RFeGlzdHModXNlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb2ZpbGVEYXRhIGNvbXBsZXRhIChidXNjYWRvIG1hbnVhbG1lbnRlKTonLCBwcm9maWxlRGF0YSk7XHJcbiAgICAgICAgICAgIGlmKHByb2ZpbGVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRVc2VybmFtZShwcm9maWxlRGF0YS51c2VybmFtZSB8fCAnJyk7XHJcbiAgICAgICAgICAgICAgICBzZXRCaW8ocHJvZmlsZURhdGEuYmlvIHx8ICcnKTtcclxuICAgICAgICAgICAgICAgIHNldEF2YXRhclBhdGgocHJvZmlsZURhdGEuYXZhdGFyX3VybCB8fCBudWxsKTtcclxuICAgICAgICAgICAgICAgIHNldFBob3RvcyhBcnJheS5pc0FycmF5KHByb2ZpbGVEYXRhLnBob3RvcykgPyBwcm9maWxlRGF0YS5waG90b3MgOiBbXSk7XHJcbiAgICAgICAgICAgICAgICBzZXRIYXNodGFnc0ludGVyZXNzZShBcnJheS5pc0FycmF5KHByb2ZpbGVEYXRhLmhhc2h0YWdzX2ludGVyZXNzZSkgPyBwcm9maWxlRGF0YS5oYXNodGFnc19pbnRlcmVzc2UgOiBbXSk7XHJcbiAgICAgICAgICAgICAgICBzZXRJc1ByZW1pdW0ocHJvZmlsZURhdGEuaXNfcHJlbWl1bSB8fCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGNhcnJlZ2FyIHBlcmZpbCAoZmFsbGJhY2spOicsIGVycik7XHJcbiAgICAgICAgICAgICBzZXRFcnJvcignRmFsaGEgYW8gY2FycmVnYXIgcGVyZmlsLiBUZW50ZSBub3ZhbWVudGUuJyk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgZmV0Y2hQcm9maWxlKCk7XHJcbiAgICB9XHJcbiAgLy8gRGVzYWJpbGl0YW1vcyBhIHJlZ3JhIHBhcmEgZXN0ZSB1c2VFZmZlY3QgdGFtYsOpbSwgcG9pcyBnZXRQcm9maWxlIGUgY3JlYXRlUHJvZmlsZS4uLlxyXG4gIC8vIHPDo28gZXN0w6F2ZWlzICh2w6ptIGRvIHVzZU1lbW8vdXNlQ2FsbGJhY2sgZG8gQ29udGV4dClcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW3VzZXIsIGluaXRpYWxQcm9maWxlXSk7IFxyXG5cclxuICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChhdmF0YXJQYXRoKSB7XHJcbiAgICAgIGlmICghYXZhdGFyUGF0aC5zdGFydHNXaXRoKCdodHRwJykpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbSgnYXZhdGFycycpLmdldFB1YmxpY1VybChhdmF0YXJQYXRoKTtcclxuICAgICAgICBzZXRBdmF0YXJVcmwoYCR7ZGF0YS5wdWJsaWNVcmx9P3Q9JHtuZXcgRGF0ZSgpLmdldFRpbWUoKX1gKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRBdmF0YXJVcmwoYXZhdGFyUGF0aCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICBzZXRBdmF0YXJVcmwobnVsbCk7XHJcbiAgICB9XHJcbiAgIH0sIFthdmF0YXJQYXRoXSk7XHJcblxyXG4gIGNvbnN0IGdldEF2YXRhckZhbGxiYWNrVXJsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgIHJldHVybiBgaHR0cHM6Ly91aS1hdmF0YXJzLmNvbS9hcGkvP25hbWU9JHtlbmNvZGVVUklDb21wb25lbnQoXHJcbiAgICAgICB1c2VybmFtZSB8fCB1c2VyPy5lbWFpbCB8fCAnVSdcclxuICAgICApfSZiYWNrZ3JvdW5kPThiNWNmNiZjb2xvcj1mZmYmc2l6ZT0xMjhgO1xyXG4gIH0sIFt1c2VybmFtZSwgdXNlcj8uZW1haWxdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlVXBkYXRlUHJvZmlsZSA9IGFzeW5jIChlKSA9PiB7XHJcbiAgICBpZiAoZSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgc2V0U2F2aW5nKHRydWUpO1xyXG4gICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICBzZXRTdWNjZXNzKG51bGwpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdXBkYXRlUHJvZmlsZSh7IFxyXG4gICAgICAgIHVzZXJuYW1lLCBcclxuICAgICAgICBiaW8sIFxyXG4gICAgICAgIHBob3RvcywgXHJcbiAgICAgICAgaGFzaHRhZ3NfaW50ZXJlc3NlOiBoYXNodGFnc0ludGVyZXNzZSxcclxuICAgICAgICBhdmF0YXJfdXJsOiBhdmF0YXJQYXRoIFxyXG4gICAgICB9KTtcclxuICAgICAgc2V0U3VjY2VzcygnUGVyZmlsIGF0dWFsaXphZG8gY29tIHN1Y2Vzc28hJyk7XHJcbiAgICAgIHRvYXN0KHsgdGl0bGU6IFwiU3VjZXNzbyFcIiwgZGVzY3JpcHRpb246IFwiUGVyZmlsIGF0dWFsaXphZG8gY29tIHN1Y2Vzc28hXCIgfSk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0U3VjY2VzcyhudWxsKSwgMzAwMCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgc2V0RXJyb3IoJ0ZhbGhhIGFvIHNhbHZhciBhbHRlcmHDp8O1ZXMuIFZlcmlmaXF1ZSBvcyBkYWRvcy4nKTtcclxuICAgICAgdG9hc3QoeyB2YXJpYW50OiBcImRlc3RydWN0aXZlXCIsIHRpdGxlOiBcIkVycm9cIiwgZGVzY3JpcHRpb246IFwiRmFsaGEgYW8gc2FsdmFyIGFsdGVyYcOnw7Vlcy5cIiB9KTtcclxuICAgIH1cclxuICAgIHNldFNhdmluZyhmYWxzZSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQXZhdGFyQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXVwbG9hZGluZykge1xyXG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC5jbGljaygpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZUF2YXRhclVwbG9hZCA9IGFzeW5jIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcclxuICAgIGlmICghZmlsZSB8fCB1cGxvYWRpbmcpIHJldHVybjtcclxuXHJcbiAgICBzZXRVcGxvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG5ld0F2YXRhclBhdGggPSBhd2FpdCB1cGxvYWRBdmF0YXIoZmlsZSwgZmFsc2UpO1xyXG4gICAgICBpZiAobmV3QXZhdGFyUGF0aCkge1xyXG4gICAgICAgIHNldEF2YXRhclBhdGgobmV3QXZhdGFyUGF0aCk7IFxyXG4gICAgICAgIHNldFN1Y2Nlc3MoJ0ZvdG8gZGUgcGVyZmlsIGF0dWFsaXphZGEhIENsaXF1ZSBlbSBcIlNhbHZhclwiIHBhcmEgY29uZmlybWFyLicpO1xyXG4gICAgICAgIHRvYXN0KHsgdGl0bGU6IFwiRm90byBQcm9udGEhXCIsIGRlc2NyaXB0aW9uOiAnQ2xpcXVlIGVtIFwiR3VhcmRhciBBbHRlcmHDp8O1ZXNcIiBwYXJhIHNhbHZhci4nIH0pO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0U3VjY2VzcyhudWxsKSwgMzAwMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVwbG9hZCBmYWxob3Ugb3UgbsOjbyByZXRvcm5vdSBwYXRoLlwiKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHNldEVycm9yKCdGYWxoYSBhbyBlbnZpYXIgZm90by4gVGVudGUgbm92YW1lbnRlLicpO1xyXG4gICAgICB0b2FzdCh7IHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIiwgdGl0bGU6IFwiRXJybyBubyBVcGxvYWRcIiwgZGVzY3JpcHRpb246IFwiRmFsaGEgYW8gZW52aWFyIGZvdG8uXCIgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRVcGxvYWRpbmcoZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFB1YmxpY1Bob3RvVXJsID0gKHBhdGgpID0+IHtcclxuICAgICAgaWYgKCFwYXRoKSByZXR1cm4gbnVsbDtcclxuICAgICAgaWYgKHBhdGguc3RhcnRzV2l0aCgnaHR0cCcpKSByZXR1cm4gcGF0aDtcclxuICAgICAgY29uc3QgeyBkYXRhIH0gPSBzdXBhYmFzZS5zdG9yYWdlLmZyb20oJ3Bob3RvcycpLmdldFB1YmxpY1VybChwYXRoKTtcclxuICAgICAgcmV0dXJuIGRhdGEucHVibGljVXJsO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVBob3Rvc1VwbG9hZCA9IGFzeW5jIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgZmlsZXNUb1VwbG9hZCA9IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmZpbGVzKTtcclxuICAgIGNvbnN0IGF2YWlsYWJsZVNsb3RzID0gMyAtIHBob3Rvcy5sZW5ndGg7XHJcbiAgICBpZiAoYXZhaWxhYmxlU2xvdHMgPD0gMCkge1xyXG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiLCB0aXRsZTogXCJMaW1pdGUgYXRpbmdpZG9cIiwgZGVzY3JpcHRpb246IFwiVm9jw6ogasOhIHRlbSAzIGZvdG9zLlwiIH0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaWxlcyA9IGZpbGVzVG9VcGxvYWQuc2xpY2UoMCwgYXZhaWxhYmxlU2xvdHMpO1xyXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCB8fCB1cGxvYWRpbmcpIHJldHVybjtcclxuXHJcbiAgICBzZXRVcGxvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHVwbG9hZFByb21pc2VzID0gZmlsZXMubWFwKGFzeW5jIChmaWxlKSA9PiBhd2FpdCB1cGxvYWRBdmF0YXIoZmlsZSwgdHJ1ZSkpO1xyXG4gICAgICBjb25zdCBuZXdQaG90b1BhdGhzID0gKGF3YWl0IFByb21pc2UuYWxsKHVwbG9hZFByb21pc2VzKSkuZmlsdGVyKEJvb2xlYW4pOyBcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRQaG90b3MgPSBbLi4ucGhvdG9zLCAuLi5uZXdQaG90b1BhdGhzXTtcclxuICAgICAgc2V0UGhvdG9zKHVwZGF0ZWRQaG90b3MpOyBcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdGb3RvcyBhZGljaW9uYWRhcyAocGF0aHMpOicsIHVwZGF0ZWRQaG90b3MpO1xyXG4gICAgICBzZXRTdWNjZXNzKCdGb3RvcyBhZGljaW9uYWRhcyEgQ2xpcXVlIGVtIFwiU2FsdmFyXCIgcGFyYSBjb25maXJtYXIuJyk7XHJcbiAgICAgIHRvYXN0KHsgdGl0bGU6IFwiRm90b3MgUHJvbnRhcyFcIiwgZGVzY3JpcHRpb246IGBBZGljaW9uYWRhcyAke25ld1Bob3RvUGF0aHMubGVuZ3RofSBmb3RvKHMpLiBDbGlxdWUgZW0gXCJHdWFyZGFyIEFsdGVyYcOnw7Vlc1wiIHBhcmEgc2FsdmFyLmAgfSk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0U3VjY2VzcyhudWxsKSwgMzAwMCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBlbnZpYXIgZm90b3M6JywgZXJyKTtcclxuICAgICAgc2V0RXJyb3IoJ0ZhbGhhIGFvIGVudmlhciBmb3Rvcy4gVGVudGUgbm92YW1lbnRlLicpO1xyXG4gICAgICB0b2FzdCh7IHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIiwgdGl0bGU6IFwiRXJybyBubyBVcGxvYWRcIiwgZGVzY3JpcHRpb246IFwiRmFsaGEgYW8gZW52aWFyIGZvdG9zLlwiIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0VXBsb2FkaW5nKGZhbHNlKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVEZWxldGVQaG90byA9IGFzeW5jIChpbmRleCkgPT4ge1xyXG4gICAgY29uc3QgcGhvdG9Ub0RlbGV0ZSA9IHBob3Rvc1tpbmRleF07XHJcbiAgICBpZiAoIXBob3RvVG9EZWxldGUpIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkUGhvdG9zID0gcGhvdG9zLmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpO1xyXG4gICAgICBzZXRQaG90b3ModXBkYXRlZFBob3Rvcyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGb3RvIHJlbW92aWRhIGxvY2FsbWVudGUuIEFycmF5IGF0dWFsaXphZG86JywgdXBkYXRlZFBob3Rvcyk7XHJcblxyXG4gICAgICBpZiAoIXBob3RvVG9EZWxldGUuc3RhcnRzV2l0aCgnaHR0cCcpKSB7IFxyXG4gICAgICAgICBjb25zdCB7IGVycm9yOiBkZWxldGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZS5mcm9tKCdwaG90b3MnKS5yZW1vdmUoW3Bob3RvVG9EZWxldGVdKTtcclxuICAgICAgICAgaWYoZGVsZXRlRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTsOjbyBmb2kgcG9zc8OtdmVsIGRlbGV0YXIgYSBmb3RvIGRvIHN0b3JhZ2UgKHBvZGUgasOhIHRlciBzaWRvIHJlbW92aWRhKTpcIiwgZGVsZXRlRXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZvdG8gZGVsZXRhZGEgZG8gc3RvcmFnZTpcIiwgcGhvdG9Ub0RlbGV0ZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgc2V0U3VjY2VzcygnRm90byByZW1vdmlkYSEgQ2xpcXVlIGVtIFwiU2FsdmFyXCIgcGFyYSBjb25maXJtYXIuJyk7XHJcbiAgICAgIHRvYXN0KHsgdGl0bGU6IFwiRm90byBSZW1vdmlkYSFcIiwgZGVzY3JpcHRpb246ICdDbGlxdWUgZW0gXCJHdWFyZGFyIEFsdGVyYcOnw7Vlc1wiIHBhcmEgc2FsdmFyIGEgbXVkYW7Dp2EuJyB9KTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRTdWNjZXNzKG51bGwpLCAzMDAwKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIHJlbW92ZXIgZm90bzonLCBlcnIpO1xyXG4gICAgICBzZXRFcnJvcignRmFsaGEgYW8gcmVtb3ZlciBmb3RvLiBUZW50ZSBub3ZhbWVudGUuJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gU2UgbyBjb250ZXh0byBhaW5kYSBlc3RpdmVyIGNhcnJlZ2FuZG8sIG1vc3RyYW1vcyB1bSBzcGlubmVyXHJcbiAgaWYgKHVzZUF1dGgoKS5sb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlblwiPlxyXG4gICAgICAgIDxMb2FkZXIgY2xhc3NOYW1lPVwidy04IGgtOCBhbmltYXRlLXNwaW4gdGV4dC1wdXJwbGUtNTAwXCIgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gTyByZXN0byBkbyBKU1ggcGVybWFuZWNlIGlkw6pudGljby4uLlxyXG4gIHJldHVybiAoXHJcbiAgICA8PlxyXG4gICAgICA8SGVsbWV0PlxyXG4gICAgICAgIDx0aXRsZT5NZXUgUGVyZmlsIC0gTWVzYXByYTI8L3RpdGxlPlxyXG4gICAgICA8L0hlbG1ldD5cclxuXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHktNiBweC00IHNtOnB4LTYgbGc6cHgtOFwiPlxyXG4gICAgICAgIDxtb3Rpb24uZGl2IFxyXG4gICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB5OiAyMCB9fVxyXG4gICAgICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJtYXgtdy0yeGwgbXgtYXV0byBzcGFjZS15LTZcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC13aGl0ZVwiPkVkaXRhciBQZXJmaWw8L2gxPlxyXG5cclxuICAgICAgICAgIHsvKiBJbmZvcm1hw6fDtWVzIELDoXNpY2FzICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnbGFzcy1lZmZlY3Qgcm91bmRlZC0yeGwgcC04IGJvcmRlciBib3JkZXItd2hpdGUvMTBcIj5cclxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlIG1iLTZcIj5JbmZvcm1hw6fDtWVzIELDoXNpY2FzPC9oMj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgc3BhY2UteS00IG1iLThcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICA8aW1nXHJcbiAgICAgICAgICAgICAgICAgIGtleT17YXZhdGFyVXJsfVxyXG4gICAgICAgICAgICAgICAgICBzcmM9e2F2YXRhclVybCB8fCBnZXRBdmF0YXJGYWxsYmFja1VybCgpfVxyXG4gICAgICAgICAgICAgICAgICBhbHQ9XCJBdmF0YXJcIlxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2N1c3RvbVN0eWxlcy5hdmF0YXJ9XHJcbiAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiB7IGUudGFyZ2V0LnNyYyA9IGdldEF2YXRhckZhbGxiYWNrVXJsKCkgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cclxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUF2YXRhclVwbG9hZH1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcclxuICAgICAgICAgICAgICAgICAgYWNjZXB0PVwiaW1hZ2UvcG5nLCBpbWFnZS9qcGVnXCJcclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3VwbG9hZGluZ31cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUF2YXRhckNsaWNrfVxyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dXBsb2FkaW5nfVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzYwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5IGN1cnNvci1wb2ludGVyXCJcclxuICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkFsdGVyYXIgZm90byBkZSBwZXJmaWxcIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICB7dXBsb2FkaW5nID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxMb2FkZXIgY2xhc3NOYW1lPVwidy02IGgtNiB0ZXh0LXdoaXRlIGFuaW1hdGUtc3BpblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFVwbG9hZENsb3VkIGNsYXNzTmFtZT1cInctOCBoLTggdGV4dC13aGl0ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZVwiPnt1c2VybmFtZSB8fCAnTm92byBVdGlsaXphZG9yJ308L3A+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtd2hpdGUvNjBcIj57dXNlcj8uZW1haWx9PC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVVcGRhdGVQcm9maWxlfSBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxyXG4gICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJ1c2VybmFtZVwiIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvODBcIj5Ob21lIGRlIFV0aWxpemFkb3I8L0xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICAgIGlkPVwidXNlcm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17dXNlcm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VXNlcm5hbWUoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwbC00IGdsYXNzLWVmZmVjdCBib3JkZXItd2hpdGUvMTAgdGV4dC13aGl0ZVwiXHJcbiAgICAgICAgICAgICAgICAgIG1heExlbmd0aD17NTB9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XHJcbiAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImJpb1wiIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvODBcIj5CaW88L0xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPFRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgIGlkPVwiYmlvXCJcclxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2Jpb31cclxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRCaW8oZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNvbnRlIHVtIHBvdWNvIHNvYnJlIHNpLi4uXCJcclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicGwtNCBnbGFzcy1lZmZlY3QgYm9yZGVyLXdoaXRlLzEwIG1pbi1oLVsxMDBweF0gdGV4dC13aGl0ZVwiXHJcbiAgICAgICAgICAgICAgICAgIG1heExlbmd0aD17MjAwfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cclxuICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzgwXCI+Rm90b3MgQWRpY2lvbmFpcyAobcOheGltbyAzKTwvTGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTMgbWItNCBmbGV4LXdyYXBcIj5cclxuICAgICAgICAgICAgICAgICAge3Bob3RvcyAmJiBwaG90b3MubGVuZ3RoID4gMCA/IChcclxuICAgICAgICAgICAgICAgICAgICBwaG90b3MubWFwKChwaG90b1BhdGgsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG90b1VybCA9IGdldFB1YmxpY1Bob3RvVXJsKHBob3RvUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge3Bob3RvVXJsICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3Bob3RvVXJsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17YEZvdG8gJHtpbmRleCArIDF9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTI0IGgtMjQgb2JqZWN0LWNvdmVyIHJvdW5kZWQtbGcgYm9yZGVyLTIgYm9yZGVyLXdoaXRlLzIwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4geyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gY2FycmVnYXIgZm90bzonLCBwaG90b1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRGVsZXRlUGhvdG8oaW5kZXgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIC10b3AtMiAtcmlnaHQtMiBiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAgcm91bmRlZC1mdWxsIHAtMS41IHNoYWRvdy1sZyB0cmFuc2l0aW9uLWFsbCBob3ZlcjpzY2FsZS0xMTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJEZWxldGFyIGZvdG9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRGVsZXRhciBmb3RvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxYIGNsYXNzTmFtZT1cInctMyBoLTMgdGV4dC13aGl0ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS81MCB0ZXh0LXNtXCI+TmVuaHVtYSBmb3RvIGFkaWNpb25hbCBhaW5kYTwvcD5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAge3Bob3Rvcy5sZW5ndGggPCAzICYmIHBob3Rvcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MCB0ZXh0LXhzIG1iLTJcIj5Wb2PDqiBwb2RlIGFkaWNpb25hciBtYWlzIHszIC0gcGhvdG9zLmxlbmd0aH0gZm90byhzKTwvcD5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgICAgICByZWY9e3Bob3Rvc0lucHV0UmVmfVxyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlUGhvdG9zVXBsb2FkfVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS9wbmcsIGltYWdlL2pwZWdcIlxyXG4gICAgICAgICAgICAgICAgICBtdWx0aXBsZVxyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dXBsb2FkaW5nfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHBob3Rvc0lucHV0UmVmLmN1cnJlbnQuY2xpY2soKX1cclxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3VwbG9hZGluZyB8fCBwaG90b3MubGVuZ3RoID49IDN9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTUwMCB0by1waW5rLTUwMCBob3Zlcjpmcm9tLXB1cnBsZS02MDAgaG92ZXI6dG8tcGluay02MDAgaC0xMiB0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZFwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIHt1cGxvYWRpbmcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgICAgIDxMb2FkZXIgY2xhc3NOYW1lPVwibXItMiBoLTQgdy00IGFuaW1hdGUtc3BpblwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICBFbnZpYW5kby4uLlxyXG4gICAgICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8VXBsb2FkQ2xvdWQgY2xhc3NOYW1lPVwibXItMiBoLTQgdy00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIEFkaWNpb25hciBGb3Rvc1xyXG4gICAgICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgIHtlcnJvciAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDAgdGV4dC1zbSBtdC00IHRleHQtY2VudGVyXCI+e2Vycm9yfTwvcD59XHJcbiAgICAgICAgICAgICAge3N1Y2Nlc3MgJiYgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmVlbi01MDAgdGV4dC1zbSBtdC00IHRleHQtY2VudGVyXCI+e3N1Y2Nlc3N9PC9wPn1cclxuXHJcbiAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCIgZGlzYWJsZWQ9e3NhdmluZyB8fCB1cGxvYWRpbmd9IGNsYXNzTmFtZT1cInctZnVsbCBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTUwMCB0by1waW5rLTUwMCBob3Zlcjpmcm9tLXB1cnBsZS02MDAgaG92ZXI6dG8tcGluay02MDAgaC0xMiB0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZFwiPlxyXG4gICAgICAgICAgICAgICAge3NhdmluZyA/IChcclxuICAgICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgICA8TG9hZGVyIGNsYXNzTmFtZT1cIm1yLTIgaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIEEgR3VhcmRhci4uLlxyXG4gICAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICAgICAgPFNhdmUgY2xhc3NOYW1lPVwibXItMiBoLTQgdy00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICBHdWFyZGFyIEFsdGVyYcOnw7Vlc1xyXG4gICAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgPC9CdXR0b24+XHJcblxyXG4gICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4geyBhd2FpdCBsb2dvdXQoKTsgfX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAgaC0xMiB0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPExvZ091dCBjbGFzc05hbWU9XCJtci0yIGgtNCB3LTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgRGVzbG9nYXJcclxuICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgey8qIFNlw6fDo28gZGUgSGFzaHRhZ3MgZGUgSW50ZXJlc3NlICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnbGFzcy1lZmZlY3Qgcm91bmRlZC0yeGwgcC04IGJvcmRlciBib3JkZXItd2hpdGUvMTBcIj5cclxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlIG1iLTZcIj5JbnRlcmVzc2VzIGUgTm90aWZpY2HDp8O1ZXM8L2gyPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPEhhc2h0YWdJbnRlcmVzdFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWRIYXNodGFncz17aGFzaHRhZ3NJbnRlcmVzc2V9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3NldEhhc2h0YWdzSW50ZXJlc3NlfVxyXG4gICAgICAgICAgICAgIGlzUHJlbWl1bT17aXNQcmVtaXVtfVxyXG4gICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgPEJ1dHRvbiBcclxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVVcGRhdGVQcm9maWxlfSBcclxuICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nIHx8IHVwbG9hZGluZ31cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgbXQtNiBiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTUwMCB0by1waW5rLTUwMCBob3Zlcjpmcm9tLXB1cnBsZS02MDAgaG92ZXI6dG8tcGluay02MDAgaC0xMiB0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZFwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7c2F2aW5nID8gKFxyXG4gICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgPExvYWRlciBjbGFzc05hbWU9XCJtci0yIGgtNCB3LTQgYW5pbWF0ZS1zcGluXCIgLz5cclxuICAgICAgICAgICAgICAgICAgU2FsdmFuZG8uLi5cclxuICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICA8U2F2ZSBjbGFzc05hbWU9XCJtci0yIGgtNCB3LTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICBTYWx2YXIgUHJlZmVyw6puY2lhc1xyXG4gICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L21vdGlvbi5kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC8+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFByb2ZpbGVQYWdlOyJdLCJ2ZXJzaW9uIjozfQ==