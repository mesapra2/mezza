bce813a4954321c3661250d3e5fedcdb
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
// --- Mocks ---
// Mock do hook useAuth
// ✅ CORREÇÃO: Usando caminho relativo no mock também
jest.mock('./contexts/AuthContext.jsx', () => ({
    useAuth: jest.fn(),
}));
/* eslint-env jest */
const react_1 = tslib_1.__importDefault(require("react"));
const react_2 = require("@testing-library/react");
const react_router_dom_1 = require("react-router-dom");
// ✅ CORREÇÃO: Alterado para caminho relativo
const AuthContext_jsx_1 = require("./contexts/AuthContext.jsx");
const ProtectedRoutes_jsx_1 = require("./ProtectedRoutes.jsx"); // ✅ CORREÇÃO: Alterado para caminho relativo
// Componentes "filho" e de "destino" para testar o roteamento
const TestChildComponent = () => (0, jsx_runtime_1.jsx)("div", { children: "Componente Filho Protegido" });
const LoginComponent = () => (0, jsx_runtime_1.jsx)("div", { children: "P\u00E1gina de Login" });
const UserDashboard = () => (0, jsx_runtime_1.jsx)("div", { children: "Dashboard do Usu\u00E1rio" });
const PartnerDashboard = () => (0, jsx_runtime_1.jsx)("div", { children: "Dashboard do Parceiro" });
// --- Helper de Renderização ---
/**
 * Renderiza os componentes de rota dentro de um MemoryRouter
 * para simular a navegação.
 * @param authState - O estado mockado para o useAuth
 * @param initialEntry - A rota inicial que o usuário está tentando acessar
 */
const renderRoutes = (authState, initialEntry = '/protected') => {
    // Define o valor de retorno do mock do useAuth
    AuthContext_jsx_1.useAuth.mockReturnValue(authState);
    return (0, react_2.render)((0, jsx_runtime_1.jsx)(react_router_dom_1.MemoryRouter, { initialEntries: [initialEntry], children: (0, jsx_runtime_1.jsxs)(react_router_dom_1.Routes, { children: [(0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: "/login", element: (0, jsx_runtime_1.jsx)(LoginComponent, {}) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: "/dashboard", element: (0, jsx_runtime_1.jsx)(UserDashboard, {}) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: "/partner/dashboard", element: (0, jsx_runtime_1.jsx)(PartnerDashboard, {}) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { element: (0, jsx_runtime_1.jsx)(ProtectedRoutes_jsx_1.ProtectedRoute, {}), children: (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: "/protected-outlet", element: (0, jsx_runtime_1.jsx)(TestChildComponent, {}) }) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: "/protected-user", element: (0, jsx_runtime_1.jsx)(ProtectedRoutes_jsx_1.ProtectedUserRoute, { children: (0, jsx_runtime_1.jsx)(TestChildComponent, {}) }) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Route, { path: "/protected-partner", element: (0, jsx_runtime_1.jsx)(ProtectedRoutes_jsx_1.ProtectedPartnerRoute, { children: (0, jsx_runtime_1.jsx)(TestChildComponent, {}) }) })] }) }));
};
// --- Test Suites ---
describe('ProtectedRoutes', () => {
    beforeEach(() => {
        // Limpa o mock antes de cada teste
        AuthContext_jsx_1.useAuth.mockClear();
    });
    // --- Testes para <ProtectedRoute> ---
    describe('ProtectedRoute', () => {
        it('deve renderizar o loading spinner enquanto "loading" é true', () => {
            const authState = { user: null, loading: true, profile: null };
            renderRoutes(authState, '/protected-outlet');
            // Verifica se o spinner (com role 'progressbar') está visível
            expect(react_2.screen.getByRole('progressbar')).toBeInTheDocument();
            // Verifica se o componente filho NÃO está visível
            expect(react_2.screen.queryByText('Componente Filho Protegido')).not.toBeInTheDocument();
        });
        it('deve renderizar o loading spinner enquanto "profile" não está carregado (mesmo com user)', () => {
            const authState = { user: { id: '123' }, loading: false, profile: null };
            renderRoutes(authState, '/protected-outlet');
            expect(react_2.screen.getByRole('progressbar')).toBeInTheDocument();
        });
        it('deve redirecionar para /login se não houver usuário e não estiver carregando', () => {
            const authState = { user: null, loading: false, profile: null };
            renderRoutes(authState, '/protected-outlet');
            // Verifica se foi redirecionado para a página de login
            expect(react_2.screen.getByText('Página de Login')).toBeInTheDocument();
            // Verifica se o componente filho NÃO está visível
            expect(react_2.screen.queryByText('Componente Filho Protegido')).not.toBeInTheDocument();
        });
        it('deve renderizar o componente filho (via Outlet) se o usuário estiver autenticado', () => {
            const authState = { user: { id: '123' }, loading: false, profile: { id: 'p123' } };
            renderRoutes(authState, '/protected-outlet');
            // Verifica se o componente filho está visível
            expect(react_2.screen.getByText('Componente Filho Protegido')).toBeInTheDocument();
            // Verifica se a página de login NÃO está visível
            expect(react_2.screen.queryByText('Página de Login')).not.toBeInTheDocument();
        });
    });
    // --- Testes para <ProtectedUserRoute> ---
    describe('ProtectedUserRoute', () => {
        it('deve renderizar o filho se o usuário for comum (não-parceiro)', () => {
            const authState = {
                user: { id: '123' },
                loading: false,
                profile: { id: 'p123', profile_type: 'user', partner_id: null },
            };
            renderRoutes(authState, '/protected-user');
            expect(react_2.screen.getByText('Componente Filho Protegido')).toBeInTheDocument();
        });
        it('deve redirecionar para /partner/dashboard se o usuário for parceiro', () => {
            const authState = {
                user: { id: '123' },
                loading: false,
                profile: { id: 'p123', profile_type: 'partner' },
            };
            renderRoutes(authState, '/protected-user');
            // Verifica se foi redirecionado para o dashboard de parceiro
            expect(react_2.screen.getByText('Dashboard do Parceiro')).toBeInTheDocument();
            // Verifica se o componente filho NÃO está visível
            expect(react_2.screen.queryByText('Componente Filho Protegido')).not.toBeInTheDocument();
        });
        it('deve redirecionar para /login se o usuário não estiver logado', () => {
            const authState = { user: null, loading: false, profile: null };
            renderRoutes(authState, '/protected-user');
            // O <ProtectedRoute> interno deve redirecionar para /login
            expect(react_2.screen.getByText('Página de Login')).toBeInTheDocument();
        });
    });
    // --- Testes para <ProtectedPartnerRoute> ---
    describe('ProtectedPartnerRoute', () => {
        it('deve renderizar o filho se o usuário for parceiro', () => {
            const authState = {
                user: { id: '123' },
                loading: false,
                profile: { id: 'p123', profile_type: 'partner' },
            };
            renderRoutes(authState, '/protected-partner');
            expect(react_2.screen.getByText('Componente Filho Protegido')).toBeInTheDocument();
        });
        it('deve redirecionar para /dashboard se o usuário NÃO for parceiro', () => {
            const authState = {
                user: { id: '123' },
                loading: false,
                profile: { id: 'p123', profile_type: 'user', partner_id: null },
            };
            renderRoutes(authState, '/protected-partner');
            // Verifica se foi redirecionado para o dashboard de usuário
            expect(react_2.screen.getByText('Dashboard do Usuário')).toBeInTheDocument();
            // Verifica se o componente filho NÃO está visível
            expect(react_2.screen.queryByText('Componente Filho Protegido')).not.toBeInTheDocument();
        });
        it('deve redirecionar para /login se o usuário não estiver logado', () => {
            const authState = { user: null, loading: false, profile: null };
            renderRoutes(authState, '/protected-partner');
            // O <ProtectedRoute> interno deve redirecionar para /login
            expect(react_2.screen.getByText('Página de Login')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxQcm90ZWN0ZWRSb3V0ZXMudGVzdC5qc3giLCJtYXBwaW5ncyI6Ijs7OztBQVlBLGdCQUFnQjtBQUVoQix1QkFBdUI7QUFDdkIscURBQXFEO0FBQ3JELElBQUksQ0FBQyxJQUFJLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUM3QyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNuQixDQUFDLENBQUMsQ0FBQztBQWxCSixxQkFBcUI7QUFDckIsMERBQTBCO0FBQzFCLGtEQUF3RDtBQUN4RCx1REFBK0Q7QUFDL0QsNkNBQTZDO0FBQzdDLGdFQUFxRDtBQUNyRCwrREFJK0IsQ0FBQyw2Q0FBNkM7QUFVN0UsOERBQThEO0FBQzlELE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxFQUFFLENBQUMseUVBQXFDLENBQUM7QUFDdkUsTUFBTSxjQUFjLEdBQUcsR0FBRyxFQUFFLENBQUMsbUVBQTBCLENBQUM7QUFDeEQsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFLENBQUMsd0VBQStCLENBQUM7QUFDNUQsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxvRUFBZ0MsQ0FBQztBQUVoRSxpQ0FBaUM7QUFFakM7Ozs7O0dBS0c7QUFDSCxNQUFNLFlBQVksR0FBRyxDQUFDLFNBQVMsRUFBRSxZQUFZLEdBQUcsWUFBWSxFQUFFLEVBQUU7SUFDOUQsK0NBQStDO0lBQy9DLHlCQUFPLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBRW5DLE9BQU8sSUFBQSxjQUFNLEVBQ1gsdUJBQUMsK0JBQVksSUFBQyxjQUFjLEVBQUUsQ0FBQyxZQUFZLENBQUMsWUFDMUMsd0JBQUMseUJBQU0sZUFFTCx1QkFBQyx3QkFBSyxJQUFDLElBQUksRUFBQyxRQUFRLEVBQUMsT0FBTyxFQUFFLHVCQUFDLGNBQWMsS0FBRyxHQUFJLEVBR3BELHVCQUFDLHdCQUFLLElBQUMsSUFBSSxFQUFDLFlBQVksRUFBQyxPQUFP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cHAuTWVzYXByYTIuY29tXFxzcmNcXFByb3RlY3RlZFJvdXRlcy50ZXN0LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZW52IGplc3QgKi9cclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcclxuaW1wb3J0IHsgTWVtb3J5Um91dGVyLCBSb3V0ZXMsIFJvdXRlIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbi8vIOKchSBDT1JSRcOHw4NPOiBBbHRlcmFkbyBwYXJhIGNhbWluaG8gcmVsYXRpdm9cclxuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4vY29udGV4dHMvQXV0aENvbnRleHQuanN4JztcclxuaW1wb3J0IHtcclxuICBQcm90ZWN0ZWRSb3V0ZSxcclxuICBQcm90ZWN0ZWRVc2VyUm91dGUsXHJcbiAgUHJvdGVjdGVkUGFydG5lclJvdXRlLFxyXG59IGZyb20gJy4vUHJvdGVjdGVkUm91dGVzLmpzeCc7IC8vIOKchSBDT1JSRcOHw4NPOiBBbHRlcmFkbyBwYXJhIGNhbWluaG8gcmVsYXRpdm9cclxuXHJcbi8vIC0tLSBNb2NrcyAtLS1cclxuXHJcbi8vIE1vY2sgZG8gaG9vayB1c2VBdXRoXHJcbi8vIOKchSBDT1JSRcOHw4NPOiBVc2FuZG8gY2FtaW5obyByZWxhdGl2byBubyBtb2NrIHRhbWLDqW1cclxuamVzdC5tb2NrKCcuL2NvbnRleHRzL0F1dGhDb250ZXh0LmpzeCcsICgpID0+ICh7XHJcbiAgdXNlQXV0aDogamVzdC5mbigpLFxyXG59KSk7XHJcblxyXG4vLyBDb21wb25lbnRlcyBcImZpbGhvXCIgZSBkZSBcImRlc3Rpbm9cIiBwYXJhIHRlc3RhciBvIHJvdGVhbWVudG9cclxuY29uc3QgVGVzdENoaWxkQ29tcG9uZW50ID0gKCkgPT4gPGRpdj5Db21wb25lbnRlIEZpbGhvIFByb3RlZ2lkbzwvZGl2PjtcclxuY29uc3QgTG9naW5Db21wb25lbnQgPSAoKSA9PiA8ZGl2PlDDoWdpbmEgZGUgTG9naW48L2Rpdj47XHJcbmNvbnN0IFVzZXJEYXNoYm9hcmQgPSAoKSA9PiA8ZGl2PkRhc2hib2FyZCBkbyBVc3XDoXJpbzwvZGl2PjtcclxuY29uc3QgUGFydG5lckRhc2hib2FyZCA9ICgpID0+IDxkaXY+RGFzaGJvYXJkIGRvIFBhcmNlaXJvPC9kaXY+O1xyXG5cclxuLy8gLS0tIEhlbHBlciBkZSBSZW5kZXJpemHDp8OjbyAtLS1cclxuXHJcbi8qKlxyXG4gKiBSZW5kZXJpemEgb3MgY29tcG9uZW50ZXMgZGUgcm90YSBkZW50cm8gZGUgdW0gTWVtb3J5Um91dGVyXHJcbiAqIHBhcmEgc2ltdWxhciBhIG5hdmVnYcOnw6NvLlxyXG4gKiBAcGFyYW0gYXV0aFN0YXRlIC0gTyBlc3RhZG8gbW9ja2FkbyBwYXJhIG8gdXNlQXV0aFxyXG4gKiBAcGFyYW0gaW5pdGlhbEVudHJ5IC0gQSByb3RhIGluaWNpYWwgcXVlIG8gdXN1w6FyaW8gZXN0w6EgdGVudGFuZG8gYWNlc3NhclxyXG4gKi9cclxuY29uc3QgcmVuZGVyUm91dGVzID0gKGF1dGhTdGF0ZSwgaW5pdGlhbEVudHJ5ID0gJy9wcm90ZWN0ZWQnKSA9PiB7XHJcbiAgLy8gRGVmaW5lIG8gdmFsb3IgZGUgcmV0b3JubyBkbyBtb2NrIGRvIHVzZUF1dGhcclxuICB1c2VBdXRoLm1vY2tSZXR1cm5WYWx1ZShhdXRoU3RhdGUpO1xyXG5cclxuICByZXR1cm4gcmVuZGVyKFxyXG4gICAgPE1lbW9yeVJvdXRlciBpbml0aWFsRW50cmllcz17W2luaXRpYWxFbnRyeV19PlxyXG4gICAgICA8Um91dGVzPlxyXG4gICAgICAgIHsvKiBSb3RhIHDDumJsaWNhICovfVxyXG4gICAgICAgIDxSb3V0ZSBwYXRoPVwiL2xvZ2luXCIgZWxlbWVudD17PExvZ2luQ29tcG9uZW50IC8+fSAvPlxyXG5cclxuICAgICAgICB7LyogUm90YSBwYXJhIERhc2hib2FyZCBkZSBVc3XDoXJpbyAqL31cclxuICAgICAgICA8Um91dGUgcGF0aD1cIi9kYXNoYm9hcmRcIiBlbGVtZW50PXs8VXNlckRhc2hib2FyZCAvPn0gLz5cclxuXHJcbiAgICAgICAgey8qIFJvdGEgcGFyYSBEYXNoYm9hcmQgZGUgUGFyY2Vpcm8gKi99XHJcbiAgICAgICAgPFJvdXRlIHBhdGg9XCIvcGFydG5lci9kYXNoYm9hcmRcIiBlbGVtZW50PXs8UGFydG5lckRhc2hib2FyZCAvPn0gLz5cclxuXHJcbiAgICAgICAgey8qIC0tLSBSb3RhcyBQcm90ZWdpZGFzIC0tLSAqL31cclxuXHJcbiAgICAgICAgey8qIDEuIFRlc3RlIGRvIDxQcm90ZWN0ZWRSb3V0ZT4gY29tIDxPdXRsZXQgLz4gKi99XHJcbiAgICAgICAgPFJvdXRlIGVsZW1lbnQ9ezxQcm90ZWN0ZWRSb3V0ZSAvPn0+XHJcbiAgICAgICAgICA8Um91dGVcclxuICAgICAgICAgICAgcGF0aD1cIi9wcm90ZWN0ZWQtb3V0bGV0XCJcclxuICAgICAgICAgICAgZWxlbWVudD17PFRlc3RDaGlsZENvbXBvbmVudCAvPn1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9Sb3V0ZT5cclxuXHJcbiAgICAgICAgey8qIDIuIFRlc3RlIGRvIDxQcm90ZWN0ZWRVc2VyUm91dGU+ICovfVxyXG4gICAgICAgIDxSb3V0ZVxyXG4gICAgICAgICAgcGF0aD1cIi9wcm90ZWN0ZWQtdXNlclwiXHJcbiAgICAgICAgICBlbGVtZW50PXtcclxuICAgICAgICAgICAgPFByb3RlY3RlZFVzZXJSb3V0ZT5cclxuICAgICAgICAgICAgICA8VGVzdENoaWxkQ29tcG9uZW50IC8+XHJcbiAgICAgICAgICAgIDwvUHJvdGVjdGVkVXNlclJvdXRlPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIC8+XHJcblxyXG4gICAgICAgIHsvKiAzLiBUZXN0ZSBkbyA8UHJvdGVjdGVkUGFydG5lclJvdXRlPiAqL31cclxuICAgICAgICA8Um91dGVcclxuICAgICAgICAgIHBhdGg9XCIvcHJvdGVjdGVkLXBhcnRuZXJcIlxyXG4gICAgICAgICAgZWxlbWVudD17XHJcbiAgICAgICAgICAgIDxQcm90ZWN0ZWRQYXJ0bmVyUm91dGU+XHJcbiAgICAgICAgICAgICAgPFRlc3RDaGlsZENvbXBvbmVudCAvPlxyXG4gICAgICAgICAgICA8L1Byb3RlY3RlZFBhcnRuZXJSb3V0ZT5cclxuICAgICAgICAgIH1cclxuICAgICAgICAvPlxyXG4gICAgICA8L1JvdXRlcz5cclxuICAgIDwvTWVtb3J5Um91dGVyPixcclxuICApO1xyXG59O1xyXG5cclxuLy8gLS0tIFRlc3QgU3VpdGVzIC0tLVxyXG5cclxuZGVzY3JpYmUoJ1Byb3RlY3RlZFJvdXRlcycsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIC8vIExpbXBhIG8gbW9jayBhbnRlcyBkZSBjYWRhIHRlc3RlXHJcbiAgICB1c2VBdXRoLm1vY2tDbGVhcigpO1xyXG4gIH0pO1xyXG5cclxuICAvLyAtLS0gVGVzdGVzIHBhcmEgPFByb3RlY3RlZFJvdXRlPiAtLS1cclxuICBkZXNjcmliZSgnUHJvdGVjdGVkUm91dGUnLCAoKSA9PiB7XHJcbiAgICBpdCgnZGV2ZSByZW5kZXJpemFyIG8gbG9hZGluZyBzcGlubmVyIGVucXVhbnRvIFwibG9hZGluZ1wiIMOpIHRydWUnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGF1dGhTdGF0ZSA9IHsgdXNlcjogbnVsbCwgbG9hZGluZzogdHJ1ZSwgcHJvZmlsZTogbnVsbCB9O1xyXG4gICAgICByZW5kZXJSb3V0ZXMoYXV0aFN0YXRlLCAnL3Byb3RlY3RlZC1vdXRsZXQnKTtcclxuXHJcbiAgICAgIC8vIFZlcmlmaWNhIHNlIG8gc3Bpbm5lciAoY29tIHJvbGUgJ3Byb2dyZXNzYmFyJykgZXN0w6Egdmlzw612ZWxcclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ3Byb2dyZXNzYmFyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICAgIC8vIFZlcmlmaWNhIHNlIG8gY29tcG9uZW50ZSBmaWxobyBOw4NPIGVzdMOhIHZpc8OtdmVsXHJcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0NvbXBvbmVudGUgRmlsaG8gUHJvdGVnaWRvJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RldmUgcmVuZGVyaXphciBvIGxvYWRpbmcgc3Bpbm5lciBlbnF1YW50byBcInByb2ZpbGVcIiBuw6NvIGVzdMOhIGNhcnJlZ2FkbyAobWVzbW8gY29tIHVzZXIpJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBhdXRoU3RhdGUgPSB7IHVzZXI6IHsgaWQ6ICcxMjMnIH0sIGxvYWRpbmc6IGZhbHNlLCBwcm9maWxlOiBudWxsIH07XHJcbiAgICAgIHJlbmRlclJvdXRlcyhhdXRoU3RhdGUsICcvcHJvdGVjdGVkLW91dGxldCcpO1xyXG5cclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ3Byb2dyZXNzYmFyJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGV2ZSByZWRpcmVjaW9uYXIgcGFyYSAvbG9naW4gc2UgbsOjbyBob3V2ZXIgdXN1w6FyaW8gZSBuw6NvIGVzdGl2ZXIgY2FycmVnYW5kbycsICgpID0+IHtcclxuICAgICAgY29uc3QgYXV0aFN0YXRlID0geyB1c2VyOiBudWxsLCBsb2FkaW5nOiBmYWxzZSwgcHJvZmlsZTogbnVsbCB9O1xyXG4gICAgICByZW5kZXJSb3V0ZXMoYXV0aFN0YXRlLCAnL3Byb3RlY3RlZC1vdXRsZXQnKTtcclxuXHJcbiAgICAgIC8vIFZlcmlmaWNhIHNlIGZvaSByZWRpcmVjaW9uYWRvIHBhcmEgYSBww6FnaW5hIGRlIGxvZ2luXHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQw6FnaW5hIGRlIExvZ2luJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICAgIC8vIFZlcmlmaWNhIHNlIG8gY29tcG9uZW50ZSBmaWxobyBOw4NPIGVzdMOhIHZpc8OtdmVsXHJcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ0NvbXBvbmVudGUgRmlsaG8gUHJvdGVnaWRvJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RldmUgcmVuZGVyaXphciBvIGNvbXBvbmVudGUgZmlsaG8gKHZpYSBPdXRsZXQpIHNlIG8gdXN1w6FyaW8gZXN0aXZlciBhdXRlbnRpY2FkbycsICgpID0+IHtcclxuICAgICAgY29uc3QgYXV0aFN0YXRlID0geyB1c2VyOiB7IGlkOiAnMTIzJyB9LCBsb2FkaW5nOiBmYWxzZSwgcHJvZmlsZTogeyBpZDogJ3AxMjMnIH0gfTtcclxuICAgICAgcmVuZGVyUm91dGVzKGF1dGhTdGF0ZSwgJy9wcm90ZWN0ZWQtb3V0bGV0Jyk7XHJcblxyXG4gICAgICAvLyBWZXJpZmljYSBzZSBvIGNvbXBvbmVudGUgZmlsaG8gZXN0w6Egdmlzw612ZWxcclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0NvbXBvbmVudGUgRmlsaG8gUHJvdGVnaWRvJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICAgIC8vIFZlcmlmaWNhIHNlIGEgcMOhZ2luYSBkZSBsb2dpbiBOw4NPIGVzdMOhIHZpc8OtdmVsXHJcbiAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1DDoWdpbmEgZGUgTG9naW4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gLS0tIFRlc3RlcyBwYXJhIDxQcm90ZWN0ZWRVc2VyUm91dGU+IC0tLVxyXG4gIGRlc2NyaWJlKCdQcm90ZWN0ZWRVc2VyUm91dGUnLCAoKSA9PiB7XHJcbiAgICBpdCgnZGV2ZSByZW5kZXJpemFyIG8gZmlsaG8gc2UgbyB1c3XDoXJpbyBmb3IgY29tdW0gKG7Do28tcGFyY2Vpcm8pJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBhdXRoU3RhdGUgPSB7XHJcbiAgICAgICAgdXNlcjogeyBpZDogJzEyMycgfSxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBwcm9maWxlOiB7IGlkOiAncDEyMycsIHByb2ZpbGVfdHlwZTogJ3VzZXInLCBwYXJ0bmVyX2lkOiBudWxsIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJlbmRlclJvdXRlcyhhdXRoU3RhdGUsICcvcHJvdGVjdGVkLXVzZXInKTtcclxuXHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb21wb25lbnRlIEZpbGhvIFByb3RlZ2lkbycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RldmUgcmVkaXJlY2lvbmFyIHBhcmEgL3BhcnRuZXIvZGFzaGJvYXJkIHNlIG8gdXN1w6FyaW8gZm9yIHBhcmNlaXJvJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBhdXRoU3RhdGUgPSB7XHJcbiAgICAgICAgdXNlcjogeyBpZDogJzEyMycgfSxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBwcm9maWxlOiB7IGlkOiAncDEyMycsIHByb2ZpbGVfdHlwZTogJ3BhcnRuZXInIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJlbmRlclJvdXRlcyhhdXRoU3RhdGUsICcvcHJvdGVjdGVkLXVzZXInKTtcclxuXHJcbiAgICAgIC8vIFZlcmlmaWNhIHNlIGZvaSByZWRpcmVjaW9uYWRvIHBhcmEgbyBkYXNoYm9hcmQgZGUgcGFyY2Vpcm9cclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0Rhc2hib2FyZCBkbyBQYXJjZWlybycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgICAvLyBWZXJpZmljYSBzZSBvIGNvbXBvbmVudGUgZmlsaG8gTsODTyBlc3TDoSB2aXPDrXZlbFxyXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdDb21wb25lbnRlIEZpbGhvIFByb3RlZ2lkbycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZXZlIHJlZGlyZWNpb25hciBwYXJhIC9sb2dpbiBzZSBvIHVzdcOhcmlvIG7Do28gZXN0aXZlciBsb2dhZG8nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGF1dGhTdGF0ZSA9IHsgdXNlcjogbnVsbCwgbG9hZGluZzogZmFsc2UsIHByb2ZpbGU6IG51bGwgfTtcclxuICAgICAgcmVuZGVyUm91dGVzKGF1dGhTdGF0ZSwgJy9wcm90ZWN0ZWQtdXNlcicpO1xyXG5cclxuICAgICAgLy8gTyA8UHJvdGVjdGVkUm91dGU+IGludGVybm8gZGV2ZSByZWRpcmVjaW9uYXIgcGFyYSAvbG9naW5cclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1DDoWdpbmEgZGUgTG9naW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyAtLS0gVGVzdGVzIHBhcmEgPFByb3RlY3RlZFBhcnRuZXJSb3V0ZT4gLS0tXHJcbiAgZGVzY3JpYmUoJ1Byb3RlY3RlZFBhcnRuZXJSb3V0ZScsICgpID0+IHtcclxuICAgIGl0KCdkZXZlIHJlbmRlcml6YXIgbyBmaWxobyBzZSBvIHVzdcOhcmlvIGZvciBwYXJjZWlybycsICgpID0+IHtcclxuICAgICAgY29uc3QgYXV0aFN0YXRlID0ge1xyXG4gICAgICAgIHVzZXI6IHsgaWQ6ICcxMjMnIH0sXHJcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgcHJvZmlsZTogeyBpZDogJ3AxMjMnLCBwcm9maWxlX3R5cGU6ICdwYXJ0bmVyJyB9LFxyXG4gICAgICB9O1xyXG4gICAgICByZW5kZXJSb3V0ZXMoYXV0aFN0YXRlLCAnL3Byb3RlY3RlZC1wYXJ0bmVyJyk7XHJcblxyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ29tcG9uZW50ZSBGaWxobyBQcm90ZWdpZG8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkZXZlIHJlZGlyZWNpb25hciBwYXJhIC9kYXNoYm9hcmQgc2UgbyB1c3XDoXJpbyBOw4NPIGZvciBwYXJjZWlybycsICgpID0+IHtcclxuICAgICAgY29uc3QgYXV0aFN0YXRlID0ge1xyXG4gICAgICAgIHVzZXI6IHsgaWQ6ICcxMjMnIH0sXHJcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgcHJvZmlsZTogeyBpZDogJ3AxMjMnLCBwcm9maWxlX3R5cGU6ICd1c2VyJywgcGFydG5lcl9pZDogbnVsbCB9LFxyXG4gICAgICB9O1xyXG4gICAgICByZW5kZXJSb3V0ZXMoYXV0aFN0YXRlLCAnL3Byb3RlY3RlZC1wYXJ0bmVyJyk7XHJcblxyXG4gICAgICAvLyBWZXJpZmljYSBzZSBmb2kgcmVkaXJlY2lvbmFkbyBwYXJhIG8gZGFzaGJvYXJkIGRlIHVzdcOhcmlvXHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdEYXNoYm9hcmQgZG8gVXN1w6FyaW8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgICAgLy8gVmVyaWZpY2Egc2UgbyBjb21wb25lbnRlIGZpbGhvIE7Dg08gZXN0w6Egdmlzw612ZWxcclxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnQ29tcG9uZW50ZSBGaWxobyBQcm90ZWdpZG8nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGV2ZSByZWRpcmVjaW9uYXIgcGFyYSAvbG9naW4gc2UgbyB1c3XDoXJpbyBuw6NvIGVzdGl2ZXIgbG9nYWRvJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBhdXRoU3RhdGUgPSB7IHVzZXI6IG51bGwsIGxvYWRpbmc6IGZhbHNlLCBwcm9maWxlOiBudWxsIH07XHJcbiAgICAgIHJlbmRlclJvdXRlcyhhdXRoU3RhdGUsICcvcHJvdGVjdGVkLXBhcnRuZXInKTtcclxuXHJcbiAgICAgIC8vIE8gPFByb3RlY3RlZFJvdXRlPiBpbnRlcm5vIGRldmUgcmVkaXJlY2lvbmFyIHBhcmEgL2xvZ2luXHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQw6FnaW5hIGRlIExvZ2luJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG4iXSwidmVyc2lvbiI6M30=