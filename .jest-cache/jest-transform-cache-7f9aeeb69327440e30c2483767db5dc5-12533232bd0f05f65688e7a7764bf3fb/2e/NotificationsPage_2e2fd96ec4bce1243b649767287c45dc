54e34d13d112c7f8059a62e3a0a07bfd
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
// src/features/shared/pages/NotificationsPage.jsx (Corrigido)
const react_1 = tslib_1.__importStar(require("react"));
const react_helmet_async_1 = require("react-helmet-async");
const framer_motion_1 = require("framer-motion");
const lucide_react_1 = require("lucide-react"); // 1. Adicionado 'Hand'
const react_router_dom_1 = require("react-router-dom");
const AuthContext_1 = require("@/contexts/AuthContext");
const button_1 = require("@/features/shared/components/ui/button");
const supabaseClient_1 = require("@/lib/supabaseClient");
const NotificationService_1 = tslib_1.__importDefault(require("@/services/NotificationService"));
const date_fns_1 = require("date-fns");
const locale_1 = require("date-fns/locale");
const NotificationsPage = () => {
    const { user } = (0, AuthContext_1.useAuth)();
    const [notifications, setNotifications] = (0, react_1.useState)([]);
    const [pokes, setPokes] = (0, react_1.useState)([]); // 2. Adicionado estado para 'pokes'
    const [loading, setLoading] = (0, react_1.useState)(true);
    const [filter, setFilter] = (0, react_1.useState)('todas'); // todas, nÃ£o_lidas
    const navigate = (0, react_router_dom_1.useNavigate)();
    // ... (loadNotifications continua igual)
    const loadNotifications = (0, react_1.useCallback)(async () => {
        if (!user)
            return;
        try {
            const { data: notificationsData, error: notifError } = await supabaseClient_1.supabase
                .from('notifications')
                .select('*')
                .eq('user_id', user.id)
                .order('created_at', { ascending: false });
            if (notifError)
                throw notifError;
            const notificationsWithUsers = await Promise.all((notificationsData || []).map(async (notif) => {
                if (notif.participation_id) {
                    const { data: participationData } = await supabaseClient_1.supabase
                        .from('event_participants')
                        .select(`
                id,
                user_id,
                profiles!event_participants_user_id_fkey(
                  id,
                  username,
                  avatar_url
                )
              `)
                        .eq('id', notif.participation_id)
                        .single();
                    return {
                        ...notif,
                        participation: participationData ? {
                            id: participationData.id,
                            user: participationData.profiles
                        } : null
                    };
                }
                return notif;
            }));
            setNotifications(notificationsWithUsers);
        }
        catch (error) {
            console.error('âŒ Erro ao carregar notificaÃ§Ãµes:', error);
            setNotifications([]);
        }
    }, [user]);
    // ... (loadPokes continua igual, copiado do dropdown)
    const loadPokes = (0, react_1.useCallback)(async () => {
        if (!user)
            return;
        try {
            const { data: pokesData, error: pokesError } = await supabaseClient_1.supabase
                .from('pokes')
                .select(`
          id,
          from_user_id,
          created_at,
          read,
          profiles!pokes_from_user_id_fkey(
            id,
            username,
            full_name,
            avatar_url
          )
        `)
                .eq('to_user_id', user.id)
                .order('created_at', { ascending: false });
            if (pokesError)
                throw pokesError;
            setPokes(pokesData || []);
        }
        catch (error) {
            console.error('âŒ Erro ao carregar toks:', error); // MUDANÃ‡A
            setPokes([]);
        }
    }, [user]);
    // ... (useEffect continua igual)
    (0, react_1.useEffect)(() => {
        if (user) {
            setLoading(true);
            Promise.all([
                loadNotifications(),
                loadPokes()
            ]).finally(() => setLoading(false));
            // SubscriÃ§Ã£o para NotificaÃ§Ãµes
            const notifChannel = supabaseClient_1.supabase
                .channel('notifications-page')
                .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'notifications', filter: `user_id=eq.${user.id}` }, () => loadNotifications())
                .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'notifications', filter: `user_id=eq.${user.id}` }, () => loadNotifications())
                .subscribe();
            // SubscriÃ§Ã£o para Pokes
            const pokesChannel = supabaseClient_1.supabase
                .channel('pokes-page')
                .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'pokes', filter: `to_user_id=eq.${user.id}` }, () => loadPokes())
                .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'pokes', filter: `to_user_id=eq.${user.id}` }, () => loadPokes())
                .subscribe();
            return () => {
                supabaseClient_1.supabase.removeChannel(notifChannel);
                supabaseClient_1.supabase.removeChannel(pokesChannel);
            };
        }
    }, [user, loadNotifications, loadPokes]);
    const handleMarkAsRead = async (item) => {
        if (item.type === 'poke') {
            await supabaseClient_1.supabase.from('pokes').update({ read: true }).eq('id', item.id);
            loadPokes();
        }
        else {
            await NotificationService_1.default.markAsRead(item.id);
            loadNotifications();
        }
    };
    const handleMarkAllAsRead = async () => {
        await NotificationService_1.default.markAllAsRead(user.id);
        await supabaseClient_1.supabase.from('pokes').update({ read: true }).eq('to_user_id', user.id).eq('read', false);
        loadNotifications();
        loadPokes();
    };
    const handleDelete = async (item) => {
        if (!confirm('Deseja realmente excluir esta notificaÃ§Ã£o?'))
            return;
        if (item.type === 'poke') {
            await supabaseClient_1.supabase.from('pokes').delete().eq('id', item.id);
            loadPokes();
        }
        else {
            await NotificationService_1.default.delete(item.id);
            loadNotifications();
        }
    };
    const handlePokeClick = async (poke) => {
        await supabaseClient_1.supabase.from('pokes').update({ read: true }).eq('id', poke.id);
        loadPokes();
        navigate(`/profile/${poke.from_user_id}`);
    };
    const handleNotificationClick = async (notification) => {
        await NotificationService_1.default.markAsRead(notification.id);
        loadNotifications();
        if (notification.event_id) {
            navigate(`/meus-eventos`);
        }
    };
    const getNotificationIcon = (type) => {
        const icons = {
            // 3. MUDANÃ‡A: Chaves atualizadas para PortuguÃªs
            'Candidatura Recebida': lucide_react_1.UserPlus, // Antes: participation_request
            'Candidatura Aprovada': lucide_react_1.Check, // Antes: participation_approved
            'Candidatura Rejeitada': lucide_react_1.X, // Antes: participation_rejected
            'Novo Evento': lucide_react_1.Bell, // (Adicionado)
            event_cancelled: lucide_react_1.AlertCircle,
            event_confirmed: lucide_react_1.Calendar,
            event_reminder: lucide_react_1.Bell,
            poke: lucide_react_1.Hand, // Adicionado
        };
        return icons[type] || lucide_react_1.Bell;
    };
    const getNotificationColor = (type) => {
        const colors = {
            // 4. MUDANÃ‡A: Chaves atualizadas para PortuguÃªs
            'Candidatura Recebida': 'text-purple-400 bg-purple-500/20 border-purple-500/30', //
            'Candidatura Aprovada': 'text-green-400 bg-green-500/20 border-green-500/30', //
            'Candidatura Rejeitada': 'text-red-400 bg-red-500/20 border-red-500/30', //
            'Novo Evento': 'text-blue-400 bg-blue-500/20 border-blue-500/30', // (Adicionado)
            event_cancelled: 'text-yellow-400 bg-yellow-500/20 border-yellow-500/30',
            event_confirmed: 'text-blue-400 bg-blue-500/20 border-blue-500/30',
            event_reminder: 'text-orange-400 bg-orange-500/20 border-orange-500/30',
            poke: 'text-pink-400 bg-pink-500/20 border-pink-500/30', // Adicionado
        };
        return colors[type] || 'text-white bg-white/10 border-white/10';
    };
    const getUserAvatar = (notification) => {
        if (notification.participation?.user?.avatar_url) {
            return notification.participation.user.avatar_url;
        }
        const username = notification.participation?.user?.username || 'UsuÃ¡rio';
        return `https://ui-avatars.com/api/?name=${encodeURIComponent(username)}&background=8b5cf6&color=fff&size=64`;
    };
    // 5. LÃ³gica de mesclagem e contagem
    const allItems = [
        ...notifications.map((n) => ({ ...n, type: 'notification' })),
        ...pokes.map((p) => ({
            ...p,
            type: 'poke',
            notification_type: 'poke',
            // 6. MUDANÃ‡A: "Cutucada" -> "Tok"
            title: 'Novo Tok!',
            message: `${p.profiles?.full_name || p.profiles?.username || 'AlguÃ©m'} te enviou um Tok ðŸ‘‹`,
            sent: p.read, // Alinha 'read' com 'sent'
        })),
    ].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
    const unreadCount = allItems.filter(n => !n.sent).length;
    const totalCount = allItems.length;
    const filteredItems = filter === 'todas'
        ? allItems
        : allItems.filter(n => !n.sent);
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center min-h-screen", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Bell, { className: "w-16 h-16 text-white/40 animate-spin" }) }));
    }
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(react_helmet_async_1.Helmet, { children: (0, jsx_runtime_1.jsx)("title", { children: "Notifica\u00E7\u00F5es | Mesapra2" }) }), (0, jsx_runtime_1.jsx)("div", { className: "py-6 px-4 sm:px-6 lg:px-8", children: (0, jsx_runtime_1.jsxs)(framer_motion_1.motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col md:flex-row md:items-center md:justify-between gap-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-3xl font-bold text-white mb-2", children: "Notifica\u00E7\u00F5es" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60", children: unreadCount > 0
                                                ? `VocÃª tem ${unreadCount} ${unreadCount === 1 ? 'item nÃ£o lido' : 'itens nÃ£o lidos'}`
                                                : 'Todas as notificaÃ§Ãµes foram lidas' })] }), unreadCount > 0 && ((0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: handleMarkAllAsRead, className: "bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: "w-5 h-5 mr-2" }), "Marcar Todas como Lidas"] }))] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: filter === 'todas' ? 'default' : 'outline', onClick: () => setFilter('todas'), className: filter === 'todas'
                                        ? 'bg-gradient-to-r from-purple-500 to-pink-500'
                                        : 'glass-effect border-white/10', children: ["Todas (", totalCount, ")"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: filter === 'nÃ£o_lidas' ? 'default' : 'outline', onClick: () => setFilter('nÃ£o_lidas'), className: filter === 'nÃ£o_lidas'
                                        ? 'bg-gradient-to-r from-purple-500 to-pink-500'
                                        : 'glass-effect border-white/10', children: ["N\u00E3o Lidas (", unreadCount, ")"] })] }), filteredItems.length === 0 ? ((0, jsx_runtime_1.jsxs)("div", { className: "glass-effect rounded-2xl p-12 border border-white/10 text-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Bell, { className: "w-16 h-16 text-white/20 mx-auto mb-4" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60 text-lg", children: filter === 'todas'
                                        ? 'Nenhuma notificaÃ§Ã£o ainda'
                                        : 'Nenhuma notificaÃ§Ã£o nÃ£o lida' })] })) : ((0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: filteredItems.map((item) => {
                                const Icon = getNotificationIcon(item.notification_type);
                                const colorClasses = getNotificationColor(item.notification_type);
                                const isUnread = !item.sent;
                                return ((0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, className: `glass-effect rounded-xl p-6 border transition-all ${isUnread ? 'border-purple-500/50 bg-purple-500/5' : 'border-white/10'}`, children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-start gap-4", children: [item.type === 'poke' && item.profiles ? ((0, jsx_runtime_1.jsxs)("div", { className: "relative flex-shrink-0", children: [(0, jsx_runtime_1.jsx)("img", { src: item.profiles.avatar_url ||
                                                            `https://ui-avatars.com/api/?name=${encodeURIComponent(item.profiles.username || 'User')}&background=8b5cf6&color=fff&size=64`, alt: item.profiles.username, className: "w-16 h-16 rounded-full border-2 border-pink-500/50 object-cover", onError: (e) => {
                                                            e.target.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(item.profiles?.username || 'User')}&background=8b5cf6&color=fff&size=64`;
                                                        } }), (0, jsx_runtime_1.jsx)("div", { className: `absolute -bottom-1 -right-1 w-7 h-7 rounded-full border-2 border-background flex items-center justify-center ${colorClasses}`, children: (0, jsx_runtime_1.jsx)(Icon, { className: "w-4 h-4" }) })] })) : item.notification_type === 'Candidatura Recebida' && item.participation?.user ? ((0, jsx_runtime_1.jsxs)("div", { className: "relative flex-shrink-0", children: [(0, jsx_runtime_1.jsx)("img", { src: getUserAvatar(item), alt: item.participation.user.username, className: "w-16 h-16 rounded-full border-2 border-purple-500/50 object-cover", onError: (e) => {
                                                            e.target.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(item.participation?.user?.username || 'User')}&background=8b5cf6&color=fff&size=64`;
                                                        } }), (0, jsx_runtime_1.jsx)("div", { className: `absolute -bottom-1 -right-1 w-7 h-7 rounded-full border-2 border-background flex items-center justify-center ${colorClasses}`, children: (0, jsx_runtime_1.jsx)(Icon, { className: "w-4 h-4" }) })] })) : ((0, jsx_runtime_1.jsx)("div", { className: `w-16 h-16 rounded-full flex items-center justify-center flex-shrink-0 border ${colorClasses}`, children: (0, jsx_runtime_1.jsx)(Icon, { className: "w-8 h-8" }) })), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1 min-w-0", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-start justify-between gap-4 mb-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2 mb-1", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-white font-semibold text-lg", children: item.title }), isUnread && ((0, jsx_runtime_1.jsx)("span", { className: "px-2 py-0.5 rounded-full bg-purple-500 text-white text-xs font-medium", children: "Nova" }))] }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/80 mb-3", children: item.message }), (0, jsx_runtime_1.jsxs)("p", { className: "text-white/40 text-sm flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: "w-4 h-4" }), (0, date_fns_1.format)(new Date(item.created_at), "dd 'de' MMMM 'de' yyyy 'Ã s' HH:mm", { locale: locale_1.ptBR })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [isUnread && ((0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => handleMarkAsRead(item), variant: "outline", size: "sm", className: "glass-effect border-green-500/30 text-green-300 hover:bg-green-500/20", title: "Marcar como lida", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: "w-4 h-4" }) })), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => handleDelete(item), variant: "outline", size: "sm", className: "glass-effect border-red-500/30 text-red-300 hover:bg-red-500/20", title: "Excluir", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Trash2, { className: "w-4 h-4" }) })] })] }), item.type === 'poke' && ((0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => handlePokeClick(item), variant: "outline", size: "sm", className: "glass-effect border-pink-500/30 text-pink-300 hover:bg-pink-500/20", children: "Ver Perfil" })), item.type === 'notification' && item.event_id && ((0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => handleNotificationClick(item), variant: "outline", size: "sm", className: "glass-effect border-purple-500/30 text-purple-300 hover:bg-purple-500/20", children: "Ver Evento" }))] })] }) }, `${item.type}-${item.id}`));
                            }) }))] }) })] }));
};
exports.default = NotificationsPage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxmZWF0dXJlc1xcc2hhcmVkXFxwYWdlc1xcTm90aWZpY2F0aW9uc1BhZ2UuanN4IiwibWFwcGluZ3MiOiI7Ozs7QUFBQSw4REFBOEQ7QUFFOUQsdURBQWdFO0FBQ2hFLDJEQUE0QztBQUM1QyxpREFBdUM7QUFDdkMsK0NBQTZGLENBQUMsdUJBQXVCO0FBQ3JILHVEQUErQztBQUMvQyx3REFBaUQ7QUFDakQsbUVBQWdFO0FBQ2hFLHlEQUFnRDtBQUNoRCxpR0FBaUU7QUFDakUsdUNBQWtDO0FBQ2xDLDRDQUF1QztBQUV2QyxNQUFNLGlCQUFpQixHQUFHLEdBQUcsRUFBRTtJQUM3QixNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsSUFBQSxxQkFBTyxHQUFFLENBQUM7SUFDM0IsTUFBTSxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUN2RCxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLG9DQUFvQztJQUM1RSxNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxJQUFJLENBQUMsQ0FBQztJQUM3QyxNQUFNLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLG1CQUFtQjtJQUNsRSxNQUFNLFFBQVEsR0FBRyxJQUFBLDhCQUFXLEdBQUUsQ0FBQztJQUUvQix5Q0FBeUM7SUFDekMsTUFBTSxpQkFBaUIsR0FBRyxJQUFBLG1CQUFXLEVBQUMsS0FBSyxJQUFJLEVBQUU7UUFDL0MsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ2xCLElBQUksQ0FBQztZQUNILE1BQU0sRUFBRSxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxHQUFHLE1BQU0seUJB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dUJBQXVCLENBQUMsSUFBSSxDQUFDLEVBQzVDLE9BQU8sRUFBQyxTQUFTLEVBQ2pCLElBQUksRUFBQyxJQUFJLEVBQ1QsU0FBUyxFQUFDLDBFQUEwRSwyQkFHN0UsQ0FDVixJQUNHLElBQ0YsSUE3SEQsR0FBRyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0E4SG5CLENBQ2QsQ0FBQzs0QkFDSixDQUFDLENBQUMsR0FDRSxDQUNQLElBQ1UsR0FDVCxJQUNMLENBQ0osQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGtCQUFlLGlCQUFpQixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxERVZNaXhcXEFwcC5NZXNhcHJhMi5jb21cXHNyY1xcZmVhdHVyZXNcXHNoYXJlZFxccGFnZXNcXE5vdGlmaWNhdGlvbnNQYWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvZmVhdHVyZXMvc2hhcmVkL3BhZ2VzL05vdGlmaWNhdGlvbnNQYWdlLmpzeCAoQ29ycmlnaWRvKVxyXG5cclxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBIZWxtZXQgfSBmcm9tICdyZWFjdC1oZWxtZXQtYXN5bmMnO1xyXG5pbXBvcnQgeyBtb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcclxuaW1wb3J0IHsgQmVsbCwgQ2hlY2ssIFgsIFVzZXJQbHVzLCBDYWxlbmRhciwgQWxlcnRDaXJjbGUsIFRyYXNoMiwgSGFuZCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7IC8vIDEuIEFkaWNpb25hZG8gJ0hhbmQnXHJcbmltcG9ydCB7IHVzZU5hdmlnYXRlIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9mZWF0dXJlcy9zaGFyZWQvY29tcG9uZW50cy91aS9idXR0b24nO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlQ2xpZW50JztcclxuaW1wb3J0IE5vdGlmaWNhdGlvblNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9Ob3RpZmljYXRpb25TZXJ2aWNlJztcclxuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnO1xyXG5pbXBvcnQgeyBwdEJSIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlJztcclxuXHJcbmNvbnN0IE5vdGlmaWNhdGlvbnNQYWdlID0gKCkgPT4ge1xyXG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlQXV0aCgpO1xyXG4gIGNvbnN0IFtub3RpZmljYXRpb25zLCBzZXROb3RpZmljYXRpb25zXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbcG9rZXMsIHNldFBva2VzXSA9IHVzZVN0YXRlKFtdKTsgLy8gMi4gQWRpY2lvbmFkbyBlc3RhZG8gcGFyYSAncG9rZXMnXHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2ZpbHRlciwgc2V0RmlsdGVyXSA9IHVzZVN0YXRlKCd0b2RhcycpOyAvLyB0b2RhcywgbsOjb19saWRhc1xyXG4gIGNvbnN0IG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTtcclxuXHJcbiAgLy8gLi4uIChsb2FkTm90aWZpY2F0aW9ucyBjb250aW51YSBpZ3VhbClcclxuICBjb25zdCBsb2FkTm90aWZpY2F0aW9ucyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlcikgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBub3RpZmljYXRpb25zRGF0YSwgZXJyb3I6IG5vdGlmRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXIuaWQpXHJcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgICAgaWYgKG5vdGlmRXJyb3IpIHRocm93IG5vdGlmRXJyb3I7XHJcblxyXG4gICAgICBjb25zdCBub3RpZmljYXRpb25zV2l0aFVzZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgKG5vdGlmaWNhdGlvbnNEYXRhIHx8IFtdKS5tYXAoYXN5bmMgKG5vdGlmKSA9PiB7XHJcbiAgICAgICAgICBpZiAobm90aWYucGFydGljaXBhdGlvbl9pZCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnRpY2lwYXRpb25EYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAgIC5mcm9tKCdldmVudF9wYXJ0aWNpcGFudHMnKVxyXG4gICAgICAgICAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICB1c2VyX2lkLFxyXG4gICAgICAgICAgICAgICAgcHJvZmlsZXMhZXZlbnRfcGFydGljaXBhbnRzX3VzZXJfaWRfZmtleShcclxuICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICBhdmF0YXJfdXJsXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgYClcclxuICAgICAgICAgICAgICAuZXEoJ2lkJywgbm90aWYucGFydGljaXBhdGlvbl9pZClcclxuICAgICAgICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIC4uLm5vdGlmLFxyXG4gICAgICAgICAgICAgIHBhcnRpY2lwYXRpb246IHBhcnRpY2lwYXRpb25EYXRhID8ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHBhcnRpY2lwYXRpb25EYXRhLmlkLFxyXG4gICAgICAgICAgICAgICAgdXNlcjogcGFydGljaXBhdGlvbkRhdGEucHJvZmlsZXNcclxuICAgICAgICAgICAgICB9IDogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIG5vdGlmO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBzZXROb3RpZmljYXRpb25zKG5vdGlmaWNhdGlvbnNXaXRoVXNlcnMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm8gYW8gY2FycmVnYXIgbm90aWZpY2HDp8O1ZXM6JywgZXJyb3IpO1xyXG4gICAgICBzZXROb3RpZmljYXRpb25zKFtdKTtcclxuICAgIH1cclxuICB9LCBbdXNlcl0pO1xyXG5cclxuICAvLyAuLi4gKGxvYWRQb2tlcyBjb250aW51YSBpZ3VhbCwgY29waWFkbyBkbyBkcm9wZG93bilcclxuICBjb25zdCBsb2FkUG9rZXMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogcG9rZXNEYXRhLCBlcnJvcjogcG9rZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncG9rZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBmcm9tX3VzZXJfaWQsXHJcbiAgICAgICAgICBjcmVhdGVkX2F0LFxyXG4gICAgICAgICAgcmVhZCxcclxuICAgICAgICAgIHByb2ZpbGVzIXBva2VzX2Zyb21fdXNlcl9pZF9ma2V5KFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdXNlcm5hbWUsXHJcbiAgICAgICAgICAgIGZ1bGxfbmFtZSxcclxuICAgICAgICAgICAgYXZhdGFyX3VybFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIGApXHJcbiAgICAgICAgLmVxKCd0b191c2VyX2lkJywgdXNlci5pZClcclxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgICBpZiAocG9rZXNFcnJvcikgdGhyb3cgcG9rZXNFcnJvcjtcclxuICAgICAgc2V0UG9rZXMocG9rZXNEYXRhIHx8IFtdKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvIGFvIGNhcnJlZ2FyIHRva3M6JywgZXJyb3IpOyAvLyBNVURBTsOHQVxyXG4gICAgICBzZXRQb2tlcyhbXSk7XHJcbiAgICB9XHJcbiAgfSwgW3VzZXJdKTtcclxuXHJcbiAgLy8gLi4uICh1c2VFZmZlY3QgY29udGludWEgaWd1YWwpXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICh1c2VyKSB7XHJcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgICBsb2FkTm90aWZpY2F0aW9ucygpLFxyXG4gICAgICAgIGxvYWRQb2tlcygpXHJcbiAgICAgIF0pLmZpbmFsbHkoKCkgPT4gc2V0TG9hZGluZyhmYWxzZSkpO1xyXG5cclxuICAgICAgLy8gU3Vic2NyacOnw6NvIHBhcmEgTm90aWZpY2HDp8O1ZXNcclxuICAgICAgY29uc3Qgbm90aWZDaGFubmVsID0gc3VwYWJhc2VcclxuICAgICAgICAuY2hhbm5lbCgnbm90aWZpY2F0aW9ucy1wYWdlJylcclxuICAgICAgICAub24oXHJcbiAgICAgICAgICAncG9zdGdyZXNfY2hhbmdlcycsXHJcbiAgICAgICAgICB7IGV2ZW50OiAnSU5TRVJUJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICdub3RpZmljYXRpb25zJywgZmlsdGVyOiBgdXNlcl9pZD1lcS4ke3VzZXIuaWR9YCB9LFxyXG4gICAgICAgICAgKCkgPT4gbG9hZE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgIClcclxuICAgICAgICAub24oXHJcbiAgICAgICAgICAncG9zdGdyZXNfY2hhbmdlcycsXHJcbiAgICAgICAgICB7IGV2ZW50OiAnVVBEQVRFJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICdub3RpZmljYXRpb25zJywgZmlsdGVyOiBgdXNlcl9pZD1lcS4ke3VzZXIuaWR9YCB9LFxyXG4gICAgICAgICAgKCkgPT4gbG9hZE5vdGlmaWNhdGlvbnMoKVxyXG4gICAgICAgIClcclxuICAgICAgICAuc3Vic2NyaWJlKCk7XHJcblxyXG4gICAgICAvLyBTdWJzY3Jpw6fDo28gcGFyYSBQb2tlc1xyXG4gICAgICBjb25zdCBwb2tlc0NoYW5uZWwgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5jaGFubmVsKCdwb2tlcy1wYWdlJylcclxuICAgICAgICAub24oXHJcbiAgICAgICAgICAncG9zdGdyZXNfY2hhbmdlcycsXHJcbiAgICAgICAgICB7IGV2ZW50OiAnSU5TRVJUJywgc2NoZW1hOiAncHVibGljJywgdGFibGU6ICdwb2tlcycsIGZpbHRlcjogYHRvX3VzZXJfaWQ9ZXEuJHt1c2VyLmlkfWAgfSxcclxuICAgICAgICAgICgpID0+IGxvYWRQb2tlcygpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5vbihcclxuICAgICAgICAgICdwb3N0Z3Jlc19jaGFuZ2VzJyxcclxuICAgICAgICAgIHsgZXZlbnQ6ICdVUERBVEUnLCBzY2hlbWE6ICdwdWJsaWMnLCB0YWJsZTogJ3Bva2VzJywgZmlsdGVyOiBgdG9fdXNlcl9pZD1lcS4ke3VzZXIuaWR9YCB9LFxyXG4gICAgICAgICAgKCkgPT4gbG9hZFBva2VzKClcclxuICAgICAgICApXHJcbiAgICAgICAgLnN1YnNjcmliZSgpO1xyXG5cclxuICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBzdXBhYmFzZS5yZW1vdmVDaGFubmVsKG5vdGlmQ2hhbm5lbCk7XHJcbiAgICAgICAgc3VwYWJhc2UucmVtb3ZlQ2hhbm5lbChwb2tlc0NoYW5uZWwpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0sIFt1c2VyLCBsb2FkTm90aWZpY2F0aW9ucywgbG9hZFBva2VzXSk7XHJcblxyXG5cclxuICBjb25zdCBoYW5kbGVNYXJrQXNSZWFkID0gYXN5bmMgKGl0ZW0pID0+IHtcclxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdwb2tlJykge1xyXG4gICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwb2tlcycpLnVwZGF0ZSh7IHJlYWQ6IHRydWUgfSkuZXEoJ2lkJywgaXRlbS5pZCk7XHJcbiAgICAgIGxvYWRQb2tlcygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXdhaXQgTm90aWZpY2F0aW9uU2VydmljZS5tYXJrQXNSZWFkKGl0ZW0uaWQpO1xyXG4gICAgICBsb2FkTm90aWZpY2F0aW9ucygpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU1hcmtBbGxBc1JlYWQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBOb3RpZmljYXRpb25TZXJ2aWNlLm1hcmtBbGxBc1JlYWQodXNlci5pZCk7XHJcbiAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwb2tlcycpLnVwZGF0ZSh7IHJlYWQ6IHRydWUgfSkuZXEoJ3RvX3VzZXJfaWQnLCB1c2VyLmlkKS5lcSgncmVhZCcsIGZhbHNlKTtcclxuICAgIGxvYWROb3RpZmljYXRpb25zKCk7XHJcbiAgICBsb2FkUG9rZXMoKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVEZWxldGUgPSBhc3luYyAoaXRlbSkgPT4ge1xyXG4gICAgaWYgKCFjb25maXJtKCdEZXNlamEgcmVhbG1lbnRlIGV4Y2x1aXIgZXN0YSBub3RpZmljYcOnw6NvPycpKSByZXR1cm47XHJcbiAgICBcclxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdwb2tlJykge1xyXG4gICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwb2tlcycpLmRlbGV0ZSgpLmVxKCdpZCcsIGl0ZW0uaWQpO1xyXG4gICAgICBsb2FkUG9rZXMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGF3YWl0IE5vdGlmaWNhdGlvblNlcnZpY2UuZGVsZXRlKGl0ZW0uaWQpO1xyXG4gICAgICBsb2FkTm90aWZpY2F0aW9ucygpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVBva2VDbGljayA9IGFzeW5jIChwb2tlKSA9PiB7XHJcbiAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwb2tlcycpLnVwZGF0ZSh7IHJlYWQ6IHRydWUgfSkuZXEoJ2lkJywgcG9rZS5pZCk7XHJcbiAgICBsb2FkUG9rZXMoKTtcclxuICAgIG5hdmlnYXRlKGAvcHJvZmlsZS8ke3Bva2UuZnJvbV91c2VyX2lkfWApO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU5vdGlmaWNhdGlvbkNsaWNrID0gYXN5bmMgKG5vdGlmaWNhdGlvbikgPT4ge1xyXG4gICAgYXdhaXQgTm90aWZpY2F0aW9uU2VydmljZS5tYXJrQXNSZWFkKG5vdGlmaWNhdGlvbi5pZCk7XHJcbiAgICBsb2FkTm90aWZpY2F0aW9ucygpO1xyXG4gICAgXHJcbiAgICBpZiAobm90aWZpY2F0aW9uLmV2ZW50X2lkKSB7XHJcbiAgICAgIG5hdmlnYXRlKGAvbWV1cy1ldmVudG9zYCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0Tm90aWZpY2F0aW9uSWNvbiA9ICh0eXBlKSA9PiB7XHJcbiAgICBjb25zdCBpY29ucyA9IHtcclxuICAgICAgLy8gMy4gTVVEQU7Dh0E6IENoYXZlcyBhdHVhbGl6YWRhcyBwYXJhIFBvcnR1Z3XDqnNcclxuICAgICAgJ0NhbmRpZGF0dXJhIFJlY2ViaWRhJzogVXNlclBsdXMsIC8vIEFudGVzOiBwYXJ0aWNpcGF0aW9uX3JlcXVlc3RcclxuICAgICAgJ0NhbmRpZGF0dXJhIEFwcm92YWRhJzogQ2hlY2ssIC8vIEFudGVzOiBwYXJ0aWNpcGF0aW9uX2FwcHJvdmVkXHJcbiAgICAgICdDYW5kaWRhdHVyYSBSZWplaXRhZGEnOiBYLCAvLyBBbnRlczogcGFydGljaXBhdGlvbl9yZWplY3RlZFxyXG4gICAgICAnTm92byBFdmVudG8nOiBCZWxsLCAvLyAoQWRpY2lvbmFkbylcclxuICAgICAgZXZlbnRfY2FuY2VsbGVkOiBBbGVydENpcmNsZSxcclxuICAgICAgZXZlbnRfY29uZmlybWVkOiBDYWxlbmRhcixcclxuICAgICAgZXZlbnRfcmVtaW5kZXI6IEJlbGwsXHJcbiAgICAgIHBva2U6IEhhbmQsIC8vIEFkaWNpb25hZG9cclxuICAgIH07XHJcbiAgICByZXR1cm4gaWNvbnNbdHlwZV0gfHwgQmVsbDtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXROb3RpZmljYXRpb25Db2xvciA9ICh0eXBlKSA9PiB7XHJcbiAgICBjb25zdCBjb2xvcnMgPSB7XHJcbiAgICAgIC8vIDQuIE1VREFOw4dBOiBDaGF2ZXMgYXR1YWxpemFkYXMgcGFyYSBQb3J0dWd1w6pzXHJcbiAgICAgICdDYW5kaWRhdHVyYSBSZWNlYmlkYSc6ICd0ZXh0LXB1cnBsZS00MDAgYmctcHVycGxlLTUwMC8yMCBib3JkZXItcHVycGxlLTUwMC8zMCcsIC8vXHJcbiAgICAgICdDYW5kaWRhdHVyYSBBcHJvdmFkYSc6ICd0ZXh0LWdyZWVuLTQwMCBiZy1ncmVlbi01MDAvMjAgYm9yZGVyLWdyZWVuLTUwMC8zMCcsIC8vXHJcbiAgICAgICdDYW5kaWRhdHVyYSBSZWplaXRhZGEnOiAndGV4dC1yZWQtNDAwIGJnLXJlZC01MDAvMjAgYm9yZGVyLXJlZC01MDAvMzAnLCAvL1xyXG4gICAgICAnTm92byBFdmVudG8nOiAndGV4dC1ibHVlLTQwMCBiZy1ibHVlLTUwMC8yMCBib3JkZXItYmx1ZS01MDAvMzAnLCAvLyAoQWRpY2lvbmFkbylcclxuICAgICAgZXZlbnRfY2FuY2VsbGVkOiAndGV4dC15ZWxsb3ctNDAwIGJnLXllbGxvdy01MDAvMjAgYm9yZGVyLXllbGxvdy01MDAvMzAnLFxyXG4gICAgICBldmVudF9jb25maXJtZWQ6ICd0ZXh0LWJsdWUtNDAwIGJnLWJsdWUtNTAwLzIwIGJvcmRlci1ibHVlLTUwMC8zMCcsXHJcbiAgICAgIGV2ZW50X3JlbWluZGVyOiAndGV4dC1vcmFuZ2UtNDAwIGJnLW9yYW5nZS01MDAvMjAgYm9yZGVyLW9yYW5nZS01MDAvMzAnLFxyXG4gICAgICBwb2tlOiAndGV4dC1waW5rLTQwMCBiZy1waW5rLTUwMC8yMCBib3JkZXItcGluay01MDAvMzAnLCAvLyBBZGljaW9uYWRvXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNvbG9yc1t0eXBlXSB8fCAndGV4dC13aGl0ZSBiZy13aGl0ZS8xMCBib3JkZXItd2hpdGUvMTAnO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFVzZXJBdmF0YXIgPSAobm90aWZpY2F0aW9uKSA9PiB7XHJcbiAgICBpZiAobm90aWZpY2F0aW9uLnBhcnRpY2lwYXRpb24/LnVzZXI/LmF2YXRhcl91cmwpIHtcclxuICAgICAgcmV0dXJuIG5vdGlmaWNhdGlvbi5wYXJ0aWNpcGF0aW9uLnVzZXIuYXZhdGFyX3VybDtcclxuICAgIH1cclxuICAgIGNvbnN0IHVzZXJuYW1lID0gbm90aWZpY2F0aW9uLnBhcnRpY2lwYXRpb24/LnVzZXI/LnVzZXJuYW1lIHx8ICdVc3XDoXJpbyc7XHJcbiAgICByZXR1cm4gYGh0dHBzOi8vdWktYXZhdGFycy5jb20vYXBpLz9uYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVzZXJuYW1lKX0mYmFja2dyb3VuZD04YjVjZjYmY29sb3I9ZmZmJnNpemU9NjRgO1xyXG4gIH07XHJcblxyXG4gIC8vIDUuIEzDs2dpY2EgZGUgbWVzY2xhZ2VtIGUgY29udGFnZW1cclxuICBjb25zdCBhbGxJdGVtcyA9IFtcclxuICAgIC4uLm5vdGlmaWNhdGlvbnMubWFwKChuKSA9PiAoeyAuLi5uLCB0eXBlOiAnbm90aWZpY2F0aW9uJyB9KSksXHJcbiAgICAuLi5wb2tlcy5tYXAoKHApID0+ICh7XHJcbiAgICAgIC4uLnAsXHJcbiAgICAgIHR5cGU6ICdwb2tlJyxcclxuICAgICAgbm90aWZpY2F0aW9uX3R5cGU6ICdwb2tlJyxcclxuICAgICAgLy8gNi4gTVVEQU7Dh0E6IFwiQ3V0dWNhZGFcIiAtPiBcIlRva1wiXHJcbiAgICAgIHRpdGxlOiAnTm92byBUb2shJyxcclxuICAgICAgbWVzc2FnZTogYCR7cC5wcm9maWxlcz8uZnVsbF9uYW1lIHx8IHAucHJvZmlsZXM/LnVzZXJuYW1lIHx8ICdBbGd1w6ltJ30gdGUgZW52aW91IHVtIFRvayDwn5GLYCxcclxuICAgICAgc2VudDogcC5yZWFkLCAvLyBBbGluaGEgJ3JlYWQnIGNvbSAnc2VudCdcclxuICAgIH0pKSxcclxuICBdLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuY3JlYXRlZF9hdCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRfYXQpKTtcclxuXHJcbiAgY29uc3QgdW5yZWFkQ291bnQgPSBhbGxJdGVtcy5maWx0ZXIobiA9PiAhbi5zZW50KS5sZW5ndGg7XHJcbiAgY29uc3QgdG90YWxDb3VudCA9IGFsbEl0ZW1zLmxlbmd0aDtcclxuXHJcbiAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IGZpbHRlciA9PT0gJ3RvZGFzJ1xyXG4gICAgPyBhbGxJdGVtc1xyXG4gICAgOiBhbGxJdGVtcy5maWx0ZXIobiA9PiAhbi5zZW50KTtcclxuXHJcblxyXG4gIGlmIChsb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlblwiPlxyXG4gICAgICAgIDxCZWxsIGNsYXNzTmFtZT1cInctMTYgaC0xNiB0ZXh0LXdoaXRlLzQwIGFuaW1hdGUtc3BpblwiIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8PlxyXG4gICAgICA8SGVsbWV0PlxyXG4gICAgICAgIDx0aXRsZT5Ob3RpZmljYcOnw7VlcyB8IE1lc2FwcmEyPC90aXRsZT5cclxuICAgICAgPC9IZWxtZXQ+XHJcblxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInB5LTYgcHgtNCBzbTpweC02IGxnOnB4LThcIj5cclxuICAgICAgICA8bW90aW9uLmRpdlxyXG4gICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB5OiAyMCB9fVxyXG4gICAgICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzcGFjZS15LTZcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIHsvKiBIZWFkZXIgKi99XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cgbWQ6aXRlbXMtY2VudGVyIG1kOmp1c3RpZnktYmV0d2VlbiBnYXAtNFwiPlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBtYi0yXCI+Tm90aWZpY2HDp8O1ZXM8L2gxPlxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvNjBcIj5cclxuICAgICAgICAgICAgICAgIHsvKiA3LiBNVURBTsOHQTogXCJub3RpZmljYcOnw6NvXCIgLT4gXCJpdGVtXCIgKi99XHJcbiAgICAgICAgICAgICAgICB7dW5yZWFkQ291bnQgPiAwIFxyXG4gICAgICAgICAgICAgICAgICA/IGBWb2PDqiB0ZW0gJHt1bnJlYWRDb3VudH0gJHt1bnJlYWRDb3VudCA9PT0gMSA/ICdpdGVtIG7Do28gbGlkbycgOiAnaXRlbnMgbsOjbyBsaWRvcyd9YFxyXG4gICAgICAgICAgICAgICAgICA6ICdUb2RhcyBhcyBub3RpZmljYcOnw7VlcyBmb3JhbSBsaWRhcydcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAge3VucmVhZENvdW50ID4gMCAmJiAoXHJcbiAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTWFya0FsbEFzUmVhZH1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNTAwIHRvLXBpbmstNTAwIGhvdmVyOmZyb20tcHVycGxlLTYwMCBob3Zlcjp0by1waW5rLTYwMFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPENoZWNrIGNsYXNzTmFtZT1cInctNSBoLTUgbXItMlwiIC8+XHJcbiAgICAgICAgICAgICAgICBNYXJjYXIgVG9kYXMgY29tbyBMaWRhc1xyXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgey8qIEZpbHRyb3MgLSA4LiBNVURBTsOHQTogQ29udGFnZW0gYXR1YWxpemFkYSAqL31cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgdmFyaWFudD17ZmlsdGVyID09PSAndG9kYXMnID8gJ2RlZmF1bHQnIDogJ291dGxpbmUnfVxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEZpbHRlcigndG9kYXMnKX1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2ZpbHRlciA9PT0gJ3RvZGFzJyBcclxuICAgICAgICAgICAgICAgID8gJ2JnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNTAwIHRvLXBpbmstNTAwJyBcclxuICAgICAgICAgICAgICAgIDogJ2dsYXNzLWVmZmVjdCBib3JkZXItd2hpdGUvMTAnXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgVG9kYXMgKHt0b3RhbENvdW50fSlcclxuICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICB2YXJpYW50PXtmaWx0ZXIgPT09ICduw6NvX2xpZGFzJyA/ICdkZWZhdWx0JyA6ICdvdXRsaW5lJ31cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRGaWx0ZXIoJ27Do29fbGlkYXMnKX1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2ZpbHRlciA9PT0gJ27Do29fbGlkYXMnIFxyXG4gICAgICAgICAgICAgICAgPyAnYmctZ3JhZGllbnQtdG8tciBmcm9tLXB1cnBsZS01MDAgdG8tcGluay01MDAnIFxyXG4gICAgICAgICAgICAgICAgOiAnZ2xhc3MtZWZmZWN0IGJvcmRlci13aGl0ZS8xMCdcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICBOw6NvIExpZGFzICh7dW5yZWFkQ291bnR9KVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIHsvKiBMaXN0YSBkZSBOb3RpZmljYcOnw7VlcyAtIDkuIE1VREFOw4dBOiAnZmlsdGVyZWRJdGVtcycgKi99XHJcbiAgICAgICAgICB7ZmlsdGVyZWRJdGVtcy5sZW5ndGggPT09IDAgPyAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2xhc3MtZWZmZWN0IHJvdW5kZWQtMnhsIHAtMTIgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgIDxCZWxsIGNsYXNzTmFtZT1cInctMTYgaC0xNiB0ZXh0LXdoaXRlLzIwIG14LWF1dG8gbWItNFwiIC8+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MCB0ZXh0LWxnXCI+XHJcbiAgICAgICAgICAgICAgICB7ZmlsdGVyID09PSAndG9kYXMnIFxyXG4gICAgICAgICAgICAgICAgICA/ICdOZW5odW1hIG5vdGlmaWNhw6fDo28gYWluZGEnXHJcbiAgICAgICAgICAgICAgICAgIDogJ05lbmh1bWEgbm90aWZpY2HDp8OjbyBuw6NvIGxpZGEnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XHJcbiAgICAgICAgICAgICAge2ZpbHRlcmVkSXRlbXMubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBJY29uID0gZ2V0Tm90aWZpY2F0aW9uSWNvbihpdGVtLm5vdGlmaWNhdGlvbl90eXBlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yQ2xhc3NlcyA9IGdldE5vdGlmaWNhdGlvbkNvbG9yKGl0ZW0ubm90aWZpY2F0aW9uX3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNVbnJlYWQgPSAhaXRlbS5zZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2XHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtpdGVtLnR5cGV9LSR7aXRlbS5pZH1gfSAvLyAxMC4gTVVEQU7Dh0E6IENoYXZlIMO6bmljYVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeTogMTAgfX1cclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRlPXt7IG9wYWNpdHk6IDEsIHk6IDAgfX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BnbGFzcy1lZmZlY3Qgcm91bmRlZC14bCBwLTYgYm9yZGVyIHRyYW5zaXRpb24tYWxsICR7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpc1VucmVhZCA/ICdib3JkZXItcHVycGxlLTUwMC81MCBiZy1wdXJwbGUtNTAwLzUnIDogJ2JvcmRlci13aGl0ZS8xMCdcclxuICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBnYXAtNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgey8qIEF2YXRhciBvdSDDjWNvbmUgLSAxMS4gTVVEQU7Dh0E6IGzDs2dpY2EgZGUgJ2l0ZW0udHlwZScgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICB7aXRlbS50eXBlID09PSAncG9rZScgJiYgaXRlbS5wcm9maWxlcyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBmbGV4LXNocmluay0wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5wcm9maWxlcy5hdmF0YXJfdXJsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwczovL3VpLWF2YXRhcnMuY29tL2FwaS8/bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnByb2ZpbGVzLnVzZXJuYW1lIHx8ICdVc2VyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfSZiYWNrZ3JvdW5kPThiNWNmNiZjb2xvcj1mZmYmc2l6ZT02NGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17aXRlbS5wcm9maWxlcy51c2VybmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTYgaC0xNiByb3VuZGVkLWZ1bGwgYm9yZGVyLTIgYm9yZGVyLXBpbmstNTAwLzUwIG9iamVjdC1jb3ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5zcmMgPSBgaHR0cHM6Ly91aS1hdmF0YXJzLmNvbS9hcGkvP25hbWU9JHtlbmNvZGVVUklDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5wcm9maWxlcz8udXNlcm5hbWUgfHwgJ1VzZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9JmJhY2tncm91bmQ9OGI1Y2Y2JmNvbG9yPWZmZiZzaXplPTY0YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFic29sdXRlIC1ib3R0b20tMSAtcmlnaHQtMSB3LTcgaC03IHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItYmFja2dyb3VuZCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciAke2NvbG9yQ2xhc3Nlc31gfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICkgOiBpdGVtLm5vdGlmaWNhdGlvbl90eXBlID09PSAnQ2FuZGlkYXR1cmEgUmVjZWJpZGEnICYmIGl0ZW0ucGFydGljaXBhdGlvbj8udXNlciA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBmbGV4LXNocmluay0wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtnZXRVc2VyQXZhdGFyKGl0ZW0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtpdGVtLnBhcnRpY2lwYXRpb24udXNlci51c2VybmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTYgaC0xNiByb3VuZGVkLWZ1bGwgYm9yZGVyLTIgYm9yZGVyLXB1cnBsZS01MDAvNTAgb2JqZWN0LWNvdmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnNyYyA9IGBodHRwczovL3VpLWF2YXRhcnMuY29tL2FwaS8/bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnBhcnRpY2lwYXRpb24/LnVzZXI/LnVzZXJuYW1lIHx8ICdVc2VyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfSZiYWNrZ3JvdW5kPThiNWNmNiZjb2xvcj1mZmYmc2l6ZT02NGA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BhYnNvbHV0ZSAtYm90dG9tLTEgLXJpZ2h0LTEgdy03IGgtNyByb3VuZGVkLWZ1bGwgYm9yZGVyLTIgYm9yZGVyLWJhY2tncm91bmQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgJHtjb2xvckNsYXNzZXN9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHctMTYgaC0xNiByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZmxleC1zaHJpbmstMCBib3JkZXIgJHtjb2xvckNsYXNzZXN9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEljb24gY2xhc3NOYW1lPVwidy04IGgtOFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB7LyogQ29udGXDumRvICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuIGdhcC00IG1iLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgdGV4dC1sZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLnRpdGxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNVbnJlYWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBiZy1wdXJwbGUtNTAwIHRleHQtd2hpdGUgdGV4dC14cyBmb250LW1lZGl1bVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm92YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzgwIG1iLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0ubWVzc2FnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS80MCB0ZXh0LXNtIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhciBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChuZXcgRGF0ZShpdGVtLmNyZWF0ZWRfYXQpLCBcImRkICdkZScgTU1NTSAnZGUnIHl5eXkgJ8OgcycgSEg6bW1cIiwgeyBsb2NhbGU6IHB0QlIgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBBw6fDtWVzICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1VucmVhZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVNYXJrQXNSZWFkKGl0ZW0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdsYXNzLWVmZmVjdCBib3JkZXItZ3JlZW4tNTAwLzMwIHRleHQtZ3JlZW4tMzAwIGhvdmVyOmJnLWdyZWVuLTUwMC8yMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJNYXJjYXIgY29tbyBsaWRhXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVjayBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZURlbGV0ZShpdGVtKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJnbGFzcy1lZmZlY3QgYm9yZGVyLXJlZC01MDAvMzAgdGV4dC1yZWQtMzAwIGhvdmVyOmJnLXJlZC01MDAvMjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkV4Y2x1aXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIEJvdMOjbyBkZSBBw6fDo28gLSAxMi4gTVVEQU7Dh0E6IGzDs2dpY2EgZGUgJ2l0ZW0udHlwZScgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLnR5cGUgPT09ICdwb2tlJyAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlUG9rZUNsaWNrKGl0ZW0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdsYXNzLWVmZmVjdCBib3JkZXItcGluay01MDAvMzAgdGV4dC1waW5rLTMwMCBob3ZlcjpiZy1waW5rLTUwMC8yMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyIFBlcmZpbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS50eXBlID09PSAnbm90aWZpY2F0aW9uJyAmJiBpdGVtLmV2ZW50X2lkICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVOb3RpZmljYXRpb25DbGljayhpdGVtKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJnbGFzcy1lZmZlY3QgYm9yZGVyLXB1cnBsZS01MDAvMzAgdGV4dC1wdXJwbGUtMzAwIGhvdmVyOmJnLXB1cnBsZS01MDAvMjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlciBFdmVudG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9tb3Rpb24uZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOb3RpZmljYXRpb25zUGFnZTsiXSwidmVyc2lvbiI6M30=