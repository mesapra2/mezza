{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\contexts\\AuthContext.jsx","mappings":";;;;;AAAA,+BAA+B;AAC/B,iCAA6F;AAC7F,oEAAmC;AACnC,+EAAwE;AACxE,yDAAgD;AAChD,uDAA+C;AAC/C,kDAAgE;AAEhE,MAAM,WAAW,GAAG,IAAA,qBAAa,EAAC,IAAI,CAAC,CAAC;AAEjC,MAAM,OAAO,GAAG,GAAG,EAAE;IAC1B,MAAM,OAAO,GAAG,IAAA,kBAAU,EAAC,WAAW,CAAC,CAAC;IACxC,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAC;IACtE,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC;AANW,QAAA,OAAO,WAMlB;AAEF,oDAAoD;AACpD,MAAM,eAAe,GAAG,CAAC,KAAK,EAAE,EAAE;IAChC,IAAI,KAAK,CAAC,OAAO,KAAK,qBAAqB,EAAE,CAAC;QAC5C,OAAO,4FAA4F,CAAC;IACtG,CAAC;IACD,IAAI,KAAK,CAAC,OAAO,KAAK,2BAA2B,EAAE,CAAC;QAClD,OAAO,4BAA4B,CAAC;IACtC,CAAC;IACD,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,yBAAyB,CAAC,EAAE,CAAC;QACtD,OAAO,kEAAkE,CAAC;IAC5E,CAAC;IACD,OAAO,KAAK,CAAC,OAAO,CAAC;AACvB,CAAC,CAAC;AAEK,MAAM,YAAY,GAAG,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE;IAC3C,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,IAAA,gBAAQ,EAAC,IAAI,CAAC,CAAC;IACvC,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,IAAA,gBAAQ,EAAC,IAAI,CAAC,CAAC;IAC7C,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,IAAA,gBAAQ,EAAC,IAAI,CAAC,CAAC;IAC7C,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,uBAAQ,GAAE,CAAC;IAC7B,MAAM,QAAQ,GAAG,IAAA,8BAAW,GAAE,CAAC;IAE/B,8BAA8B;IAC9B,MAAM,UAAU,GAAG,IAAA,mBAAW,EAAC,KAAK,EAAE,WAAW,EAAE,EAAE;QACnD,IAAI,CAAC,WAAW;YAAE,OAAO,IAAI,CAAC;QAC9B,OAAO,CAAC,GAAG,CAAC,wCAAwC,WAAW,CAAC,EAAE,EAAE,CAAC,CAAC;QACtE,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ;iBAChD,IAAI,CAAC,UAAU,CAAC;iBAChB,MAAM,CAAC;;;;;SAKP,CAAC;iBACD,EAAE,CAAC,IAAI,EAAE,WAAW,CAAC,EAAE,CAAC;iBACxB,WAAW,EAAE,CAAC;YAEjB,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,UAAU;gBAAE,MAAM,KAAK,CAAC;YACpD,IAAI,CAAC,WAAW;gBAAE,OAAO,IAAI,CAAC;YAE9B,WAAW,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,IAAI,QAAQ,CAAC;YAClD,WAAW,CAAC,kBAAkB,GAAG,WAAW,CAAC,kBAAkB,IAAI,QAAQ,CAAC;YAC5E,WAAW,CAAC,kBAAkB,GAAG,WAAW,CAAC,kBAAkB,IAAI,EAAE,iBAAiB,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC;YAEtH,6CAA6C;YAC7C,IAAI,WAAW,CAAC,YAAY,KAAK,yBAAa,CAAC,OAAO,IAAI,WAAW,CAAC,UAAU,EAAE,CAAC;gBACjF,OAAO,CAAC,GAAG,CAAC,iCAAiC,WAAW,CAAC,UAAU,EAAE,CAAC,CAAC;gBAEvE,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,MAAM,yBAAQ;qBAC9D,IAAI,CAAC,UAAU,CAAC;qBAChB,MAAM,CAAC,6CAA6C,CAAC;qBACrD,EAAE,CAAC,IAAI,EAAE,WAAW,CAAC,UAAU,CAAC;qBAChC,MAAM,EAAE,CAAC;gBAEZ,IAAI,CAAC,YAAY,IAAI,WAAW,EAAE,CAAC;oBACjC,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,WAAW,CAAC,CAAC;oBAChD,WAAW,CAAC,YAAY,GAAG,WAAW,CAAC;oBACvC,WAAW,CAAC,gBAAgB,GAAG,WAAW,CAAC,UAAU,KAAK,IAAI,CAAC;oBAE/D,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE;wBAChC,SAAS,EAAE,WAAW,CAAC,EAAE;wBACzB,WAAW,EAAE,WAAW,CAAC,IAAI;wBAC7B,IAAI,EAAE,WAAW,CAAC,IAAI;wBACtB,SAAS,EAAE,WAAW,CAAC,UAAU;wBACjC,gBAAgB,EAAE,WAAW,CAAC,gBAAgB;qBAC/C,CAAC,CAAC;gBACL,CAAC;qBAAM,IAAI,YAAY,EAAE,CAAC;oBACxB,OAAO,CAAC,KAAK,CAAC,sCAAsC,WAAW,CAAC,UAAU,GAAG,EAAE,YAAY,CAAC,CAAC;gBAC/F,CAAC;YACH,CAAC;YAED,MAAM,eAAe,GAAG;gBACtB,GAAG,WAAW;gBACd,SAAS,EAAE,WAAW,CAAC,YAAY,KAAK,yBAAa,CAAC,OAAO,IAAI,WAAW,CAAC,UAAU,IAAI,IAAI;gBAC/F,SAAS,EAAE,WAAW,CAAC,UAAU,IAAI,KAAK;gBAC1C,QAAQ,EAAE,IAAA,uBAAW,EAAC,WAAW,CAAC;aACnC,CAAC;YAEF,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,eAAe,CAAC,QAAQ,EAAE,UAAU,EAAE,eAAe,CAAC,KAAK,IAAI,cAAc,CAAC,CAAC;YAClH,OAAO,eAAe,CAAC;QACzB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;YAC9C,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,uBAAuB,EAAE,WAAW,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAC9F,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,4CAA4C;IAC5C,MAAM,wBAAwB,GAAG,IAAA,mBAAW,EAAC,KAAK,EAAE,WAAW,EAAE,EAAE;QACjE,IAAI,CAAC,WAAW;YAAE,OAAO,IAAI,CAAC;QAC9B,OAAO,CAAC,GAAG,CAAC,mDAAmD,WAAW,CAAC,EAAE,EAAE,CAAC,CAAC;QACjF,IAAI,CAAC;YACH,IAAI,WAAW,GAAG,MAAM,UAAU,CAAC,WAAW,CAAC,CAAC;YAChD,IAAI,CAAC,WAAW,EAAE,CAAC;gBACjB,OAAO,CAAC,GAAG,CAAC,6CAA6C,WAAW,CAAC,EAAE,cAAc,CAAC,CAAC;gBACvF,MAAM,WAAW,GAAG,WAAW,CAAC,aAAa,EAAE,YAAY,IAAI,yBAAa,CAAC,IAAI,CAAC;gBAClF,MAAM,cAAc,GAAG;oBACrB,EAAE,EAAE,WAAW,CAAC,EAAE;oBAClB,QAAQ,EAAE,WAAW,CAAC,aAAa,EAAE,SAAS,IAAI,WAAW,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,WAAW,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;oBAC9H,UAAU,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;oBACpC,KAAK,EAAE,QAAQ;oBACf,kBAAkB,EAAE,QAAQ;oBAC5B,kBAAkB,EAAE,EAAE,iBAAiB,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE;oBACtE,YAAY,EAAE,WAAW;iBAC1B,CAAC;gBAEF,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;gBACtF,IAAI,WAAW;oBAAE,MAAM,WAAW,CAAC;gBACnC,OAAO,CAAC,GAAG,CAAC,wCAAwC,WAAW,CAAC,EAAE,EAAE,CAAC,CAAC;gBACtE,KAAK,CAAC,EAAE,KAAK,EAAE,gBAAgB,EAAE,WAAW,EAAE,YAAY,EAAE,CAAC,CAAC;gBAC9D,WAAW,GAAG,MAAM,UAAU,CAAC,WAAW,CAAC,CAAC;YAC9C,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,GAAG,CAAC,2CAA2C,WAAW,CAAC,EAAE,EAAE,CAAC,CAAC;YAC3E,CAAC;YACD,OAAO,WAAW,CAAC;QACrB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,qCAAqC,EAAE,KAAK,CAAC,CAAC;YAC5D,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,gCAAgC,EAAE,WAAW,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YACvG,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC;IAExB,0DAA0D;IAC1D,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,OAAO,CAAC,GAAG,CAAC,0DAA0D,CAAC,CAAC;QACxE,UAAU,CAAC,IAAI,CAAC,CAAC;QAEjB,MAAM,cAAc,GAAG,KAAK,IAAI,EAAE;YAC9B,IAAI,CAAC;gBACD,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;gBACpF,IAAI,YAAY;oBAAE,MAAM,YAAY,CAAC;gBACrC,IAAI,CAAC,OAAO;oBAAE,OAAO;gBACrB,OAAO,CAAC,GAAG,CAAC,oCAAoC,EAAE,OAAO,CAAC,CAAC,CAAC,QAAQ,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBAEnG,MAAM,WAAW,GAAG,OAAO,EAAE,IAAI,IAAI,IAAI,CAAC;gBAC1C,OAAO,CAAC,WAAW,CAAC,CAAC;gBAErB,IAAI,WAAW,EAAE,CAAC;oBACd,MAAM,cAAc,GAAG,MAAM,wBAAwB,CAAC,WAAW,CAAC,CAAC;oBACnE,IAAI,OAAO,EAAE,CAAC;wBACV,UAAU,CAAC,cAAc,CAAC,CAAC;wBAC3B,MAAM,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;wBAE7C,sFAAsF;wBACtF,IAAI,cAAc,IAAI,CAAC,GAAG,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;4BACvE,MAAM,WAAW,GAAG,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,YAAY,CAAC;4BACnF,OAAO,CAAC,GAAG,CAAC,mDAAmD,WAAW,EAAE,CAAC,CAAC;4BAC9E,QAAQ,CAAC,WAAW,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;wBAC7C,CAAC;oBACL,CAAC;gBACL,CAAC;qBAAM,IAAI,OAAO,EAAE,CAAC;oBACjB,UAAU,CAAC,IAAI,CAAC,CAAC;gBACrB,CAAC;YACL,CAAC;YAAC,OAAO,GAAG,EAAE,CAAC;gBACX,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,GAAG,CAAC,CAAC;gBACvD,IAAI,OAAO,EAAE,CAAC;oBACV,OAAO,CAAC,IAAI,CAAC,CAAC;oBACd,UAAU,CAAC,IAAI,CAAC,CAAC;gBACrB,CAAC;YACL,CAAC;oBAAS,CAAC;gBACP,IAAI,OAAO,EAAE,CAAC;oBACV,OAAO,CAAC,GAAG,CAAC,oDAAoD,CAAC,CAAC;oBAClE,UAAU,CAAC,KAAK,CAAC,CAAC;gBACtB,CAAC;YACL,CAAC;QACL,CAAC,CAAC;QAEF,cAAc,EAAE,CAAC;QAEjB,MAAM,EAAE,IAAI,EAAE,EAAE,YAAY,EAAE,EAAE,GAAG,yBAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;YACzF,IAAI,CAAC,OAAO;gBAAE,OAAO;YACrB,OAAO,CAAC,GAAG,CAAC,6BAA6B,MAAM,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC,QAAQ,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC;YAE3G,MAAM,WAAW,GAAG,OAAO,EAAE,IAAI,IAAI,IAAI,CAAC;YAE1C,OAAO,CAAC,QAAQ,CAAC,EAAE;gBACf,IAAI,QAAQ,EAAE,EAAE,KAAK,WAAW,EAAE,EAAE,EAAE,CAAC;oBACnC,IAAI,MAAM,KAAK,cAAc,EAAE,CAAC;wBAC5B,OAAO,CAAC,GAAG,CAAC,+DAA+D,CAAC,CAAC;oBACjF,CAAC;oBACD,OAAO,QAAQ,CAAC;gBACpB,CAAC;gBAED,IAAI,WAAW,EAAE,CAAC;oBACd,OAAO,CAAC,GAAG,CAAC,uEAAuE,CAAC,CAAC;oBACrF,wBAAwB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC9E,CAAC;qBAAM,CAAC;oBACJ,OAAO,CAAC,GAAG,CAAC,uDAAuD,CAAC,CAAC;oBACrE,UAAU,CAAC,IAAI,CAAC,CAAC;oBACjB,OAAO,CAAC,GAAG,CAAC,sDAAsD,CAAC,CAAC;oBACpE,QAAQ,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC1C,CAAC;gBACD,OAAO,WAAW,CAAC;YACvB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;QAEH,OAAO,GAAG,EAAE;YACR,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;YACjD,OAAO,GAAG,KAAK,CAAC;YAChB,YAAY,EAAE,WAAW,EAAE,CAAC;QAChC,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,wBAAwB,EAAE,QAAQ,CAAC,CAAC,CAAC;IAEzC,MAAM,KAAK,GAAG,IAAA,mBAAW,EAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE;QAClD,UAAU,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;YACpF,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YACvB,KAAK,CAAC,EAAE,KAAK,EAAE,8BAA8B,EAAE,WAAW,EAAE,qBAAqB,EAAE,CAAC,CAAC;YACrF,OAAO,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;YACzC,MAAM,eAAe,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;YAC/C,KAAK,CAAC;gBACJ,OAAO,EAAE,aAAa;gBACtB,KAAK,EAAE,KAAK,CAAC,OAAO,KAAK,qBAAqB,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,eAAe;gBACzF,WAAW,EAAE,eAAe;gBAC5B,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YACH,UAAU,CAAC,KAAK,CAAC,CAAC;YAClB,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,MAAM,gBAAgB,GAAG,IAAA,mBAAW,EAAC,KAAK,IAAI,EAAE;QAC9C,UAAU,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC;YACH,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;gBACpD,QAAQ,EAAE,QAAQ;gBAClB,OAAO,EAAE,EAAE,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE;aAChD,CAAC,CAAC;YACH,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;QACjD,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;YACpD,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,uBAAuB,EAAE,WAAW,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAC9F,UAAU,CAAC,KAAK,CAAC,CAAC;YAClB,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,MAAM,eAAe,GAAG,IAAA,mBAAW,EAAC,KAAK,IAAI,EAAE;QAC7C,UAAU,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC;YACH,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;gBACpD,QAAQ,EAAE,OAAO;gBACjB,OAAO,EAAE;oBACP,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;oBAClC,MAAM,EAAE,YAAY;iBACrB;aACF,CAAC,CAAC;YACH,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QAChD,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,KAAK,CAAC,CAAC;YACnD,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,sBAAsB,EAAE,WAAW,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAC7F,UAAU,CAAC,KAAK,CAAC,CAAC;YAClB,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,MAAM,kBAAkB,GAAG,IAAA,mBAAW,EAAC,KAAK,IAAI,EAAE;QAChD,UAAU,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC;YACH,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,eAAe,CAAC;gBACpD,QAAQ,EAAE,UAAU;gBACpB,OAAO,EAAE;oBACP,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM;oBAClC,MAAM,EAAE,sBAAsB;iBAC/B;aACF,CAAC,CAAC;YACH,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC,CAAC;QACnD,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC;YACtD,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,yBAAyB,EAAE,WAAW,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAChG,UAAU,CAAC,KAAK,CAAC,CAAC;YAClB,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,MAAM,QAAQ,GAAG,IAAA,mBAAW,EAAC,KAAK,EAAE,QAAQ,EAAE,EAAE;QAC9C,UAAU,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;gBACjD,KAAK,EAAE,QAAQ,CAAC,KAAK;gBACrB,QAAQ,EAAE,QAAQ,CAAC,QAAQ;gBAC3B,OAAO,EAAE;oBACP,IAAI,EAAE;wBACJ,SAAS,EAAE,QAAQ,CAAC,IAAI;wBACxB,YAAY,EAAE,QAAQ,CAAC,YAAY,IAAI,yBAAa,CAAC,IAAI;qBAC1D;oBACD,eAAe,EAAE,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,QAAQ;iBACnD;aACF,CAAC,CAAC;YAEH,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YAEvB,sCAAsC;YACtC,MAAM,sBAAsB,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;YAE1D,IAAI,sBAAsB,EAAE,CAAC;gBAC3B,KAAK,CAAC;oBACJ,KAAK,EAAE,wBAAwB;oBAC/B,WAAW,EAAE,4GAA4G;oBACzH,QAAQ,EAAE,KAAK;iBAChB,CAAC,CAAC;gBACH,UAAU,CAAC,KAAK,CAAC,CAAC;YACpB,CAAC;iBAAM,CAAC;gBACN,KAAK,CAAC;oBACJ,KAAK,EAAE,iCAAiC;oBACxC,WAAW,EAAE,iBAAiB,QAAQ,CAAC,IAAI,GAAG;iBAC/C,CAAC,CAAC;YACL,CAAC;YAED,OAAO,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,qBAAqB,EAAE,KAAK,CAAC,CAAC;YAC5C,MAAM,eAAe,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;YAC/C,KAAK,CAAC;gBACJ,OAAO,EAAE,aAAa;gBACtB,KAAK,EAAE,kBAAkB;gBACzB,WAAW,EAAE,eAAe;aAC7B,CAAC,CAAC;YACH,UAAU,CAAC,KAAK,CAAC,CAAC;YAClB,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,MAAM,MAAM,GAAG,IAAA,mBAAW,EAAC,KAAK,IAAI,EAAE;QACpC,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;QAC5C,IAAI,CAAC;YACH,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAChD,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YACvB,KAAK,CAAC,EAAE,KAAK,EAAE,mBAAmB,EAAE,WAAW,EAAE,WAAW,EAAE,CAAC,CAAC;YAChE,OAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC,CAAC;QACxD,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YAC1C,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,cAAc,EAAE,WAAW,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACvF,CAAC;IACH,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,MAAM,aAAa,GAAG,IAAA,mBAAW,EAAC,KAAK,EAAE,OAAO,EAAE,EAAE;QAClD,IAAI,CAAC,IAAI,EAAE,CAAC;YACV,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,0BAA0B,EAAE,CAAC,CAAC;YAC1F,OAAO,IAAI,CAAC;QACd,CAAC;QACD,OAAO,CAAC,GAAG,CAAC,2CAA2C,IAAI,CAAC,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;QAC5E,IAAI,CAAC;YACH,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ;iBACnC,IAAI,CAAC,UAAU,CAAC;iBAChB,MAAM,CAAC,EAAE,GAAG,OAAO,EAAE,UAAU,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC;iBAC5D,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC;iBACjB,MAAM,EAAE;iBACR,MAAM,EAAE,CAAC;YAEZ,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YAEvB,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAE,IAAI,CAAC,CAAC;YAChD,KAAK,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,EAAE,4BAA4B,EAAE,CAAC,CAAC;YAExE,MAAM,kBAAkB,GAAG;gBACzB,GAAG,OAAO;gBACV,GAAG,IAAI;gBACP,SAAS,EAAE,IAAI,CAAC,YAAY,KAAK,yBAAa,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI;gBACjF,SAAS,EAAE,IAAI,CAAC,UAAU,IAAI,KAAK;gBACnC,QAAQ,EAAE,IAAA,uBAAW,EAAC,IAAI,CAAC;gBAC3B,gBAAgB,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,KAAK,IAAI;aAC7D,CAAC;YAEF,UAAU,CAAC,kBAAkB,CAAC,CAAC;YAC/B,OAAO,CAAC,GAAG,CAAC,2CAA2C,CAAC,CAAC;YACzD,OAAO,kBAAkB,CAAC;QAC5B,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;YACpD,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,wCAAwC,EAAE,CAAC,CAAC;YACxG,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;IAE3B,MAAM,YAAY,GAAG,IAAA,mBAAW,EAAC,KAAK,EAAE,IAAI,EAAE,iBAAiB,GAAG,KAAK,EAAE,EAAE;QACzE,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YACnB,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,yCAAyC,EAAE,CAAC,CAAC;YACzG,OAAO,IAAI,CAAC;QACd,CAAC;QACD,OAAO,CAAC,GAAG,CAAC,oCAAoC,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,UAAU,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QAC3G,IAAI,CAAC;YACH,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;YAC3C,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAC7B,MAAM,QAAQ,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,IAAI,SAAS,IAAI,OAAO,EAAE,CAAC;YAEhG,MAAM,MAAM,GAAG,iBAAiB,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC;YACxD,MAAM,OAAO,GAAG;gBACd,YAAY,EAAE,MAAM;gBACpB,MAAM,EAAE,IAAI;gBACZ,WAAW,EAAE,IAAI,CAAC,IAAI,IAAI,0BAA0B;aACrD,CAAC;YAEF,OAAO,CAAC,GAAG,CAAC,wCAAwC,MAAM,eAAe,QAAQ,GAAG,CAAC,CAAC;YACtF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yBAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;YAE5F,IAAI,KAAK;gBAAE,MAAM,KAAK,CAAC;YAEvB,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YACxD,OAAO,IAAI,EAAE,IAAI,IAAI,IAAI,CAAC;QAE5B,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;YACpD,KAAK,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,gBAAgB,EAAE,WAAW,EAAE,+CAA+C,KAAK,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;YACxI,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;IAElB,MAAM,KAAK,GAAG,IAAA,eAAO,EAAC,GAAG,EAAE,CAAC,CAAC;QAC3B,IAAI;QACJ,OAAO;QACP,OAAO;QACP,KAAK;QACL,QAAQ;QACR,MAAM;QACN,gBAAgB;QAChB,eAAe;QACf,kBAAkB;QAClB,aAAa;QACb,YAAY;KACb,CAAC,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,gBAAgB,EAAE,eAAe,EAAE,kBAAkB,EAAE,aAAa,EAAE,YAAY,CAAC,CAAC,CAAC;IAE3I,OAAO,CACL,uBAAC,WAAW,CAAC,QAAQ,IAAC,KAAK,EAAE,KAAK,YAC/B,OAAO,CAAC,CAAC,CAAC,CACT,gCAAK,SAAS,EAAC,kEAAkE,YAC/E,gCAAK,SAAS,EAAC,0EAA0E,GAAO,GAC5F,CACP,CAAC,CAAC,CAAC,CACF,QAAQ,CACT,GACoB,CACxB,CAAC;AACJ,CAAC,CAAC;AAzaW,QAAA,YAAY,gBAyavB;AAEF,oBAAY,CAAC,SAAS,GAAG;IACvB,QAAQ,EAAE,oBAAS,CAAC,IAAI,CAAC,UAAU;CACpC,CAAC","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\contexts\\AuthContext.jsx"],"sourcesContent":["// src/contexts/AuthContext.jsx\r\nimport { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useToast } from '@/features/shared/components/ui/use-toast.js';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getUserType, PROFILE_TYPES } from '@/config/userTypes';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth deve ser usado dentro de um AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n// ðŸŽ¯ FunÃ§Ã£o helper para mensagens de erro amigÃ¡veis\r\nconst getErrorMessage = (error) => {\r\n  if (error.message === 'Email not confirmed') {\r\n    return 'Por favor, confirme seu email antes de fazer login. Verifique sua caixa de entrada e spam.';\r\n  }\r\n  if (error.message === 'Invalid login credentials') {\r\n    return 'Email ou senha incorretos.';\r\n  }\r\n  if (error.message.includes('User already registered')) {\r\n    return 'Este email jÃ¡ estÃ¡ cadastrado. FaÃ§a login ou recupere sua senha.';\r\n  }\r\n  return error.message;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [profile, setProfile] = useState(null);\r\n  const { toast } = useToast();\r\n  const navigate = useNavigate();\r\n\r\n  // FunÃ§Ã£o para buscar o perfil\r\n  const getProfile = useCallback(async (currentUser) => {\r\n    if (!currentUser) return null;\r\n    console.log(`ðŸ“„ [getProfile] Buscando perfil para ${currentUser.id}`);\r\n    try {\r\n      const { data: profileData, error } = await supabase\r\n        .from('profiles')\r\n        .select(`\r\n          id, username, bio, avatar_url, photos, hashtags_interesse,\r\n          is_premium, profile_type, partner_id,\r\n          theme, profile_visibility, notification_prefs,\r\n          phone, phone_verified\r\n        `)\r\n        .eq('id', currentUser.id)\r\n        .maybeSingle();\r\n\r\n      if (error && error.code !== 'PGRST116') throw error;\r\n      if (!profileData) return null;\r\n\r\n      profileData.theme = profileData.theme || 'system';\r\n      profileData.profile_visibility = profileData.profile_visibility || 'public';\r\n      profileData.notification_prefs = profileData.notification_prefs || { emailEventUpdates: true, pushNewMessages: true };\r\n\r\n      // âœ… SE FOR PARCEIRO, BUSCAR DADOS DO PARTNER\r\n      if (profileData.profile_type === PROFILE_TYPES.PARTNER && profileData.partner_id) {\r\n        console.log(`ðŸ¢ Buscando dados do partner: ${profileData.partner_id}`);\r\n        \r\n        const { data: partnerData, error: partnerError } = await supabase\r\n          .from('partners')\r\n          .select('id, name, email, plan, is_premium, capacity')\r\n          .eq('id', profileData.partner_id)\r\n          .single();\r\n        \r\n        if (!partnerError && partnerData) {\r\n          console.log('âœ… Dados do partner:', partnerData);\r\n          profileData.partner_data = partnerData;\r\n          profileData.isPremiumPartner = partnerData.is_premium === true;\r\n          \r\n          console.log('ðŸ” Status Premium:', {\r\n            partnerId: partnerData.id,\r\n            partnerName: partnerData.name,\r\n            plan: partnerData.plan,\r\n            isPremium: partnerData.is_premium,\r\n            isPremiumPartner: profileData.isPremiumPartner,\r\n          });\r\n        } else if (partnerError) {\r\n          console.error(`âŒ Erro ao buscar dados do parceiro ${profileData.partner_id}:`, partnerError);\r\n        }\r\n      }\r\n\r\n      const enrichedProfile = {\r\n        ...profileData,\r\n        isPartner: profileData.profile_type === PROFILE_TYPES.PARTNER || profileData.partner_id != null,\r\n        isPremium: profileData.is_premium || false,\r\n        userType: getUserType(profileData)\r\n      };\r\n\r\n      console.log('âœ… Perfil carregado:', enrichedProfile.username, '| Phone:', enrichedProfile.phone || 'sem telefone');\r\n      return enrichedProfile;\r\n    } catch (error) {\r\n      console.error('âŒ Erro em getProfile:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro ao buscar perfil\", description: error.message });\r\n      return null;\r\n    }\r\n  }, [toast]);\r\n\r\n  // FunÃ§Ã£o para criar o perfil se nÃ£o existir\r\n  const createProfileIfNotExists = useCallback(async (currentUser) => {\r\n    if (!currentUser) return null;\r\n    console.log(`[createProfile] Verificando/Criando perfil para ${currentUser.id}`);\r\n    try {\r\n      let profileData = await getProfile(currentUser);\r\n      if (!profileData) {\r\n        console.log(`â„¹ï¸ [createProfile] Perfil nÃ£o existe para ${currentUser.id}. Criando...`);\r\n        const profileType = currentUser.user_metadata?.profile_type || PROFILE_TYPES.USER;\r\n        const newProfileData = {\r\n          id: currentUser.id,\r\n          username: currentUser.user_metadata?.full_name || currentUser.email?.split('@')[0] || `user_${currentUser.id.substring(0, 5)}`,\r\n          updated_at: new Date().toISOString(),\r\n          theme: 'system',\r\n          profile_visibility: 'public',\r\n          notification_prefs: { emailEventUpdates: true, pushNewMessages: true },\r\n          profile_type: profileType,\r\n        };\r\n\r\n        const { error: insertError } = await supabase.from('profiles').insert(newProfileData);\r\n        if (insertError) throw insertError;\r\n        console.log(`âœ… [createProfile] Perfil criado para ${currentUser.id}`);\r\n        toast({ title: \"Perfil criado!\", description: \"Bem-vindo!\" });\r\n        profileData = await getProfile(currentUser);\r\n      } else {\r\n        console.log(`âœ… [createProfile] Perfil jÃ¡ existe para ${currentUser.id}`);\r\n      }\r\n      return profileData;\r\n    } catch (error) {\r\n      console.error('âŒ Erro em createProfileIfNotExists:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro ao criar/verificar perfil\", description: error.message });\r\n      return null;\r\n    }\r\n  }, [getProfile, toast]);\r\n\r\n  // Efeito principal para auth state change e inicializaÃ§Ã£o\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    console.log('[Auth Effect Init] Montando e buscando sessÃ£o inicial...');\r\n    setLoading(true);\r\n\r\n    const initializeAuth = async () => {\r\n        try {\r\n            const { data: { session }, error: sessionError } = await supabase.auth.getSession();\r\n            if (sessionError) throw sessionError;\r\n            if (!mounted) return;\r\n            console.log('[Auth Effect Init] SessÃ£o inicial:', session ? `User ${session.user.id}` : 'Nenhuma');\r\n\r\n            const initialUser = session?.user ?? null;\r\n            setUser(initialUser);\r\n\r\n            if (initialUser) {\r\n                const initialProfile = await createProfileIfNotExists(initialUser);\r\n                if (mounted) {\r\n                    setProfile(initialProfile);\r\n                    const currentPath = window.location.pathname;\r\n                    \r\n                    // âœ… NÃƒO redireciona se estiver em /verify-phone ou se for usuÃ¡rio antigo sem telefone\r\n                    if (initialProfile && ['/', '/login', '/register'].includes(currentPath)) {\r\n                        const targetRoute = initialProfile.isPartner ? '/partner/dashboard' : '/dashboard';\r\n                        console.log(`[Auth Effect Init] Navegando para rota inicial: ${targetRoute}`);\r\n                        navigate(targetRoute, { replace: true });\r\n                    }\r\n                }\r\n            } else if (mounted) {\r\n                setProfile(null);\r\n            }\r\n        } catch (err) {\r\n            console.error('âŒ Erro na inicializaÃ§Ã£o do Auth:', err);\r\n            if (mounted) {\r\n                setUser(null);\r\n                setProfile(null);\r\n            }\r\n        } finally {\r\n            if (mounted) {\r\n                console.log('[Auth Effect Init] Carregamento inicial concluÃ­do.');\r\n                setLoading(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    initializeAuth();\r\n\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (_event, session) => {\r\n        if (!mounted) return;\r\n        console.log(`[AuthStateChange] Evento: ${_event}`, session ? `User ${session.user.id}` : 'Nenhuma sessÃ£o');\r\n\r\n        const currentUser = session?.user ?? null;\r\n\r\n        setUser(prevUser => {\r\n            if (prevUser?.id === currentUser?.id) {\r\n                if (_event === 'USER_UPDATED') {\r\n                    console.log('[AuthStateChange] Evento USER_UPDATED, recarregando perfil...');\r\n                }\r\n                return prevUser;\r\n            }\r\n\r\n            if (currentUser) {\r\n                console.log('[AuthStateChange] UsuÃ¡rio alterado/logado, buscando/criando perfil...');\r\n                createProfileIfNotExists(currentUser).then(p => mounted && setProfile(p));\r\n            } else {\r\n                console.log('[AuthStateChange] UsuÃ¡rio deslogado, limpando perfil.');\r\n                setProfile(null);\r\n                console.log('[AuthStateChange] Navegando para /login apÃ³s logout.');\r\n                navigate('/login', { replace: true });\r\n            }\r\n            return currentUser;\r\n        });\r\n    });\r\n\r\n    return () => {\r\n        console.log('[Auth Effect Init] Desmontando...');\r\n        mounted = false;\r\n        subscription?.unsubscribe();\r\n    };\r\n  }, [createProfileIfNotExists, navigate]);\r\n\r\n  const login = useCallback(async (email, password) => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase.auth.signInWithPassword({ email, password });\r\n      if (error) throw error;\r\n      toast({ title: \"Login realizado com sucesso!\", description: \"Bem-vindo de volta!\" });\r\n      return data.user;\r\n    } catch (error) {\r\n      console.error('âŒ Erro no login:', error);\r\n      const friendlyMessage = getErrorMessage(error);\r\n      toast({ \r\n        variant: \"destructive\", \r\n        title: error.message === 'Email not confirmed' ? \"Email nÃ£o confirmado\" : \"Erro de Login\", \r\n        description: friendlyMessage,\r\n        duration: 8000\r\n      });\r\n      setLoading(false);\r\n      throw error;\r\n    }\r\n  }, [toast]);\r\n\r\n  const signInWithGoogle = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'google',\r\n        options: { redirectTo: window.location.origin }\r\n      });\r\n      if (error) throw error;\r\n      console.log('âœ… Redirecionando para Google...');\r\n    } catch (error) {\r\n      console.error('âŒ Erro no login com Google:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro com Login Google\", description: error.message });\r\n      setLoading(false);\r\n      throw error;\r\n    }\r\n  }, [toast]);\r\n\r\n  const signInWithApple = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'apple',\r\n        options: { \r\n          redirectTo: window.location.origin,\r\n          scopes: 'name email'\r\n        }\r\n      });\r\n      if (error) throw error;\r\n      console.log('âœ… Redirecionando para Apple...');\r\n    } catch (error) {\r\n      console.error('âŒ Erro no login com Apple:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro com Login Apple\", description: error.message });\r\n      setLoading(false);\r\n      throw error;\r\n    }\r\n  }, [toast]);\r\n\r\n  const signInWithFacebook = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'facebook',\r\n        options: { \r\n          redirectTo: window.location.origin,\r\n          scopes: 'email public_profile'\r\n        }\r\n      });\r\n      if (error) throw error;\r\n      console.log('âœ… Redirecionando para Facebook...');\r\n    } catch (error) {\r\n      console.error('âŒ Erro no login com Facebook:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro com Login Facebook\", description: error.message });\r\n      setLoading(false);\r\n      throw error;\r\n    }\r\n  }, [toast]);\r\n\r\n  const register = useCallback(async (userData) => {\r\n    setLoading(true);\r\n    try {\r\n      const { data, error } = await supabase.auth.signUp({\r\n        email: userData.email,\r\n        password: userData.password,\r\n        options: { \r\n          data: { \r\n            full_name: userData.name, \r\n            profile_type: userData.profile_type || PROFILE_TYPES.USER \r\n          },\r\n          emailRedirectTo: `${window.location.origin}/login`\r\n        }\r\n      });\r\n      \r\n      if (error) throw error;\r\n      \r\n      // Verifica se precisa confirmar email\r\n      const needsEmailConfirmation = data.user && !data.session;\r\n      \r\n      if (needsEmailConfirmation) {\r\n        toast({ \r\n          title: \"Cadastro realizado! ðŸ“§\", \r\n          description: \"Enviamos um email de confirmaÃ§Ã£o. Por favor, verifique sua caixa de entrada (e spam) antes de fazer login.\",\r\n          duration: 10000\r\n        });\r\n        setLoading(false);\r\n      } else {\r\n        toast({ \r\n          title: \"Cadastro realizado com sucesso!\", \r\n          description: `Bem-vindo(a), ${userData.name}!` \r\n        });\r\n      }\r\n      \r\n      return data.user;\r\n    } catch (error) {\r\n      console.error('âŒ Erro no registro:', error);\r\n      const friendlyMessage = getErrorMessage(error);\r\n      toast({ \r\n        variant: \"destructive\", \r\n        title: \"Erro de Cadastro\", \r\n        description: friendlyMessage \r\n      });\r\n      setLoading(false);\r\n      throw error;\r\n    }\r\n  }, [toast]);\r\n\r\n  const logout = useCallback(async () => {\r\n    console.log('[Logout] Iniciando logout...');\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n      toast({ title: \"Logout realizado!\", description: \"AtÃ© logo!\" });\r\n      console.log('[Logout] Logout concluÃ­do no Supabase.');\r\n    } catch (error) {\r\n      console.error('âŒ Erro no logout:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro ao Sair\", description: error.message });\r\n    }\r\n  }, [toast]);\r\n\r\n  const updateProfile = useCallback(async (updates) => {\r\n    if (!user) {\r\n      toast({ variant: \"destructive\", title: \"Erro\", description: \"UsuÃ¡rio nÃ£o autenticado.\" });\r\n      return null;\r\n    }\r\n    console.log(`[updateProfile] Atualizando perfil para ${user.id}:`, updates);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .update({ ...updates, updated_at: new Date().toISOString() })\r\n        .eq('id', user.id)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      console.log('âœ… Perfil atualizado no DB:', data);\r\n      toast({ title: \"Sucesso!\", description: \"Seu perfil foi atualizado.\" });\r\n\r\n      const updatedProfileData = {\r\n        ...profile,\r\n        ...data,\r\n        isPartner: data.profile_type === PROFILE_TYPES.PARTNER || data.partner_id != null,\r\n        isPremium: data.is_premium || false,\r\n        userType: getUserType(data),\r\n        isPremiumPartner: profile?.partner_data?.is_premium === true\r\n      };\r\n\r\n      setProfile(updatedProfileData);\r\n      console.log('âœ… Estado do perfil atualizado localmente.');\r\n      return updatedProfileData;\r\n    } catch (error) {\r\n      console.error('âŒ Erro ao atualizar perfil:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro\", description: \"NÃ£o foi possÃ­vel salvar as alteraÃ§Ãµes.\" });\r\n      throw error;\r\n    }\r\n  }, [user, toast, profile]);\r\n\r\n  const uploadAvatar = useCallback(async (file, isAdditionalPhoto = false) => {\r\n    if (!user || !file) {\r\n      toast({ variant: \"destructive\", title: \"Erro\", description: \"UsuÃ¡rio nÃ£o logado ou arquivo invÃ¡lido.\" });\r\n      return null;\r\n    }\r\n    console.log(`[uploadAvatar] Iniciando upload (${isAdditionalPhoto ? 'photo' : 'avatar'}) para ${user.id}`);\r\n    try {\r\n      const fileExt = file.name.split('.').pop();\r\n      const timestamp = Date.now();\r\n      const fileName = `${user.id}-${isAdditionalPhoto ? 'photo' : 'avatar'}-${timestamp}.${fileExt}`;\r\n      \r\n      const bucket = isAdditionalPhoto ? 'photos' : 'avatars';\r\n      const options = { \r\n        cacheControl: '3600', \r\n        upsert: true,\r\n        contentType: file.type || 'application/octet-stream' \r\n      };\r\n\r\n      console.log(`[uploadAvatar] Enviando para bucket '${bucket}', arquivo '${fileName}'`);\r\n      const { data, error } = await supabase.storage.from(bucket).upload(fileName, file, options);\r\n\r\n      if (error) throw error;\r\n\r\n      console.log(`âœ… Upload bem-sucedido. Path:`, data?.path);\r\n      return data?.path ?? null;\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Erro detalhado no upload:', error);\r\n      toast({ variant: \"destructive\", title: \"Erro no Upload\", description: `NÃ£o foi possÃ­vel enviar sua foto. Detalhes: ${error.message}` });\r\n      return null;\r\n    }\r\n  }, [user, toast]);\r\n\r\n  const value = useMemo(() => ({\r\n    user,\r\n    loading,\r\n    profile,\r\n    login,\r\n    register,\r\n    logout,\r\n    signInWithGoogle,\r\n    signInWithApple,\r\n    signInWithFacebook,\r\n    updateProfile,\r\n    uploadAvatar,\r\n  }), [user, loading, profile, login, register, logout, signInWithGoogle, signInWithApple, signInWithFacebook, updateProfile, uploadAvatar]);\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {loading ? (\r\n        <div className=\"w-screen h-screen flex items-center justify-center bg-background\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n        </div>\r\n      ) : (\r\n        children\r\n      )}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nAuthProvider.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n};"],"version":3}