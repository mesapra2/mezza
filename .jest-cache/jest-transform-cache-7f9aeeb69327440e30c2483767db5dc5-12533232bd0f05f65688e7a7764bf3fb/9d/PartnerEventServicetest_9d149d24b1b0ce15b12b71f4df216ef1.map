{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\services\\PartnerEventService.test.ts","mappings":"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","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\services\\PartnerEventService.test.ts"],"sourcesContent":["// src/services/PartnerEventService.test.ts\r\n\r\n// --- 1. MOCKING DEPENDÊNCIAS (ANTES DAS IMPORTAÇÕES) ---\r\n\r\n// Mock do Supabase\r\nconst mockFrom = jest.fn();\r\nconst mockRpc = jest.fn();\r\n\r\njest.mock('../lib/supabaseClient', () => ({\r\n  supabase: {\r\n    from: mockFrom,\r\n    rpc: mockRpc,\r\n  }\r\n}));\r\n\r\n// Mock do NotificationService (default export)\r\nconst mockNotifyApproved = jest.fn(() => Promise.resolve({ success: true }));\r\nconst mockNotifyRejected = jest.fn(() => Promise.resolve({ success: true }));\r\n\r\njest.mock('./NotificationService', () => ({\r\n  default: {\r\n    notifyParticipationApproved: mockNotifyApproved,\r\n    notifyParticipationRejected: mockNotifyRejected,\r\n  },\r\n}));\r\n\r\n// --- 2. IMPORTAÇÕES (DEPOIS DOS MOCKS) ---\r\n\r\nimport { supabase } from '../lib/supabaseClient';\r\nimport NotificationService from './NotificationService';\r\nimport PartnerEventService from './PartnerEventService';\r\n\r\n// --- 3. CONFIGURAÇÃO DOS TESTES ---\r\n\r\ndescribe('PartnerEventService', () => {\r\n\r\n  // Limpa todos os mocks antes de cada teste\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    jest.useFakeTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  // --- 4. TESTES DOS MÉTODOS ---\r\n\r\n  describe('calculateEventStatus (Lógica Pura)', () => {\r\n    const now = new Date('2025-10-10T10:00:00Z');\r\n\r\n    beforeEach(() => {\r\n      jest.setSystemTime(now);\r\n    });\r\n\r\n    const baseEvent = {\r\n      id: '1',\r\n      status: 'Aberto' as const,\r\n      start_time: '2025-10-10T12:00:00Z', // Em 2 horas\r\n      end_time: '2025-10-10T14:00:00Z',\r\n      vagas: 5,\r\n    };\r\n\r\n    it('deve manter Cancelado se já estiver Cancelado', () => {\r\n      const status = PartnerEventService.calculateEventStatus({ ...baseEvent, status: 'Cancelado' }, now);\r\n      expect(status).toBe('Cancelado');\r\n    });\r\n\r\n    it('deve manter Concluído se já estiver Concluído', () => {\r\n      const status = PartnerEventService.calculateEventStatus({ ...baseEvent, status: 'Concluído' }, now);\r\n      expect(status).toBe('Concluído');\r\n    });\r\n\r\n    it('deve ser Finalizado se o tempo de término já passou', () => {\r\n      const pastEvent = { ...baseEvent, end_time: '2025-10-10T09:00:00Z' }; // Terminou 1h atrás\r\n      const status = PartnerEventService.calculateEventStatus(pastEvent, now);\r\n      expect(status).toBe('Finalizado');\r\n    });\r\n\r\n    it('deve ser Em Andamento se estiver dentro do horário', () => {\r\n      const currentEvent = { ...baseEvent, start_time: '2025-10-10T09:00:00Z' }; // Começou 1h atrás\r\n      const status = PartnerEventService.calculateEventStatus(currentEvent, now);\r\n      expect(status).toBe('Em Andamento');\r\n    });\r\n\r\n    it('deve manter Confirmado se foi confirmado manually, mesmo com vagas', () => {\r\n      const status = PartnerEventService.calculateEventStatus({ ...baseEvent, status: 'Confirmado' }, now);\r\n      expect(status).toBe('Confirmado');\r\n    });\r\n\r\n    it('deve ser Confirmado se as vagas acabaram (vagas <= 0)', () => {\r\n      const status = PartnerEventService.calculateEventStatus({ ...baseEvent, vagas: 0 }, now);\r\n      expect(status).toBe('Confirmado');\r\n    });\r\n\r\n    it('deve ser Aberto se faltar mais de 5 minutos e tiver vagas', () => {\r\n      const status = PartnerEventService.calculateEventStatus(baseEvent, now);\r\n      expect(status).toBe('Aberto');\r\n    });\r\n\r\n    it('deve ser Confirmado se faltar menos de 5 minutos (e não estiver cheio)', () => {\r\n      const closeEvent = { ...baseEvent, start_time: '2025-10-10T10:04:00Z' }; // Começa em 4 min\r\n      const status = PartnerEventService.calculateEventStatus(closeEvent, now);\r\n      expect(status).toBe('Confirmado');\r\n    });\r\n  });\r\n\r\n  describe('confirmEvent', () => {\r\n    it('deve chamar update com status Confirmado', async () => {\r\n      const mockEq = jest.fn().mockResolvedValue({ error: null });\r\n      const mockUpdate = jest.fn().mockReturnValue({ eq: mockEq });\r\n      \r\n      mockFrom.mockReturnValue({\r\n        update: mockUpdate,\r\n      });\r\n\r\n      await PartnerEventService.confirmEvent('evt-123');\r\n\r\n      expect(mockFrom).toHaveBeenCalledWith('events');\r\n      expect(mockUpdate).toHaveBeenCalledWith(\r\n        expect.objectContaining({ status: 'Confirmado' })\r\n      );\r\n      expect(mockEq).toHaveBeenCalledWith('id', 'evt-123');\r\n    });\r\n  });\r\n\r\n  describe('cancelEvent', () => {\r\n    it('deve chamar update com status Cancelado e motivo', async () => {\r\n      const mockEq = jest.fn().mockResolvedValue({ error: null });\r\n      const mockUpdate = jest.fn().mockReturnValue({ eq: mockEq });\r\n      \r\n      mockFrom.mockReturnValue({\r\n        update: mockUpdate,\r\n      });\r\n\r\n      await PartnerEventService.cancelEvent('evt-123', 'Motivo Teste');\r\n\r\n      expect(mockUpdate).toHaveBeenCalledWith(\r\n        expect.objectContaining({\r\n          status: 'Cancelado',\r\n          cancelamento_motivo: 'Motivo Teste',\r\n        })\r\n      );\r\n      expect(mockEq).toHaveBeenCalledWith('id', 'evt-123');\r\n    });\r\n  });\r\n\r\n  describe('getEventStats', () => {\r\n    it('deve buscar e agregar estatísticas do evento', async () => {\r\n      const mockEvent = { id: 'evt-1', title: 'Evento' };\r\n      const mockParticipations = [\r\n        { status: 'aprovado', presenca_confirmada: true, avaliacao_feita: true },\r\n        { status: 'aprovado', presenca_confirmada: true, avaliacao_feita: false },\r\n        { status: 'aprovado', presenca_confirmada: false, avaliacao_feita: false },\r\n        { status: 'pendente', presenca_confirmada: false, avaliacao_feita: false },\r\n      ];\r\n\r\n      // Mock 1: SELECT do evento\r\n      const mockSingle = jest.fn().mockResolvedValue({ data: mockEvent, error: null });\r\n      const mockEq1 = jest.fn().mockReturnValue({ single: mockSingle });\r\n      const mockSelect1 = jest.fn().mockReturnValue({ eq: mockEq1 });\r\n      \r\n      // Mock 2: SELECT de participações\r\n      const mockEq2 = jest.fn().mockResolvedValue({ data: mockParticipations, error: null });\r\n      const mockSelect2 = jest.fn().mockReturnValue({ eq: mockEq2 });\r\n\r\n      mockFrom\r\n        .mockReturnValueOnce({ select: mockSelect1 })  // primeira chamada: evento\r\n        .mockReturnValueOnce({ select: mockSelect2 }); // segunda chamada: participações\r\n\r\n      const result = await PartnerEventService.getEventStats('evt-1');\r\n\r\n      expect(result.success).toBe(true);\r\n      expect(result.data?.event).toEqual(mockEvent);\r\n      expect(result.data?.totalCandidaturas).toBe(4);\r\n      expect(result.data?.aprovados).toBe(3);\r\n      expect(result.data?.presentes).toBe(2);\r\n      expect(result.data?.avaliacoes).toBe(1);\r\n    });\r\n  });\r\n\r\n  describe('approveParticipation', () => {\r\n    it('deve aprovar, decrementar vagas e notificar o usuário', async () => {\r\n      const mockEvent = { vagas: 5, title: 'Evento Teste' };\r\n      const mockParticipation = { user_id: 'user-abc' };\r\n\r\n      // Mock 1: SELECT evento\r\n      const mockSingle1 = jest.fn().mockResolvedValue({ data: mockEvent, error: null });\r\n      const mockEq1 = jest.fn().mockReturnValue({ single: mockSingle1 });\r\n      const mockSelect1 = jest.fn().mockReturnValue({ eq: mockEq1 });\r\n      \r\n      // Mock 2: SELECT participação\r\n      const mockSingle2 = jest.fn().mockResolvedValue({ data: mockParticipation, error: null });\r\n      const mockEq2 = jest.fn().mockReturnValue({ single: mockSingle2 });\r\n      const mockSelect2 = jest.fn().mockReturnValue({ eq: mockEq2 });\r\n      \r\n      // Mock 3: UPDATE participação\r\n      const mockEq3 = jest.fn().mockResolvedValue({ error: null });\r\n      const mockUpdate = jest.fn().mockReturnValue({ eq: mockEq3 });\r\n\r\n      mockFrom\r\n        .mockReturnValueOnce({ select: mockSelect1 }) // buscar evento\r\n        .mockReturnValueOnce({ select: mockSelect2 }) // buscar participação\r\n        .mockReturnValueOnce({ update: mockUpdate });  // atualizar participação\r\n      \r\n      // Mock RPC decremento\r\n      mockRpc.mockResolvedValue({ error: null });\r\n\r\n      const result = await PartnerEventService.approveParticipation('part-123', '456');\r\n\r\n      expect(result.success).toBe(true);\r\n      \r\n      // Verifica se a participação foi atualizada\r\n      expect(mockUpdate).toHaveBeenCalledWith(\r\n        expect.objectContaining({ status: 'aprovado' })\r\n      );\r\n      \r\n      // Verifica se o RPC foi chamado\r\n      expect(mockRpc).toHaveBeenCalledWith('decrement_event_vacancy', { event_id: '456' });\r\n      \r\n      // Verifica se a notificação foi enviada\r\n      expect(mockNotifyApproved).toHaveBeenCalledWith(\r\n        'user-abc',\r\n        456, // O código faz parseInt()\r\n        'Evento Teste'\r\n      );\r\n    });\r\n\r\n    it('deve falhar se não houver vagas', async () => {\r\n      const mockEvent = { vagas: 0, title: 'Evento Lotado' };\r\n\r\n      // Mock SELECT evento (lotado)\r\n      const mockSingle = jest.fn().mockResolvedValue({ data: mockEvent, error: null });\r\n      const mockEq = jest.fn().mockReturnValue({ single: mockSingle });\r\n      const mockSelect = jest.fn().mockReturnValue({ eq: mockEq });\r\n\r\n      mockFrom.mockReturnValue({ select: mockSelect });\r\n\r\n      const result = await PartnerEventService.approveParticipation('part-123', '456');\r\n\r\n      expect(result.success).toBe(false);\r\n      expect(result.error).toBe('Sem vagas disponíveis');\r\n      \r\n      // Garante que não tentou fazer nada depois\r\n      expect(mockRpc).not.toHaveBeenCalled();\r\n      expect(mockNotifyApproved).not.toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('rejectParticipation', () => {\r\n    it('deve rejeitar e notificar o usuário com motivo', async () => {\r\n      const mockParticipation = {\r\n        user_id: 'user-abc',\r\n        event_id: 789,\r\n        events: { title: 'Evento Rejeitado' },\r\n      };\r\n\r\n      // Mock 1: SELECT participação (com inner join)\r\n      const mockSingle = jest.fn().mockResolvedValue({ data: mockParticipation, error: null });\r\n      const mockEq1 = jest.fn().mockReturnValue({ single: mockSingle });\r\n      const mockSelect = jest.fn().mockReturnValue({ eq: mockEq1 });\r\n      \r\n      // Mock 2: UPDATE participação\r\n      const mockEq2 = jest.fn().mockResolvedValue({ error: null });\r\n      const mockUpdate = jest.fn().mockReturnValue({ eq: mockEq2 });\r\n\r\n      mockFrom\r\n        .mockReturnValueOnce({ select: mockSelect }) // buscar participação\r\n        .mockReturnValueOnce({ update: mockUpdate }); // atualizar participação\r\n\r\n      const reason = 'Não se encaixa no perfil';\r\n      const result = await PartnerEventService.rejectParticipation('part-123', reason);\r\n\r\n      expect(result.success).toBe(true);\r\n      \r\n      // Verifica se o status foi atualizado com o motivo\r\n      expect(mockUpdate).toHaveBeenCalledWith(\r\n        expect.objectContaining({\r\n          status: 'rejeitado',\r\n          motivo_rejeicao: reason,\r\n        })\r\n      );\r\n      \r\n      // Verifica se a notificação foi enviada\r\n      expect(mockNotifyRejected).toHaveBeenCalledWith(\r\n        'user-abc',\r\n        789,\r\n        'Evento Rejeitado',\r\n        reason\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('getEventParticipations', () => {\r\n    it('deve buscar participações com dados do usuário', async () => {\r\n      const mockParticipations = [{ id: 'part-1', user: { username: 'Test' } }];\r\n\r\n      const mockOrder = jest.fn().mockResolvedValue({ data: mockParticipations, error: null });\r\n      const mockEq = jest.fn().mockReturnValue({ order: mockOrder });\r\n      const mockSelect = jest.fn().mockReturnValue({ eq: mockEq });\r\n      \r\n      mockFrom.mockReturnValue({\r\n        select: mockSelect,\r\n      });\r\n\r\n      const result = await PartnerEventService.getEventParticipations('evt-1');\r\n\r\n      expect(mockFrom).toHaveBeenCalledWith('event_participants');\r\n      expect(mockSelect).toHaveBeenCalledWith(\r\n        '*, user:profiles!event_participants_user_id_fkey(*)'\r\n      );\r\n      expect(result.success).toBe(true);\r\n      expect(result.data).toEqual(mockParticipations);\r\n    });\r\n  });\r\n\r\n});"],"version":3}