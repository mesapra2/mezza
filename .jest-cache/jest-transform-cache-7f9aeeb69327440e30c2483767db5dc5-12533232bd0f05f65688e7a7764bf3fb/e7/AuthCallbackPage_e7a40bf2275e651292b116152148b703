a786aaf19d3bab877eed64ff2df1272c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
// src/features/auth/pages/AuthCallbackPage.jsx
const react_1 = tslib_1.__importStar(require("react"));
const react_router_dom_1 = require("react-router-dom");
const react_helmet_async_1 = require("react-helmet-async");
const framer_motion_1 = require("framer-motion");
const lucide_react_1 = require("lucide-react");
const supabaseClient_1 = require("@/lib/supabaseClient");
const button_1 = require("@/features/shared/components/ui/button");
/**
 * Página de callback para processar confirmação de email
 * Esta página é chamada quando o usuário clica no link de confirmação enviado por email
 */
const AuthCallbackPage = () => {
    const [searchParams] = (0, react_router_dom_1.useSearchParams)();
    const navigate = (0, react_router_dom_1.useNavigate)();
    const [status, setStatus] = (0, react_1.useState)('loading'); // 'loading', 'success', 'error'
    const [message, setMessage] = (0, react_1.useState)('');
    (0, react_1.useEffect)(() => {
        const handleEmailConfirmation = async () => {
            try {
                // Pega os parâmetros da URL
                const token_hash = searchParams.get('token_hash');
                const type = searchParams.get('type');
                if (!token_hash || type !== 'email') {
                    throw new Error('Link de confirmação inválido');
                }
                // Verifica o token de email
                const { data, error } = await supabaseClient_1.supabase.auth.verifyOtp({
                    token_hash,
                    type: 'email'
                });
                if (error) {
                    throw error;
                }
                // Email confirmado com sucesso!
                setStatus('success');
                setMessage('Email confirmado com sucesso! Agora você pode fazer login.');
                // Aguarda 2 segundos e redireciona para o login
                setTimeout(() => {
                    navigate('/login', {
                        state: {
                            emailConfirmed: true,
                            email: data.user?.email
                        }
                    });
                }, 2000);
            }
            catch (error) {
                console.error('Erro na confirmação:', error);
                setStatus('error');
                if (error.message.includes('already confirmed')) {
                    setMessage('Este email já foi confirmado anteriormente. Você pode fazer login normalmente.');
                }
                else if (error.message.includes('expired')) {
                    setMessage('Este link de confirmação expirou. Solicite um novo link de confirmação.');
                }
                else {
                    setMessage(error.message || 'Erro ao confirmar email. Tente novamente.');
                }
            }
        };
        handleEmailConfirmation();
    }, [searchParams, navigate]);
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(react_helmet_async_1.Helmet, { children: (0, jsx_runtime_1.jsx)("title", { children: "Confirma\u00E7\u00E3o de Email - Mesa Pra 2" }) }), (0, jsx_runtime_1.jsx)("div", { className: "min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4", children: (0, jsx_runtime_1.jsx)(framer_motion_1.motion.div, { initial: { opacity: 0, scale: 0.95 }, animate: { opacity: 1, scale: 1 }, className: "w-full max-w-md", children: (0, jsx_runtime_1.jsxs)("div", { className: "bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-white/20", children: [status === 'loading' && ((0, jsx_runtime_1.jsxs)("div", { className: "text-center space-y-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex justify-center", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Loader2, { className: "w-16 h-16 text-purple-400 animate-spin" }) }), (0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold text-white", children: "Confirmando seu email..." }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60", children: "Aguarde enquanto validamos seu cadastro" })] })), status === 'success' && ((0, jsx_runtime_1.jsxs)("div", { className: "text-center space-y-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex justify-center", children: (0, jsx_runtime_1.jsx)("div", { className: "w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center", children: (0, jsx_runtime_1.jsx)(lucide_react_1.CheckCircle, { className: "w-10 h-10 text-green-500" }) }) }), (0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold text-white", children: "Email Confirmado!" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60", children: message }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-white/40", children: "Redirecionando para o login..." })] })), status === 'error' && ((0, jsx_runtime_1.jsxs)("div", { className: "text-center space-y-6", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex justify-center", children: (0, jsx_runtime_1.jsx)("div", { className: "w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center", children: (0, jsx_runtime_1.jsx)(lucide_react_1.XCircle, { className: "w-10 h-10 text-red-500" }) }) }), (0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold text-white", children: "Erro na Confirma\u00E7\u00E3o" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60", children: message }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => navigate('/login'), className: "w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600", children: "Ir para Login" }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => navigate('/partner/register'), variant: "outline", className: "w-full", children: "Tentar Novamente" })] })] }))] }) }) })] }));
};
exports.default = AuthCallbackPage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxmZWF0dXJlc1xcc2hhcmVkXFxwYWdlc1xcQXV0aENhbGxiYWNrUGFnZS5qc3giLCJtYXBwaW5ncyI6Ijs7OztBQUFBLCtDQUErQztBQUMvQyx1REFBbUQ7QUFDbkQsdURBQWdFO0FBQ2hFLDJEQUE0QztBQUM1QyxpREFBdUM7QUFDdkMsK0NBQTZEO0FBQzdELHlEQUFnRDtBQUNoRCxtRUFBZ0U7QUFFaEU7OztHQUdHO0FBQ0gsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLEVBQUU7SUFDNUIsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLElBQUEsa0NBQWUsR0FBRSxDQUFDO0lBQ3pDLE1BQU0sUUFBUSxHQUFHLElBQUEsOEJBQVcsR0FBRSxDQUFDO0lBQy9CLE1BQU0sQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsZ0NBQWdDO0lBQ2pGLE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRTNDLElBQUEsaUJBQVMsRUFBQyxHQUFHLEVBQUU7UUFDYixNQUFNLHVCQUF1QixHQUFHLEtBQUssSUFBSSxFQUFFO1lBQ3pDLElBQUksQ0FBQztnQkFDSCw0QkFBNEI7Z0JBQzVCLE1BQU0sVUFBVSxHQUFHLFlBQVksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ2xELE1BQU0sSUFBSSxHQUFHLFlBQVksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBRXRDLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxLQUFLLE9BQU8sRUFBRSxDQUFDO29CQUNwQyxNQUFNLElBQUksS0FBSyxDQUFDLDhCQUE4QixDQUFDLENBQUM7Z0JBQ2xELENBQUM7Z0JBRUQsNEJBQTRCO2dCQUM1QixNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLE1BQU0seUJBQVEsQ0FBQyxJQUFJ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QUMsdUVBQXVFLFlBQ3BGLHVCQUFDLHNCQUFPLElBQUMsU0FBUyxFQUFDLHdCQUF3QixHQUFHLEdBQzFDLEdBQ0YsRUFDTiwrQkFBSSxTQUFTLEVBQUMsK0JBQStCLDhDQUV4QyxFQUNMLDhCQUFHLFNBQVMsRUFBQyxlQUFlLFlBQUUsT0FBTyxHQUFLLEVBRTFDLGlDQUFLLFNBQVMsRUFBQyxXQUFXLGFBQ3hCLHVCQUFDLGVBQU0sSUFDTCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUNqQyxTQUFTLEVBQUMsNkZBQTZGLDhCQUdoRyxFQUVULHVCQUFDLGVBQU0sSUFDTCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLEVBQzVDLE9BQU8sRUFBQyxTQUFTLEVBQ2pCLFNBQVMsRUFBQyxRQUFRLGlDQUdYLElBQ0wsSUFDRixDQUNQLElBQ0csR0FDSyxHQUNULElBQ0wsQ0FDSixDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsa0JBQWUsZ0JBQWdCLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxmZWF0dXJlc1xcc2hhcmVkXFxwYWdlc1xcQXV0aENhbGxiYWNrUGFnZS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ZlYXR1cmVzL2F1dGgvcGFnZXMvQXV0aENhbGxiYWNrUGFnZS5qc3hcclxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZU5hdmlnYXRlLCB1c2VTZWFyY2hQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgSGVsbWV0IH0gZnJvbSAncmVhY3QtaGVsbWV0LWFzeW5jJztcclxuaW1wb3J0IHsgbW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XHJcbmltcG9ydCB7IENoZWNrQ2lyY2xlLCBYQ2lyY2xlLCBMb2FkZXIyIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZUNsaWVudCc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvZmVhdHVyZXMvc2hhcmVkL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcclxuXHJcbi8qKlxyXG4gKiBQw6FnaW5hIGRlIGNhbGxiYWNrIHBhcmEgcHJvY2Vzc2FyIGNvbmZpcm1hw6fDo28gZGUgZW1haWxcclxuICogRXN0YSBww6FnaW5hIMOpIGNoYW1hZGEgcXVhbmRvIG8gdXN1w6FyaW8gY2xpY2Egbm8gbGluayBkZSBjb25maXJtYcOnw6NvIGVudmlhZG8gcG9yIGVtYWlsXHJcbiAqL1xyXG5jb25zdCBBdXRoQ2FsbGJhY2tQYWdlID0gKCkgPT4ge1xyXG4gIGNvbnN0IFtzZWFyY2hQYXJhbXNdID0gdXNlU2VhcmNoUGFyYW1zKCk7XHJcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpO1xyXG4gIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZSgnbG9hZGluZycpOyAvLyAnbG9hZGluZycsICdzdWNjZXNzJywgJ2Vycm9yJ1xyXG4gIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUVtYWlsQ29uZmlybWF0aW9uID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFBlZ2Egb3MgcGFyw6JtZXRyb3MgZGEgVVJMXHJcbiAgICAgICAgY29uc3QgdG9rZW5faGFzaCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3Rva2VuX2hhc2gnKTtcclxuICAgICAgICBjb25zdCB0eXBlID0gc2VhcmNoUGFyYW1zLmdldCgndHlwZScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdG9rZW5faGFzaCB8fCB0eXBlICE9PSAnZW1haWwnKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpbmsgZGUgY29uZmlybWHDp8OjbyBpbnbDoWxpZG8nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFZlcmlmaWNhIG8gdG9rZW4gZGUgZW1haWxcclxuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnZlcmlmeU90cCh7XHJcbiAgICAgICAgICB0b2tlbl9oYXNoLFxyXG4gICAgICAgICAgdHlwZTogJ2VtYWlsJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRW1haWwgY29uZmlybWFkbyBjb20gc3VjZXNzbyFcclxuICAgICAgICBzZXRTdGF0dXMoJ3N1Y2Nlc3MnKTtcclxuICAgICAgICBzZXRNZXNzYWdlKCdFbWFpbCBjb25maXJtYWRvIGNvbSBzdWNlc3NvISBBZ29yYSB2b2PDqiBwb2RlIGZhemVyIGxvZ2luLicpO1xyXG5cclxuICAgICAgICAvLyBBZ3VhcmRhIDIgc2VndW5kb3MgZSByZWRpcmVjaW9uYSBwYXJhIG8gbG9naW5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIG5hdmlnYXRlKCcvbG9naW4nLCB7IFxyXG4gICAgICAgICAgICBzdGF0ZTogeyBcclxuICAgICAgICAgICAgICBlbWFpbENvbmZpcm1lZDogdHJ1ZSxcclxuICAgICAgICAgICAgICBlbWFpbDogZGF0YS51c2VyPy5lbWFpbCBcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDIwMDApO1xyXG5cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIG5hIGNvbmZpcm1hw6fDo286JywgZXJyb3IpO1xyXG4gICAgICAgIHNldFN0YXR1cygnZXJyb3InKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnYWxyZWFkeSBjb25maXJtZWQnKSkge1xyXG4gICAgICAgICAgc2V0TWVzc2FnZSgnRXN0ZSBlbWFpbCBqw6EgZm9pIGNvbmZpcm1hZG8gYW50ZXJpb3JtZW50ZS4gVm9jw6ogcG9kZSBmYXplciBsb2dpbiBub3JtYWxtZW50ZS4nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2V4cGlyZWQnKSkge1xyXG4gICAgICAgICAgc2V0TWVzc2FnZSgnRXN0ZSBsaW5rIGRlIGNvbmZpcm1hw6fDo28gZXhwaXJvdS4gU29saWNpdGUgdW0gbm92byBsaW5rIGRlIGNvbmZpcm1hw6fDo28uJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNldE1lc3NhZ2UoZXJyb3IubWVzc2FnZSB8fCAnRXJybyBhbyBjb25maXJtYXIgZW1haWwuIFRlbnRlIG5vdmFtZW50ZS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaGFuZGxlRW1haWxDb25maXJtYXRpb24oKTtcclxuICB9LCBbc2VhcmNoUGFyYW1zLCBuYXZpZ2F0ZV0pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPD5cclxuICAgICAgPEhlbG1ldD5cclxuICAgICAgICA8dGl0bGU+Q29uZmlybWHDp8OjbyBkZSBFbWFpbCAtIE1lc2EgUHJhIDI8L3RpdGxlPlxyXG4gICAgICA8L0hlbG1ldD5cclxuXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tc2xhdGUtOTAwIHZpYS1wdXJwbGUtOTAwIHRvLXNsYXRlLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cclxuICAgICAgICA8bW90aW9uLmRpdlxyXG4gICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwLCBzY2FsZTogMC45NSB9fVxyXG4gICAgICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCBzY2FsZTogMSB9fVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LW1kXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlLzEwIGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCBwLTggYm9yZGVyIGJvcmRlci13aGl0ZS8yMFwiPlxyXG4gICAgICAgICAgICB7c3RhdHVzID09PSAnbG9hZGluZycgJiYgKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgc3BhY2UteS00XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwidy0xNiBoLTE2IHRleHQtcHVycGxlLTQwMCBhbmltYXRlLXNwaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtd2hpdGVcIj5cclxuICAgICAgICAgICAgICAgICAgQ29uZmlybWFuZG8gc2V1IGVtYWlsLi4uXHJcbiAgICAgICAgICAgICAgICA8L2gyPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MFwiPlxyXG4gICAgICAgICAgICAgICAgICBBZ3VhcmRlIGVucXVhbnRvIHZhbGlkYW1vcyBzZXUgY2FkYXN0cm9cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgIHtzdGF0dXMgPT09ICdzdWNjZXNzJyAmJiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBzcGFjZS15LTRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTYgaC0xNiByb3VuZGVkLWZ1bGwgYmctZ3JlZW4tNTAwLzIwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPENoZWNrQ2lyY2xlIGNsYXNzTmFtZT1cInctMTAgaC0xMCB0ZXh0LWdyZWVuLTUwMFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtd2hpdGVcIj5cclxuICAgICAgICAgICAgICAgICAgRW1haWwgQ29uZmlybWFkbyFcclxuICAgICAgICAgICAgICAgIDwvaDI+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzYwXCI+e21lc3NhZ2V9PC9wPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXdoaXRlLzQwXCI+XHJcbiAgICAgICAgICAgICAgICAgIFJlZGlyZWNpb25hbmRvIHBhcmEgbyBsb2dpbi4uLlxyXG4gICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAge3N0YXR1cyA9PT0gJ2Vycm9yJyAmJiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBzcGFjZS15LTZcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTYgaC0xNiByb3VuZGVkLWZ1bGwgYmctcmVkLTUwMC8yMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxYQ2lyY2xlIGNsYXNzTmFtZT1cInctMTAgaC0xMCB0ZXh0LXJlZC01MDBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgIEVycm8gbmEgQ29uZmlybWHDp8Ojb1xyXG4gICAgICAgICAgICAgICAgPC9oMj5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvNjBcIj57bWVzc2FnZX08L3A+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZSgnL2xvZ2luJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNTAwIHRvLXBpbmstNTAwIGhvdmVyOmZyb20tcHVycGxlLTYwMCBob3Zlcjp0by1waW5rLTYwMFwiXHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBJciBwYXJhIExvZ2luXHJcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG5hdmlnYXRlKCcvcGFydG5lci9yZWdpc3RlcicpfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGxcIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgVGVudGFyIE5vdmFtZW50ZVxyXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9tb3Rpb24uZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBdXRoQ2FsbGJhY2tQYWdlOyJdLCJ2ZXJzaW9uIjozfQ==