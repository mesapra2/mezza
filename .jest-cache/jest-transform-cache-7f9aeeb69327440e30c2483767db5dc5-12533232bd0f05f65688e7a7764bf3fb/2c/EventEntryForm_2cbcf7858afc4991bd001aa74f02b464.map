{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\features\\shared\\components\\ui\\EventEntryForm.jsx","mappings":"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","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\features\\shared\\components\\ui\\EventEntryForm.jsx"],"sourcesContent":["// src/components/EventEntryForm.jsx\r\nimport React, { useState, useRef } from 'react';\r\nimport { Button } from '/src/features/shared/components/ui/button';\r\nimport { Input } from '/src/features/shared/components/ui/input';\r\nimport { useToast } from '@/features/shared/components/ui/use-toast';\r\nimport ParticipationService from '@/services/ParticipationService';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * ğŸ” Componente: FormulÃ¡rio de entrada com senha\r\n * - Input de 4 dÃ­gitos (1 dÃ­gito por input)\r\n * - ValidaÃ§Ã£o em tempo real\r\n * - Feedback visual\r\n */\r\nconst EventEntryForm = ({ eventId, onSuccess, isDisabled = false }) => {\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n\r\n  const [digits, setDigits] = useState(['', '', '', '']);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const inputRefs = useRef([]);\r\n\r\n  /**\r\n   * ğŸ¯ Muda dÃ­gito e auto-move para prÃ³ximo\r\n   */\r\n  const handleDigitChange = (index, value) => {\r\n    // Apenas nÃºmeros\r\n    if (!/^\\d?$/.test(value)) return;\r\n\r\n    const newDigits = [...digits];\r\n    newDigits[index] = value;\r\n    setDigits(newDigits);\r\n    setError('');\r\n\r\n    // Auto-move para prÃ³ximo input\r\n    if (value && index < 3) {\r\n      inputRefs.current[index + 1]?.focus();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * âŒ« Backspace: move para anterior\r\n   */\r\n  const handleKeyDown = (index, e) => {\r\n    if (e.key === 'Backspace' && !digits[index] && index > 0) {\r\n      inputRefs.current[index - 1]?.focus();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * âœ… Submeter senha\r\n   */\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Validar se todos os dÃ­gitos foram preenchidos\r\n    if (digits.some(d => d === '')) {\r\n      setError('âš ï¸ Digite todos os 4 dÃ­gitos');\r\n      toast({\r\n        variant: 'destructive',\r\n        title: 'Senha incompleta',\r\n        description: 'Por favor, digite todos os 4 dÃ­gitos'\r\n      });\r\n      return;\r\n    }\r\n\r\n    const password = digits.join('');\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      console.log(`ğŸ” Validando senha: ${password}`);\r\n\r\n      const result = await ParticipationService.validateEventEntry(\r\n        eventId,\r\n        user.id,\r\n        password\r\n      );\r\n\r\n      if (result.success && result.canEnter) {\r\n        console.log(`âœ… Entrada validada!`);\r\n\r\n        toast({\r\n          title: 'âœ… Acesso Liberado!',\r\n          description: 'Bem-vindo ao evento! VocÃª pode entrar agora.',\r\n          duration: 3000\r\n        });\r\n\r\n        // Callback de sucesso\r\n        if (onSuccess) {\r\n          onSuccess();\r\n        }\r\n      } else {\r\n        console.log(`âŒ Entrada rejeitada:`, result.message);\r\n\r\n        setError(result.message || 'âŒ Senha incorreta');\r\n        setDigits(['', '', '', '']);\r\n        inputRefs.current[0]?.focus();\r\n\r\n        toast({\r\n          variant: 'destructive',\r\n          title: 'Acesso Negado',\r\n          description: result.message\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Erro ao validar entrada:', error);\r\n\r\n      setError('âŒ Erro ao processar sua entrada');\r\n      toast({\r\n        variant: 'destructive',\r\n        title: 'Erro',\r\n        description: 'Erro ao processar sua entrada'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ğŸ”„ Limpar form\r\n   */\r\n  const handleClear = () => {\r\n    setDigits(['', '', '', '']);\r\n    setError('');\r\n    inputRefs.current[0]?.focus();\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-sm mx-auto p-6 bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl border border-slate-700 shadow-2xl\">\r\n      {/* ğŸ¯ TÃ­tulo */}\r\n      <div className=\"text-center mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-white mb-2\">ğŸ” Digite a Senha</h2>\r\n        <p className=\"text-sm text-slate-400\">\r\n          Digite os 4 dÃ­gitos para entrar no evento\r\n        </p>\r\n      </div>\r\n\r\n      {/* ğŸ“ FormulÃ¡rio */}\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* ğŸ”¢ Inputs de DÃ­gitos */}\r\n        <div className=\"flex justify-center gap-3\">\r\n          {[0, 1, 2, 3].map((index) => (\r\n            <Input\r\n              key={index}\r\n              ref={(el) => (inputRefs.current[index] = el)}\r\n              type=\"text\"\r\n              inputMode=\"numeric\"\r\n              maxLength=\"1\"\r\n              value={digits[index]}\r\n              onChange={(e) => handleDigitChange(index, e.target.value)}\r\n              onKeyDown={(e) => handleKeyDown(index, e)}\r\n              disabled={isDisabled || loading}\r\n              placeholder=\"â€¢\"\r\n              className={`w-14 h-14 text-center text-2xl font-bold rounded-lg border-2 transition-all ${\r\n                digits[index]\r\n                  ? 'border-blue-500 bg-blue-500/10 text-white'\r\n                  : 'border-slate-600 bg-slate-700 text-slate-400'\r\n              } ${error ? 'border-red-500' : ''} ${\r\n                isDisabled ? 'opacity-50 cursor-not-allowed' : ''\r\n              }`}\r\n              autoFocus={index === 0}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {/* âŒ Mensagem de Erro */}\r\n        {error && (\r\n          <div className=\"p-3 rounded-lg bg-red-500/10 border border-red-500/30\">\r\n            <p className=\"text-sm text-red-400 text-center\">{error}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* â° Mensagem de Aviso (se desabilitado) */}\r\n        {isDisabled && (\r\n          <div className=\"p-3 rounded-lg bg-orange-500/10 border border-orange-500/30\">\r\n            <p className=\"text-sm text-orange-400 text-center\">\r\n              â° Entrada nÃ£o estÃ¡ disponÃ­vel no momento\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* ğŸ¯ BotÃµes */}\r\n        <div className=\"flex gap-3\">\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={isDisabled || loading}\r\n            className=\"flex-1 h-12 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <div className=\"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\"></div>\r\n                Validando...\r\n              </>\r\n            ) : (\r\n              'âœ… Confirmar Entrada'\r\n            )}\r\n          </Button>\r\n\r\n          <Button\r\n            type=\"button\"\r\n            onClick={handleClear}\r\n            disabled={isDisabled || loading}\r\n            variant=\"outline\"\r\n            className=\"px-4 h-12 border border-slate-600 text-slate-300 hover:bg-slate-700\"\r\n          >\r\n            ğŸ”„\r\n          </Button>\r\n        </div>\r\n\r\n        {/* â„¹ï¸ Info */}\r\n        <p className=\"text-xs text-slate-500 text-center\">\r\n          Digite a senha compartilhada pelo anfitriÃ£o\r\n        </p>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nEventEntryForm.propTypes = {\r\n  eventId: PropTypes.string.isRequired,\r\n  onSuccess: PropTypes.func,\r\n  isDisabled: PropTypes.bool,\r\n};\r\n\r\nEventEntryForm.defaultProps = {\r\n  isDisabled: false,\r\n};\r\nexport default EventEntryForm;"],"version":3}