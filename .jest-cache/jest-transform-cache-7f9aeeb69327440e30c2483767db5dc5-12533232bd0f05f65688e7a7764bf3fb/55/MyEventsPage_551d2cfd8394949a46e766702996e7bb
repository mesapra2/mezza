7ec1d8e90abe76e2fe3b24d2556dce8f
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
// src/features/shared/pages/MyEventsPage.jsx
const react_1 = require("react");
const react_helmet_async_1 = require("react-helmet-async");
const framer_motion_1 = require("framer-motion");
const react_router_dom_1 = require("react-router-dom");
const lucide_react_1 = require("lucide-react");
const button_1 = require("@/features/shared/components/ui/button");
const supabaseClient_1 = require("@/lib/supabaseClient");
const date_fns_1 = require("date-fns");
const locale_1 = require("date-fns/locale");
const AuthContext_1 = require("@/contexts/AuthContext");
const use_toast_1 = require("@/features/shared/components/ui/use-toast");
const EventStatusService_1 = tslib_1.__importDefault(require("@/services/EventStatusService"));
const EventPhotosService_1 = tslib_1.__importDefault(require("@/services/EventPhotosService"));
const MyEventsPage = () => {
    const { user } = (0, AuthContext_1.useAuth)();
    const { toast } = (0, use_toast_1.useToast)();
    const fileInputRef = (0, react_1.useRef)(null);
    const [events, setEvents] = (0, react_1.useState)([]);
    const [filteredEvents, setFilteredEvents] = (0, react_1.useState)([]);
    const [filter, setFilter] = (0, react_1.useState)('futuros');
    const [loading, setLoading] = (0, react_1.useState)(true);
    const [error, setError] = (0, react_1.useState)(null);
    const [eventStats, setEventStats] = (0, react_1.useState)({});
    const [uploading, setUploading] = (0, react_1.useState)({});
    // --------------------------------------------------
    // CARREGAR EVENTOS DO USUÁRIO LOGADO
    // --------------------------------------------------
    const loadEvents = (0, react_1.useCallback)(async () => {
        if (!user?.id)
            return;
        setLoading(true);
        setError(null);
        try {
            const { data, error: fetchError } = await supabaseClient_1.supabase
                .from('events')
                .select(`
          *,
          partner:partners(id, name, address),
          creator:profiles!events_creator_id_fkey(
            id, username, avatar_url, full_name, public_profile
          )
        `)
                .eq('creator_id', user.id)
                .eq('hidden', false)
                .order('start_time', { ascending: false });
            if (fetchError)
                throw fetchError;
            const eventsData = data || [];
            setEvents(eventsData);
            await loadEventStats(eventsData);
        }
        catch (err) {
            console.error('Erro ao carregar eventos:', err);
            setError('Erro ao carregar seus eventos. Tente novamente.');
        }
        finally {
            setLoading(false);
        }
    }, [user?.id]);
    // carrega assim que tiver user e quando loadEvents mudar
    (0, react_1.useEffect)(() => {
        if (user?.id) {
            loadEvents();
        }
    }, [user?.id, loadEvents]);
    // --------------------------------------------------
    // CARREGAR ESTATÍSTICAS DE PARTICIPAÇÃO
    // --------------------------------------------------
    const loadEventStats = async (eventList) => {
        const stats = {};
        for (const event of eventList) {
            const result = await EventStatusService_1.default.getEventStats(event.id);
            if (result.success && result.data?.participants) {
                stats[event.id] = result.data;
            }
        }
        setEventStats(stats);
    };
    // --------------------------------------------------
    // FILTRAR EVENTOS
    // --------------------------------------------------
    const filterEvents = (0, react_1.useCallback)(() => {
        const now = new Date();
        let filtered = events;
        switch (filter) {
            case 'futuros':
                filtered = events.filter((e) => new Date(e.end_time) >= now);
                break;
            case 'passados':
                filtered = events.filter((e) => new Date(e.end_time) < now);
                break;
            case 'finalizados':
                filtered = events.filter((e) => e.status === 'Finalizado');
                break;
            case 'concluidos':
                filtered = events.filter((e) => e.status === 'Concluído');
                break;
            default:
                filtered = events;
        }
        setFilteredEvents(filtered);
    }, [events, filter]);
    (0, react_1.useEffect)(() => {
        filterEvents();
    }, [filterEvents]);
    // --------------------------------------------------
    // OCULTAR EVENTO
    // --------------------------------------------------
    const handleHideEvent = async (eventId) => {
        if (!window.confirm('Tem certeza que deseja ocultar este evento? Ele não aparecerá mais no seu histórico.')) {
            return;
        }
        try {
            const { error } = await supabaseClient_1.supabase
                .from('events')
                .update({ hidden: true })
                .eq('id', eventId);
            if (error)
                throw error;
            toast({
                title: 'Evento ocultado',
                description: 'O evento foi removido do seu histórico.',
            });
            await loadEvents();
        }
        catch (error) {
            toast({
                variant: 'destructive',
                title: 'Erro',
                description: 'Não foi possível ocultar o evento.',
            });
        }
    };
    // --------------------------------------------------
    // UPLOAD DE FOTO
    // --------------------------------------------------
    const handlePhotoUpload = async (eventId) => {
        const file = fileInputRef.current?.files?.[0];
        if (!file)
            return;
        setUploading((prev) => ({ ...prev, [eventId]: true }));
        try {
            const result = await EventPhotosService_1.default.uploadEventPhoto(eventId, user.id, file);
            if (result.success) {
                toast({ title: 'Foto enviada!', description: 'Sua foto foi publicada no evento.' });
            }
            else {
                toast({ variant: 'destructive', title: 'Erro', description: result.error });
            }
        }
        catch (err) {
            toast({ variant: 'destructive', title: 'Erro', description: 'Falha no upload da foto.' });
        }
        finally {
            setUploading((prev) => ({ ...prev, [eventId]: false }));
            if (fileInputRef.current)
                fileInputRef.current.value = '';
        }
    };
    // --------------------------------------------------
    // PODE ENVIAR FOTO?
    // --------------------------------------------------
    const canUploadPhoto = (event) => {
        if (!['Finalizado', 'Concluído'].includes(event.status))
            return false;
        const stats = eventStats[event.id];
        if (!stats?.participants || !Array.isArray(stats.participants))
            return false;
        const myParticipation = stats.participants.find((p) => p.user_id === user.id);
        if (!myParticipation?.presenca_confirmada)
            return false;
        const monthsSinceEnd = (0, date_fns_1.differenceInMonths)(new Date(), new Date(event.end_time));
        return monthsSinceEnd < 6;
    };
    // --------------------------------------------------
    // DEVE MOSTRAR SENHA? (1 min antes de começar até 1 min antes de acabar)
    // --------------------------------------------------
    const shouldShowPassword = (event) => {
        if (!event.event_entry_password)
            return false;
        const now = new Date();
        const startTime = new Date(event.start_time);
        const endTime = new Date(event.end_time);
        // 1 minuto antes de começar
        const oneMinuteBeforeStart = new Date(startTime.getTime() - 60 * 1000);
        // 1 minuto antes de acabar
        const oneMinuteBeforeEnd = new Date(endTime.getTime() - 60 * 1000);
        // Está no período correto?
        return now >= oneMinuteBeforeStart && now < oneMinuteBeforeEnd;
    };
    // --------------------------------------------------
    // LOADING
    // --------------------------------------------------
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center min-h-screen", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Loader, { className: "w-12 h-12 text-white/40 animate-spin" }) }));
    }
    // --------------------------------------------------
    // FILTROS
    // --------------------------------------------------
    const filters = [
        { value: 'futuros', label: 'Futuros' },
        { value: 'passados', label: 'Passados' },
        { value: 'finalizados', label: 'Finalizados' },
        { value: 'concluidos', label: 'Concluídos' },
    ];
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)(react_helmet_async_1.Helmet, { children: [(0, jsx_runtime_1.jsx)("title", { children: "Meus Eventos - Mesapra2" }), (0, jsx_runtime_1.jsx)("meta", { name: "description", content: "Gerencie seus eventos criados no Mesapra2" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "py-6 px-4 sm:px-6 lg:px-8 space-y-6 max-w-7xl mx-auto", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between gap-4", children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-3xl font-bold text-white", children: "Meus Eventos" }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: "/criar-evento", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { className: "bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: "w-5 h-5 mr-2" }), " Criar Evento"] }) })] }), (0, jsx_runtime_1.jsx)("div", { className: "flex gap-2 flex-wrap", children: filters.map((f) => ((0, jsx_runtime_1.jsx)(button_1.Button, { variant: filter === f.value ? 'default' : 'outline', onClick: () => setFilter(f.value), className: filter === f.value
                                ? 'bg-gradient-to-r from-purple-500 to-pink-500'
                                : 'glass-effect border-white/10', children: f.label }, f.value))) }), error && ((0, jsx_runtime_1.jsx)("div", { className: "bg-red-500/10 border border-red-500/20 rounded-2xl p-6", children: (0, jsx_runtime_1.jsx)("p", { className: "text-red-200", children: error }) })), filteredEvents.length > 0 ? ((0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: filteredEvents.map((event, index) => {
                            const stats = eventStats[event.id] || {};
                            const participants = Array.isArray(stats.participants) ? stats.participants : [];
                            const isFinalized = event.status === 'Finalizado';
                            const isConcluded = event.status === 'Concluído';
                            const canUpload = canUploadPhoto(event);
                            const isUploading = uploading[event.id];
                            const showPassword = shouldShowPassword(event);
                            return ((0, jsx_runtime_1.jsxs)(framer_motion_1.motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: index * 0.05 }, className: "glass-effect rounded-2xl p-6 border border-white/10 hover:border-white/20 transition-all h-full flex flex-col justify-between", children: [(0, jsx_runtime_1.jsx)("div", { className: "mb-4", children: (0, jsx_runtime_1.jsx)("span", { className: `px-3 py-1 rounded-full text-xs font-semibold ${isConcluded
                                                ? 'bg-green-500/20 text-green-300'
                                                : isFinalized
                                                    ? 'bg-yellow-500/20 text-yellow-300'
                                                    : 'bg-blue-500/20 text-blue-300'}`, children: event.status }) }), showPassword && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-4 p-4 rounded-xl bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-2 border-purple-400/40 animate-pulse", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2 mb-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Key, { className: "w-5 h-5 text-purple-300" }), (0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-bold text-purple-200", children: "Senha do Evento" })] }), (0, jsx_runtime_1.jsx)("div", { className: "bg-black/30 rounded-lg p-3 text-center", children: (0, jsx_runtime_1.jsx)("p", { className: "text-3xl font-mono font-bold text-white tracking-widest", children: event.event_entry_password }) }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-purple-200/80 mt-2 text-center", children: "Compartilhe esta senha com os participantes para iniciar o evento" })] })), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-bold text-white mb-2", children: event.title }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-white/60 mb-4 line-clamp-2", children: event.description }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2 text-sm text-white/60", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: "w-4 h-4" }), (0, date_fns_1.format)(new Date(event.start_time), "dd/MM 'às' HH:mm", { locale: locale_1.ptBR })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: "w-4 h-4" }), "at\u00E9 ", (0, date_fns_1.format)(new Date(event.end_time), 'HH:mm', { locale: locale_1.ptBR })] }), event.partner && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.MapPin, { className: "w-4 h-4" }), event.partner.name] })), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "w-4 h-4" }), event.vagas, " vagas"] })] })] }), isFinalized && participants.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "my-4 p-3 rounded-lg bg-white/5 border border-white/10", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-xs text-white/60 mb-2", children: "Avalia\u00E7\u00F5es:" }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.CheckCircle, { className: "w-4 h-4 text-yellow-400" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm text-white", children: [participants.filter((p) => p.avaliacao_feita).length, " de", ' ', participants.filter((p) => p.presenca_confirmada).length, " avaliados"] })] }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-white/50 mt-2", children: "Ser\u00E1 conclu\u00EDdo automaticamente quando todos avaliarem ou em 7 dias" })] })), isConcluded && ((0, jsx_runtime_1.jsx)("div", { className: "my-4 p-3 rounded-lg bg-green-500/10 border border-green-500/20", children: (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-green-200", children: "Evento conclu\u00EDdo com sucesso!" }) })), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2 pt-4 border-t border-white/10", children: [!isConcluded && ((0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: `/event/${event.id}/editar`, className: "flex-1", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", className: "w-full border-white/20", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Edit, { className: "w-4 h-4 mr-2" }), " Editar"] }) }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: `/event/${event.id}`, className: "flex-1", children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "outline", className: "w-full border-white/20", children: "Ver Detalhes" }) })] })), isConcluded && ((0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: `/event/${event.id}`, className: "flex-1", children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "outline", className: "w-full border-white/20", children: "Ver Detalhes" }) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "ghost", onClick: () => handleHideEvent(event.id), className: "flex-1 text-purple-400 hover:bg-purple-500/10", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { className: "w-4 h-4 mr-1" }), " Ocultar"] })] })), (isFinalized || isConcluded) && ((0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2", children: [(0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: `/event/${event.id}`, className: "flex-1", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { className: "w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { className: "w-4 h-4 mr-2" }), "Qualificar"] }) }), canUpload && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)("input", { ref: fileInputRef, type: "file", accept: "image/*", className: "hidden", onChange: () => handlePhotoUpload(event.id) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", className: "flex-1 border-white/20", onClick: () => fileInputRef.current?.click(), disabled: isUploading, children: [isUploading ? ((0, jsx_runtime_1.jsx)(lucide_react_1.Loader, { className: "w-4 h-4 mr-2 animate-spin" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.Camera, { className: "w-4 h-4 mr-2" })), isUploading ? 'Enviando...' : 'Foto'] })] }))] }))] })] }, event.id));
                        }) })) : (
                    // Sem eventos
                    (0, jsx_runtime_1.jsxs)("div", { className: "glass-effect rounded-2xl p-12 border border-white/10 text-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertCircle, { className: "w-16 h-16 text-white/20 mx-auto mb-4" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60 text-lg mb-4", children: events.length === 0
                                    ? 'Você não criou eventos ainda'
                                    : `Nenhum evento ${filter === 'futuros'
                                        ? 'futuro'
                                        : filter === 'passados'
                                            ? 'passado'
                                            : filter === 'finalizados'
                                                ? 'finalizado'
                                                : 'concluído'}` }), (0, jsx_runtime_1.jsx)(react_router_dom_1.Link, { to: "/criar-evento", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { className: "bg-gradient-to-r from-purple-500 to-pink-500", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: "w-5 h-5 mr-2" }), " Criar Evento"] }) })] }))] })] }));
};
exports.default = MyEventsPage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxmZWF0dXJlc1xcc2hhcmVkXFxwYWdlc1xcTXlFdmVudHNQYWdlLmpzeCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsNkNBQTZDO0FBQzdDLGlDQUFpRTtBQUNqRSwyREFBNEM7QUFDNUMsaURBQXVDO0FBQ3ZDLHVEQUF3QztBQUN4QywrQ0Fjc0I7QUFDdEIsbUVBQWdFO0FBQ2hFLHlEQUFnRDtBQUNoRCx1Q0FBc0Q7QUFDdEQsNENBQXVDO0FBQ3ZDLHdEQUFpRDtBQUNqRCx5RUFBcUU7QUFDckUsK0ZBQStEO0FBQy9ELCtGQUErRDtBQUUvRCxNQUFNLFlBQVksR0FBRyxHQUFHLEVBQUU7SUFDeEIsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLElBQUEscUJBQU8sR0FBRSxDQUFDO0lBQzNCLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFBLG9CQUFRLEdBQUUsQ0FBQztJQUM3QixNQUFNLFlBQVksR0FBRyxJQUFBLGNBQU0sRUFBQyxJQUFJLENBQUMsQ0FBQztJQUVsQyxNQUFNLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUN6QyxNQUFNLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2hELE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxD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Q0FBQyxHQUNFLENBQ1AsQ0FBQyxDQUFDLENBQUM7b0JBQ0YsY0FBYztvQkFDZCxpQ0FBSyxTQUFTLEVBQUMsa0VBQWtFLGFBQy9FLHVCQUFDLDBCQUFXLElBQUMsU0FBUyxFQUFDLHNDQUFzQyxHQUFHLEVBQ2hFLDhCQUFHLFNBQVMsRUFBQyw0QkFBNEIsWUFDdEMsTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDO29DQUNsQixDQUFDLENBQUMsOEJBQThCO29DQUNoQyxDQUFDLENBQUMsaUJBQ0UsTUFBTSxLQUFLLFNBQVM7d0NBQ2xCLENBQUMsQ0FBQyxRQUFRO3dDQUNWLENBQUMsQ0FBQyxNQUFNLEtBQUssVUFBVTs0Q0FDdkIsQ0FBQyxDQUFDLFNBQVM7NENBQ1gsQ0FBQyxDQUFDLE1BQU0sS0FBSyxhQUFhO2dEQUMxQixDQUFDLENBQUMsWUFBWTtnREFDZCxDQUFDLENBQUMsV0FDTixFQUFFLEdBQ0osRUFDSix1QkFBQyx1QkFBSSxJQUFDLEVBQUUsRUFBQyxlQUFlLFlBQ3RCLHdCQUFDLGVBQU0sSUFBQyxTQUFTLEVBQUMsOENBQThDLGFBQzlELHVCQUFDLG1CQUFJLElBQUMsU0FBUyxFQUFDLGNBQWMsR0FBRyxxQkFDMUIsR0FDSixJQUNILENBQ1AsSUFDRyxJQUNMLENBQ0osQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGtCQUFlLFlBQVksQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcREVWTWl4XFxBcHAuTWVzYXByYTIuY29tXFxzcmNcXGZlYXR1cmVzXFxzaGFyZWRcXHBhZ2VzXFxNeUV2ZW50c1BhZ2UuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9mZWF0dXJlcy9zaGFyZWQvcGFnZXMvTXlFdmVudHNQYWdlLmpzeFxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBIZWxtZXQgfSBmcm9tICdyZWFjdC1oZWxtZXQtYXN5bmMnO1xyXG5pbXBvcnQgeyBtb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQge1xyXG4gIENhbGVuZGFyLFxyXG4gIFVzZXJzLFxyXG4gIE1hcFBpbixcclxuICBDbG9jayxcclxuICBQbHVzLFxyXG4gIEVkaXQsXHJcbiAgRXllT2ZmLFxyXG4gIENhbWVyYSxcclxuICBDaGVja0NpcmNsZSxcclxuICBBbGVydENpcmNsZSxcclxuICBMb2FkZXIsXHJcbiAgU3RhcixcclxuICBLZXksXHJcbn0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9mZWF0dXJlcy9zaGFyZWQvY29tcG9uZW50cy91aS9idXR0b24nO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlQ2xpZW50JztcclxuaW1wb3J0IHsgZm9ybWF0LCBkaWZmZXJlbmNlSW5Nb250aHMgfSBmcm9tICdkYXRlLWZucyc7XHJcbmltcG9ydCB7IHB0QlIgfSBmcm9tICdkYXRlLWZucy9sb2NhbGUnO1xyXG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9jb250ZXh0cy9BdXRoQ29udGV4dCc7XHJcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9mZWF0dXJlcy9zaGFyZWQvY29tcG9uZW50cy91aS91c2UtdG9hc3QnO1xyXG5pbXBvcnQgRXZlbnRTdGF0dXNTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvRXZlbnRTdGF0dXNTZXJ2aWNlJztcclxuaW1wb3J0IEV2ZW50UGhvdG9zU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL0V2ZW50UGhvdG9zU2VydmljZSc7XHJcblxyXG5jb25zdCBNeUV2ZW50c1BhZ2UgPSAoKSA9PiB7XHJcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoKCk7XHJcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcclxuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIGNvbnN0IFtldmVudHMsIHNldEV2ZW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2ZpbHRlcmVkRXZlbnRzLCBzZXRGaWx0ZXJlZEV2ZW50c10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2ZpbHRlciwgc2V0RmlsdGVyXSA9IHVzZVN0YXRlKCdmdXR1cm9zJyk7XHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbZXZlbnRTdGF0cywgc2V0RXZlbnRTdGF0c10gPSB1c2VTdGF0ZSh7fSk7XHJcbiAgY29uc3QgW3VwbG9hZGluZywgc2V0VXBsb2FkaW5nXSA9IHVzZVN0YXRlKHt9KTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBDQVJSRUdBUiBFVkVOVE9TIERPIFVTVcOBUklPIExPR0FET1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3QgbG9hZEV2ZW50cyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghdXNlcj8uaWQpIHJldHVybjtcclxuICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBzZXRFcnJvcihudWxsKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2V2ZW50cycpXHJcbiAgICAgICAgLnNlbGVjdChcclxuICAgICAgICAgIGBcclxuICAgICAgICAgICosXHJcbiAgICAgICAgICBwYXJ0bmVyOnBhcnRuZXJzKGlkLCBuYW1lLCBhZGRyZXNzKSxcclxuICAgICAgICAgIGNyZWF0b3I6cHJvZmlsZXMhZXZlbnRzX2NyZWF0b3JfaWRfZmtleShcclxuICAgICAgICAgICAgaWQsIHVzZXJuYW1lLCBhdmF0YXJfdXJsLCBmdWxsX25hbWUsIHB1YmxpY19wcm9maWxlXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgYCxcclxuICAgICAgICApXHJcbiAgICAgICAgLmVxKCdjcmVhdG9yX2lkJywgdXNlci5pZClcclxuICAgICAgICAuZXEoJ2hpZGRlbicsIGZhbHNlKVxyXG4gICAgICAgIC5vcmRlcignc3RhcnRfdGltZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChmZXRjaEVycm9yKSB0aHJvdyBmZXRjaEVycm9yO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnRzRGF0YSA9IGRhdGEgfHwgW107XHJcbiAgICAgIHNldEV2ZW50cyhldmVudHNEYXRhKTtcclxuICAgICAgYXdhaXQgbG9hZEV2ZW50U3RhdHMoZXZlbnRzRGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjYXJyZWdhciBldmVudG9zOicsIGVycik7XHJcbiAgICAgIHNldEVycm9yKCdFcnJvIGFvIGNhcnJlZ2FyIHNldXMgZXZlbnRvcy4gVGVudGUgbm92YW1lbnRlLicpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW3VzZXI/LmlkXSk7XHJcblxyXG4gIC8vIGNhcnJlZ2EgYXNzaW0gcXVlIHRpdmVyIHVzZXIgZSBxdWFuZG8gbG9hZEV2ZW50cyBtdWRhclxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAodXNlcj8uaWQpIHtcclxuICAgICAgbG9hZEV2ZW50cygpO1xyXG4gICAgfVxyXG4gIH0sIFt1c2VyPy5pZCwgbG9hZEV2ZW50c10pO1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIENBUlJFR0FSIEVTVEFUw41TVElDQVMgREUgUEFSVElDSVBBw4fDg09cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0IGxvYWRFdmVudFN0YXRzID0gYXN5bmMgKGV2ZW50TGlzdCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhdHMgPSB7fTtcclxuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgZXZlbnRMaXN0KSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEV2ZW50U3RhdHVzU2VydmljZS5nZXRFdmVudFN0YXRzKGV2ZW50LmlkKTtcclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5kYXRhPy5wYXJ0aWNpcGFudHMpIHtcclxuICAgICAgICBzdGF0c1tldmVudC5pZF0gPSByZXN1bHQuZGF0YTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRTdGF0cyhzdGF0cyk7XHJcbiAgfTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBGSUxUUkFSIEVWRU5UT1NcclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0IGZpbHRlckV2ZW50cyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBsZXQgZmlsdGVyZWQgPSBldmVudHM7XHJcblxyXG4gICAgc3dpdGNoIChmaWx0ZXIpIHtcclxuICAgICAgY2FzZSAnZnV0dXJvcyc6XHJcbiAgICAgICAgZmlsdGVyZWQgPSBldmVudHMuZmlsdGVyKChlKSA9PiBuZXcgRGF0ZShlLmVuZF90aW1lKSA+PSBub3cpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdwYXNzYWRvcyc6XHJcbiAgICAgICAgZmlsdGVyZWQgPSBldmVudHMuZmlsdGVyKChlKSA9PiBuZXcgRGF0ZShlLmVuZF90aW1lKSA8IG5vdyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2ZpbmFsaXphZG9zJzpcclxuICAgICAgICBmaWx0ZXJlZCA9IGV2ZW50cy5maWx0ZXIoKGUpID0+IGUuc3RhdHVzID09PSAnRmluYWxpemFkbycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdjb25jbHVpZG9zJzpcclxuICAgICAgICBmaWx0ZXJlZCA9IGV2ZW50cy5maWx0ZXIoKGUpID0+IGUuc3RhdHVzID09PSAnQ29uY2x1w61kbycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGZpbHRlcmVkID0gZXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEZpbHRlcmVkRXZlbnRzKGZpbHRlcmVkKTtcclxuICB9LCBbZXZlbnRzLCBmaWx0ZXJdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGZpbHRlckV2ZW50cygpO1xyXG4gIH0sIFtmaWx0ZXJFdmVudHNdKTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBPQ1VMVEFSIEVWRU5UT1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3QgaGFuZGxlSGlkZUV2ZW50ID0gYXN5bmMgKGV2ZW50SWQpID0+IHtcclxuICAgIGlmICghd2luZG93LmNvbmZpcm0oJ1RlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgb2N1bHRhciBlc3RlIGV2ZW50bz8gRWxlIG7Do28gYXBhcmVjZXLDoSBtYWlzIG5vIHNldSBoaXN0w7NyaWNvLicpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdldmVudHMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBoaWRkZW46IHRydWUgfSlcclxuICAgICAgICAuZXEoJ2lkJywgZXZlbnRJZCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgICAgdG9hc3Qoe1xyXG4gICAgICAgIHRpdGxlOiAnRXZlbnRvIG9jdWx0YWRvJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ08gZXZlbnRvIGZvaSByZW1vdmlkbyBkbyBzZXUgaGlzdMOzcmljby4nLFxyXG4gICAgICB9KTtcclxuICAgICAgYXdhaXQgbG9hZEV2ZW50cygpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdG9hc3Qoe1xyXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXHJcbiAgICAgICAgdGl0bGU6ICdFcnJvJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ07Do28gZm9pIHBvc3PDrXZlbCBvY3VsdGFyIG8gZXZlbnRvLicsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gVVBMT0FEIERFIEZPVE9cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0IGhhbmRsZVBob3RvVXBsb2FkID0gYXN5bmMgKGV2ZW50SWQpID0+IHtcclxuICAgIGNvbnN0IGZpbGUgPSBmaWxlSW5wdXRSZWYuY3VycmVudD8uZmlsZXM/LlswXTtcclxuICAgIGlmICghZmlsZSkgcmV0dXJuO1xyXG5cclxuICAgIHNldFVwbG9hZGluZygocHJldikgPT4gKHsgLi4ucHJldiwgW2V2ZW50SWRdOiB0cnVlIH0pKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBFdmVudFBob3Rvc1NlcnZpY2UudXBsb2FkRXZlbnRQaG90byhldmVudElkLCB1c2VyLmlkLCBmaWxlKTtcclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgdG9hc3QoeyB0aXRsZTogJ0ZvdG8gZW52aWFkYSEnLCBkZXNjcmlwdGlvbjogJ1N1YSBmb3RvIGZvaSBwdWJsaWNhZGEgbm8gZXZlbnRvLicgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9hc3QoeyB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLCB0aXRsZTogJ0Vycm8nLCBkZXNjcmlwdGlvbjogcmVzdWx0LmVycm9yIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgdG9hc3QoeyB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLCB0aXRsZTogJ0Vycm8nLCBkZXNjcmlwdGlvbjogJ0ZhbGhhIG5vIHVwbG9hZCBkYSBmb3RvLicgfSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRVcGxvYWRpbmcoKHByZXYpID0+ICh7IC4uLnByZXYsIFtldmVudElkXTogZmFsc2UgfSkpO1xyXG4gICAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJyc7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBQT0RFIEVOVklBUiBGT1RPP1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3QgY2FuVXBsb2FkUGhvdG8gPSAoZXZlbnQpID0+IHtcclxuICAgIGlmICghWydGaW5hbGl6YWRvJywgJ0NvbmNsdcOtZG8nXS5pbmNsdWRlcyhldmVudC5zdGF0dXMpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSBldmVudFN0YXRzW2V2ZW50LmlkXTtcclxuICAgIGlmICghc3RhdHM/LnBhcnRpY2lwYW50cyB8fCAhQXJyYXkuaXNBcnJheShzdGF0cy5wYXJ0aWNpcGFudHMpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgbXlQYXJ0aWNpcGF0aW9uID0gc3RhdHMucGFydGljaXBhbnRzLmZpbmQoKHApID0+IHAudXNlcl9pZCA9PT0gdXNlci5pZCk7XHJcbiAgICBpZiAoIW15UGFydGljaXBhdGlvbj8ucHJlc2VuY2FfY29uZmlybWFkYSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IG1vbnRoc1NpbmNlRW5kID0gZGlmZmVyZW5jZUluTW9udGhzKG5ldyBEYXRlKCksIG5ldyBEYXRlKGV2ZW50LmVuZF90aW1lKSk7XHJcbiAgICByZXR1cm4gbW9udGhzU2luY2VFbmQgPCA2O1xyXG4gIH07XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gREVWRSBNT1NUUkFSIFNFTkhBPyAoMSBtaW4gYW50ZXMgZGUgY29tZcOnYXIgYXTDqSAxIG1pbiBhbnRlcyBkZSBhY2FiYXIpXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25zdCBzaG91bGRTaG93UGFzc3dvcmQgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmICghZXZlbnQuZXZlbnRfZW50cnlfcGFzc3dvcmQpIHJldHVybiBmYWxzZTtcclxuICAgIFxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKGV2ZW50LnN0YXJ0X3RpbWUpO1xyXG4gICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKGV2ZW50LmVuZF90aW1lKTtcclxuICAgIFxyXG4gICAgLy8gMSBtaW51dG8gYW50ZXMgZGUgY29tZcOnYXJcclxuICAgIGNvbnN0IG9uZU1pbnV0ZUJlZm9yZVN0YXJ0ID0gbmV3IERhdGUoc3RhcnRUaW1lLmdldFRpbWUoKSAtIDYwICogMTAwMCk7XHJcbiAgICBcclxuICAgIC8vIDEgbWludXRvIGFudGVzIGRlIGFjYWJhclxyXG4gICAgY29uc3Qgb25lTWludXRlQmVmb3JlRW5kID0gbmV3IERhdGUoZW5kVGltZS5nZXRUaW1lKCkgLSA2MCAqIDEwMDApO1xyXG4gICAgXHJcbiAgICAvLyBFc3TDoSBubyBwZXLDrW9kbyBjb3JyZXRvP1xyXG4gICAgcmV0dXJuIG5vdyA+PSBvbmVNaW51dGVCZWZvcmVTdGFydCAmJiBub3cgPCBvbmVNaW51dGVCZWZvcmVFbmQ7XHJcbiAgfTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBMT0FESU5HXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBpZiAobG9hZGluZykge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtaW4taC1zY3JlZW5cIj5cclxuICAgICAgICA8TG9hZGVyIGNsYXNzTmFtZT1cInctMTIgaC0xMiB0ZXh0LXdoaXRlLzQwIGFuaW1hdGUtc3BpblwiIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gRklMVFJPU1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3QgZmlsdGVycyA9IFtcclxuICAgIHsgdmFsdWU6ICdmdXR1cm9zJywgbGFiZWw6ICdGdXR1cm9zJyB9LFxyXG4gICAgeyB2YWx1ZTogJ3Bhc3NhZG9zJywgbGFiZWw6ICdQYXNzYWRvcycgfSxcclxuICAgIHsgdmFsdWU6ICdmaW5hbGl6YWRvcycsIGxhYmVsOiAnRmluYWxpemFkb3MnIH0sXHJcbiAgICB7IHZhbHVlOiAnY29uY2x1aWRvcycsIGxhYmVsOiAnQ29uY2x1w61kb3MnIH0sXHJcbiAgXTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIDxIZWxtZXQ+XHJcbiAgICAgICAgPHRpdGxlPk1ldXMgRXZlbnRvcyAtIE1lc2FwcmEyPC90aXRsZT5cclxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiR2VyZW5jaWUgc2V1cyBldmVudG9zIGNyaWFkb3Mgbm8gTWVzYXByYTJcIiAvPlxyXG4gICAgICA8L0hlbG1ldD5cclxuXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHktNiBweC00IHNtOnB4LTYgbGc6cHgtOCBzcGFjZS15LTYgbWF4LXctN3hsIG14LWF1dG9cIj5cclxuICAgICAgICB7LyogQ2FiZcOnYWxobyAqL31cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtNFwiPlxyXG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlXCI+TWV1cyBFdmVudG9zPC9oMT5cclxuICAgICAgICAgIDxMaW5rIHRvPVwiL2NyaWFyLWV2ZW50b1wiPlxyXG4gICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNTAwIHRvLXBpbmstNTAwIGhvdmVyOmZyb20tcHVycGxlLTYwMCBob3Zlcjp0by1waW5rLTYwMFwiPlxyXG4gICAgICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT1cInctNSBoLTUgbXItMlwiIC8+IENyaWFyIEV2ZW50b1xyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgey8qIEZpbHRyb3MgKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yIGZsZXgtd3JhcFwiPlxyXG4gICAgICAgICAge2ZpbHRlcnMubWFwKChmKSA9PiAoXHJcbiAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICBrZXk9e2YudmFsdWV9XHJcbiAgICAgICAgICAgICAgdmFyaWFudD17ZmlsdGVyID09PSBmLnZhbHVlID8gJ2RlZmF1bHQnIDogJ291dGxpbmUnfVxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEZpbHRlcihmLnZhbHVlKX1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyID09PSBmLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNTAwIHRvLXBpbmstNTAwJ1xyXG4gICAgICAgICAgICAgICAgICA6ICdnbGFzcy1lZmZlY3QgYm9yZGVyLXdoaXRlLzEwJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHtmLmxhYmVsfVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICkpfVxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICB7LyogRXJybyAqL31cclxuICAgICAgICB7ZXJyb3IgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAwLzEwIGJvcmRlciBib3JkZXItcmVkLTUwMC8yMCByb3VuZGVkLTJ4bCBwLTZcIj5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtMjAwXCI+e2Vycm9yfTwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcblxyXG4gICAgICAgIHsvKiBHcmlkIGRlIEV2ZW50b3MgKi99XHJcbiAgICAgICAge2ZpbHRlcmVkRXZlbnRzLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTMgZ2FwLTZcIj5cclxuICAgICAgICAgICAge2ZpbHRlcmVkRXZlbnRzLm1hcCgoZXZlbnQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBldmVudFN0YXRzW2V2ZW50LmlkXSB8fCB7fTtcclxuICAgICAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBBcnJheS5pc0FycmF5KHN0YXRzLnBhcnRpY2lwYW50cykgPyBzdGF0cy5wYXJ0aWNpcGFudHMgOiBbXTtcclxuICAgICAgICAgICAgICBjb25zdCBpc0ZpbmFsaXplZCA9IGV2ZW50LnN0YXR1cyA9PT0gJ0ZpbmFsaXphZG8nO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGlzQ29uY2x1ZGVkID0gZXZlbnQuc3RhdHVzID09PSAnQ29uY2x1w61kbyc7XHJcbiAgICAgICAgICAgICAgY29uc3QgY2FuVXBsb2FkID0gY2FuVXBsb2FkUGhvdG8oZXZlbnQpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGlzVXBsb2FkaW5nID0gdXBsb2FkaW5nW2V2ZW50LmlkXTtcclxuICAgICAgICAgICAgICBjb25zdCBzaG93UGFzc3dvcmQgPSBzaG91bGRTaG93UGFzc3dvcmQoZXZlbnQpO1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPG1vdGlvbi5kaXZcclxuICAgICAgICAgICAgICAgICAga2V5PXtldmVudC5pZH1cclxuICAgICAgICAgICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB5OiAyMCB9fVxyXG4gICAgICAgICAgICAgICAgICBhbmltYXRlPXt7IG9wYWNpdHk6IDEsIHk6IDAgfX1cclxuICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbj17eyBkZWxheTogaW5kZXggKiAwLjA1IH19XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdsYXNzLWVmZmVjdCByb3VuZGVkLTJ4bCBwLTYgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCBob3Zlcjpib3JkZXItd2hpdGUvMjAgdHJhbnNpdGlvbi1hbGwgaC1mdWxsIGZsZXggZmxleC1jb2wganVzdGlmeS1iZXR3ZWVuXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgey8qIFN0YXR1cyAqL31cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTMgcHktMSByb3VuZGVkLWZ1bGwgdGV4dC14cyBmb250LXNlbWlib2xkICR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29uY2x1ZGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctZ3JlZW4tNTAwLzIwIHRleHQtZ3JlZW4tMzAwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogaXNGaW5hbGl6ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy15ZWxsb3ctNTAwLzIwIHRleHQteWVsbG93LTMwMCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1ibHVlLTUwMC8yMCB0ZXh0LWJsdWUtMzAwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAge2V2ZW50LnN0YXR1c31cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIPCflJEgU0VOSEEgRE8gRVZFTlRPIChtb3N0cmEgMSBtaW4gYW50ZXMgZGUgY29tZcOnYXIgYXTDqSAxIG1pbiBhbnRlcyBkZSBhY2FiYXIpICovfVxyXG4gICAgICAgICAgICAgICAgICB7c2hvd1Bhc3N3b3JkICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgcC00IHJvdW5kZWQteGwgYmctZ3JhZGllbnQtdG8tciBmcm9tLXB1cnBsZS01MDAvMjAgdG8tcGluay01MDAvMjAgYm9yZGVyLTIgYm9yZGVyLXB1cnBsZS00MDAvNDAgYW5pbWF0ZS1wdWxzZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxLZXkgY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LXB1cnBsZS0zMDBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LWJvbGQgdGV4dC1wdXJwbGUtMjAwXCI+U2VuaGEgZG8gRXZlbnRvPC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibGFjay8zMCByb3VuZGVkLWxnIHAtMyB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LW1vbm8gZm9udC1ib2xkIHRleHQtd2hpdGUgdHJhY2tpbmctd2lkZXN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge2V2ZW50LmV2ZW50X2VudHJ5X3Bhc3N3b3JkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1wdXJwbGUtMjAwLzgwIG10LTIgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29tcGFydGlsaGUgZXN0YSBzZW5oYSBjb20gb3MgcGFydGljaXBhbnRlcyBwYXJhIGluaWNpYXIgbyBldmVudG9cclxuICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBDb250ZcO6ZG8gKi99XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtd2hpdGUgbWItMlwiPntldmVudC50aXRsZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC13aGl0ZS82MCBtYi00IGxpbmUtY2xhbXAtMlwiPntldmVudC5kZXNjcmlwdGlvbn08L3A+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yIHRleHQtc20gdGV4dC13aGl0ZS82MFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXQobmV3IERhdGUoZXZlbnQuc3RhcnRfdGltZSksIFwiZGQvTU0gJ8OgcycgSEg6bW1cIiwgeyBsb2NhbGU6IHB0QlIgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPENsb2NrIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdMOpIHtmb3JtYXQobmV3IERhdGUoZXZlbnQuZW5kX3RpbWUpLCAnSEg6bW0nLCB7IGxvY2FsZTogcHRCUiB9KX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAge2V2ZW50LnBhcnRuZXIgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPE1hcFBpbiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXZlbnQucGFydG5lci5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VycyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2V2ZW50LnZhZ2FzfSB2YWdhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIEF2YWxpYcOnw7VlcyAoRmluYWxpemFkbykgKi99XHJcbiAgICAgICAgICAgICAgICAgIHtpc0ZpbmFsaXplZCAmJiBwYXJ0aWNpcGFudHMubGVuZ3RoID4gMCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteS00IHAtMyByb3VuZGVkLWxnIGJnLXdoaXRlLzUgYm9yZGVyIGJvcmRlci13aGl0ZS8xMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXdoaXRlLzYwIG1iLTJcIj5BdmFsaWHDp8O1ZXM6PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LXllbGxvdy00MDBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtd2hpdGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7cGFydGljaXBhbnRzLmZpbHRlcigocCkgPT4gcC5hdmFsaWFjYW9fZmVpdGEpLmxlbmd0aH0gZGV7JyAnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtwYXJ0aWNpcGFudHMuZmlsdGVyKChwKSA9PiBwLnByZXNlbmNhX2NvbmZpcm1hZGEpLmxlbmd0aH0gYXZhbGlhZG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXdoaXRlLzUwIG10LTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgU2Vyw6EgY29uY2x1w61kbyBhdXRvbWF0aWNhbWVudGUgcXVhbmRvIHRvZG9zIGF2YWxpYXJlbSBvdSBlbSA3IGRpYXNcclxuICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBDb25jbHXDrWRvICovfVxyXG4gICAgICAgICAgICAgICAgICB7aXNDb25jbHVkZWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXktNCBwLTMgcm91bmRlZC1sZyBiZy1ncmVlbi01MDAvMTAgYm9yZGVyIGJvcmRlci1ncmVlbi01MDAvMjBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmVlbi0yMDBcIj5FdmVudG8gY29uY2x1w61kbyBjb20gc3VjZXNzbyE8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICB7LyogQcOnw7VlcyAqL31cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTIgcHQtNCBib3JkZXItdCBib3JkZXItd2hpdGUvMTBcIj5cclxuICAgICAgICAgICAgICAgICAgICB7LyogUHJpbWVpcmEgbGluaGE6IEVkaXRhciArIFZlciBEZXRhbGhlcyAobsOjbyBjb25jbHXDrWRvKSAqL31cclxuICAgICAgICAgICAgICAgICAgICB7IWlzQ29uY2x1ZGVkICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGluayB0bz17YC9ldmVudC8ke2V2ZW50LmlkfS9lZGl0YXJgfSBjbGFzc05hbWU9XCJmbGV4LTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJvdXRsaW5lXCIgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlci13aGl0ZS8yMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVkaXQgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgLz4gRWRpdGFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvZXZlbnQvJHtldmVudC5pZH1gfSBjbGFzc05hbWU9XCJmbGV4LTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJvdXRsaW5lXCIgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlci13aGl0ZS8yMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyIERldGFsaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBDb25jbHXDrWRvOiBWZXIgKyBPY3VsdGFyICovfVxyXG4gICAgICAgICAgICAgICAgICAgIHtpc0NvbmNsdWRlZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvZXZlbnQvJHtldmVudC5pZH1gfSBjbGFzc05hbWU9XCJmbGV4LTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJvdXRsaW5lXCIgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlci13aGl0ZS8yMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyIERldGFsaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlSGlkZUV2ZW50KGV2ZW50LmlkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgdGV4dC1wdXJwbGUtNDAwIGhvdmVyOmJnLXB1cnBsZS01MDAvMTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEV5ZU9mZiBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTFcIiAvPiBPY3VsdGFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgey8qIFNlZ3VuZGEgbGluaGE6IFF1YWxpZmljYXIgKyBGb3RvICovfVxyXG4gICAgICAgICAgICAgICAgICAgIHsoaXNGaW5hbGl6ZWQgfHwgaXNDb25jbHVkZWQpICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TGluayB0bz17YC9ldmVudC8ke2V2ZW50LmlkfWB9IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1ncmFkaWVudC10by1yIGZyb20teWVsbG93LTUwMCB0by1vcmFuZ2UtNTAwIGhvdmVyOmZyb20teWVsbG93LTYwMCBob3Zlcjp0by1vcmFuZ2UtNjAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0YXIgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1YWxpZmljYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIEJvdMOjbyBFbnZpYXIgRm90byAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAge2NhblVwbG9hZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IGhhbmRsZVBob3RvVXBsb2FkKGV2ZW50LmlkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIGJvcmRlci13aGl0ZS8yMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGxvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1VwbG9hZGluZyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TG9hZGVyIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMiBhbmltYXRlLXNwaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYW1lcmEgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzVXBsb2FkaW5nID8gJ0VudmlhbmRvLi4uJyA6ICdGb3RvJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgLy8gU2VtIGV2ZW50b3NcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ2xhc3MtZWZmZWN0IHJvdW5kZWQtMnhsIHAtMTIgYm9yZGVyIGJvcmRlci13aGl0ZS8xMCB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwidy0xNiBoLTE2IHRleHQtd2hpdGUvMjAgbXgtYXV0byBtYi00XCIgLz5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MCB0ZXh0LWxnIG1iLTRcIj5cclxuICAgICAgICAgICAgICB7ZXZlbnRzLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICAgICAgPyAnVm9jw6ogbsOjbyBjcmlvdSBldmVudG9zIGFpbmRhJ1xyXG4gICAgICAgICAgICAgICAgOiBgTmVuaHVtIGV2ZW50byAke1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlciA9PT0gJ2Z1dHVyb3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICA/ICdmdXR1cm8nXHJcbiAgICAgICAgICAgICAgICAgICAgICA6IGZpbHRlciA9PT0gJ3Bhc3NhZG9zJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgPyAncGFzc2FkbydcclxuICAgICAgICAgICAgICAgICAgICAgIDogZmlsdGVyID09PSAnZmluYWxpemFkb3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICA/ICdmaW5hbGl6YWRvJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgOiAnY29uY2x1w61kbydcclxuICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPExpbmsgdG89XCIvY3JpYXItZXZlbnRvXCI+XHJcbiAgICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9XCJiZy1ncmFkaWVudC10by1yIGZyb20tcHVycGxlLTUwMCB0by1waW5rLTUwMFwiPlxyXG4gICAgICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPVwidy01IGgtNSBtci0yXCIgLz4gQ3JpYXIgRXZlbnRvXHJcbiAgICAgICAgICAgICAgPC9CdXR0b24+XHJcbiAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC8+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE15RXZlbnRzUGFnZTsiXSwidmVyc2lvbiI6M30=