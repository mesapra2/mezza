{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\features\\shared\\pages\\PhoneVerificationPage.jsx","mappings":"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","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\features\\shared\\pages\\PhoneVerificationPage.jsx"],"sourcesContent":["// src/features/shared/pages/PhoneVerificationPage.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { motion } from 'framer-motion';\r\nimport { Smartphone, LogOut } from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { Button } from '@/features/shared/components/ui/button';\r\nimport { Input } from '@/features/shared/components/ui/input';\r\nimport { useToast } from '@/features/shared/components/ui/use-toast';\r\nimport authService from '@/services/authService';\r\n\r\nconst PhoneVerificationPage = () => {\r\n  const { user, profile, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { toast } = useToast();\r\n  \r\n  const [code, setCode] = useState(['', '', '', '', '', '']);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [canResend, setCanResend] = useState(false);\r\n  const [countdown, setCountdown] = useState(60);\r\n\r\n  // Se não estiver autenticado, redireciona para login\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/login', { replace: true });\r\n      return;\r\n    }\r\n\r\n    // ✅ Se o perfil NÃO TEM telefone, redireciona pro dashboard\r\n    // (usuários antigos não precisam verificar telefone)\r\n    if (profile && !profile.phone) {\r\n      console.log('⚠️ Usuário sem telefone cadastrado, redirecionando...');\r\n      const targetRoute = profile.isPartner ? '/partner/dashboard' : '/dashboard';\r\n      navigate(targetRoute, { replace: true });\r\n      return;\r\n    }\r\n\r\n    // Se já verificou o telefone, redireciona\r\n    if (profile && profile.phone_verified) {\r\n      console.log('✅ Telefone já verificado, redirecionando...');\r\n      const targetRoute = profile.isPartner ? '/partner/dashboard' : '/dashboard';\r\n      navigate(targetRoute, { replace: true });\r\n    }\r\n  }, [user, profile, navigate]);\r\n\r\n  // Countdown para reenvio\r\n  useEffect(() => {\r\n    if (countdown > 0) {\r\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\r\n      return () => clearTimeout(timer);\r\n    } else {\r\n      setCanResend(true);\r\n    }\r\n  }, [countdown]);\r\n\r\n  const handleCodeChange = (index, value) => {\r\n    if (value.length > 1) {\r\n      value = value.slice(-1);\r\n    }\r\n\r\n    const newCode = [...code];\r\n    newCode[index] = value;\r\n    setCode(newCode);\r\n\r\n    // Move para o próximo input automaticamente\r\n    if (value && index < 5) {\r\n      const nextInput = document.getElementById(`code-${index + 1}`);\r\n      if (nextInput) nextInput.focus();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (index, e) => {\r\n    if (e.key === 'Backspace' && !code[index] && index > 0) {\r\n      const prevInput = document.getElementById(`code-${index - 1}`);\r\n      if (prevInput) prevInput.focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').slice(0, 6);\r\n    const newCode = [...code];\r\n    \r\n    for (let i = 0; i < pastedData.length; i++) {\r\n      if (i < 6) {\r\n        newCode[i] = pastedData[i];\r\n      }\r\n    }\r\n    \r\n    setCode(newCode);\r\n    \r\n    // Foca no próximo input vazio ou no último\r\n    const nextEmptyIndex = newCode.findIndex(c => !c);\r\n    const focusIndex = nextEmptyIndex === -1 ? 5 : nextEmptyIndex;\r\n    const input = document.getElementById(`code-${focusIndex}`);\r\n    if (input) input.focus();\r\n  };\r\n\r\n  const handleVerify = async () => {\r\n    const verificationCode = code.join('');\r\n    \r\n    if (verificationCode.length !== 6) {\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Código incompleto\",\r\n        description: \"Por favor, digite o código de 6 dígitos.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await authService.verifyPhone({ \r\n        userId: user.uid, \r\n        code: verificationCode \r\n      });\r\n      \r\n      toast({\r\n        title: \"Telefone verificado!\",\r\n        description: \"Seu cadastro foi concluído com sucesso.\",\r\n      });\r\n      \r\n      // Redireciona para o dashboard apropriado\r\n      const targetRoute = profile?.isPartner ? '/partner/dashboard' : '/dashboard';\r\n      const from = location.state?.from?.pathname || targetRoute;\r\n      navigate(from, { replace: true });\r\n    } catch (error) {\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Código inválido\",\r\n        description: error.message || \"Tente novamente.\",\r\n      });\r\n      setCode(['', '', '', '', '', '']);\r\n      document.getElementById('code-0')?.focus();\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleResend = async () => {\r\n    if (!canResend) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await authService.resendVerificationCode({ \r\n        userId: user.uid, \r\n        phone: profile?.phone || user.phoneNumber \r\n      });\r\n      \r\n      toast({\r\n        title: \"Código reenviado\",\r\n        description: \"Um novo código foi enviado para seu telefone.\",\r\n      });\r\n      setCanResend(false);\r\n      setCountdown(60);\r\n      setCode(['', '', '', '', '', '']);\r\n      document.getElementById('code-0')?.focus();\r\n    } catch (error) {\r\n      toast({\r\n        variant: \"destructive\",\r\n        title: \"Erro ao reenviar\",\r\n        description: error.message || \"Tente novamente.\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  const formatPhone = (phoneNumber) => {\r\n    if (!phoneNumber) return '';\r\n    \r\n    // Remove tudo que não é número\r\n    const cleaned = phoneNumber.replace(/\\D/g, '');\r\n    \r\n    // Formata (55) 11 99999-9999\r\n    if (cleaned.length === 13) {\r\n      return `+${cleaned.slice(0, 2)} (${cleaned.slice(2, 4)}) ${cleaned.slice(4, 9)}-${cleaned.slice(9)}`;\r\n    }\r\n    return phoneNumber;\r\n  };\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  const phone = profile?.phone || user.phoneNumber || '';\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Verificação de Telefone - Mesapra2</title>\r\n        <meta name=\"description\" content=\"Verifique seu telefone para continuar.\" />\r\n      </Helmet>\r\n\r\n      <div className=\"min-h-screen flex items-center justify-center p-4 bg-background\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"w-full max-w-md\"\r\n        >\r\n          <div className=\"glass-effect rounded-2xl p-8 border border-white/10\">\r\n            {/* Botão de logout no canto */}\r\n            <div className=\"flex justify-end mb-4\">\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"text-white/60 hover:text-white transition-colors flex items-center gap-2 text-sm\"\r\n              >\r\n                <LogOut className=\"w-4 h-4\" />\r\n                Sair\r\n              </button>\r\n            </div>\r\n\r\n            {/* Ícone */}\r\n            <div className=\"flex justify-center mb-8\">\r\n              <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center\">\r\n                <Smartphone className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Título */}\r\n            <h1 className=\"text-3xl font-bold text-center mb-2 gradient-text\">\r\n              Verificação de Telefone\r\n            </h1>\r\n            <p className=\"text-center text-white/60 mb-2\">\r\n              Digite o código de 6 dígitos enviado para\r\n            </p>\r\n            <p className=\"text-center text-purple-400 font-semibold mb-8\">\r\n              {formatPhone(phone)}\r\n            </p>\r\n\r\n            {/* Input do código */}\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-center gap-2 mb-8\">\r\n                {code.map((digit, index) => (\r\n                  <Input\r\n                    key={index}\r\n                    id={`code-${index}`}\r\n                    type=\"text\"\r\n                    inputMode=\"numeric\"\r\n                    maxLength={1}\r\n                    value={digit}\r\n                    onChange={(e) => handleCodeChange(index, e.target.value)}\r\n                    onKeyDown={(e) => handleKeyDown(index, e)}\r\n                    onPaste={index === 0 ? handlePaste : undefined}\r\n                    className=\"w-12 h-14 text-center text-2xl font-bold glass-effect border-white/10\"\r\n                    disabled={isLoading}\r\n                  />\r\n                ))}\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handleVerify}\r\n                className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 h-12 text-base font-semibold\"\r\n                disabled={isLoading || code.some(c => !c)}\r\n              >\r\n                {isLoading ? 'Verificando...' : 'Verificar'}\r\n              </Button>\r\n\r\n              {/* Reenviar código */}\r\n              <div className=\"text-center\">\r\n                {canResend ? (\r\n                  <button\r\n                    onClick={handleResend}\r\n                    className=\"text-purple-400 hover:text-purple-300 font-semibold text-sm\"\r\n                    disabled={isLoading}\r\n                  >\r\n                    Reenviar código\r\n                  </button>\r\n                ) : (\r\n                  <p className=\"text-white/60 text-sm\">\r\n                    Reenviar código em {countdown}s\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Informação adicional */}\r\n              <div className=\"mt-6 p-4 rounded-lg bg-white/5 border border-white/10\">\r\n                <p className=\"text-white/60 text-sm text-center\">\r\n                  Não recebeu o código? Verifique se o número está correto ou aguarde para reenviar.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PhoneVerificationPage;"],"version":3}