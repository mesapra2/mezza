b49d7e3a0bbb0874ee55502f5300b593
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const supabaseClient_1 = require("@/lib/supabaseClient");
const AuthContext_1 = require("@/contexts/AuthContext");
const react_router_dom_1 = require("react-router-dom");
const lucide_react_1 = require("lucide-react");
const use_toast_1 = require("@/features/shared/components/ui/use-toast");
const PeoplePage = () => {
    const { user, profile } = (0, AuthContext_1.useAuth)();
    const navigate = (0, react_router_dom_1.useNavigate)();
    const [people, setPeople] = (0, react_1.useState)([]);
    const [loading, setLoading] = (0, react_1.useState)(true);
    const [error, setError] = (0, react_1.useState)(null);
    const [selectedProfile, setSelectedProfile] = (0, react_1.useState)(null);
    const [pokingStates, setPokingStates] = (0, react_1.useState)({});
    const isPartner = profile?.profile_type === 'partner';
    // âœ… FUNÃ‡ÃƒO ADICIONADA: Helper para construir URL do avatar corretamente
    const getAvatarUrl = (person) => {
        if (!person?.avatar_url) {
            return null;
        }
        // Se jÃ¡ Ã© URL completa (http/https), retorna direto
        if (person.avatar_url.startsWith('http')) {
            return person.avatar_url;
        }
        // âœ… ConstrÃ³i a URL pÃºblica do Supabase
        const { data } = supabaseClient_1.supabase.storage.from('avatars').getPublicUrl(person.avatar_url);
        return `${data.publicUrl}?t=${new Date().getTime()}`;
    };
    const fetchPeople = (0, react_1.useCallback)(async () => {
        if (!user) {
            setLoading(false);
            setPeople([]);
            return;
        }
        try {
            setLoading(true);
            setError(null);
            // Busca os perfis pÃºblicos
            const { data: profilesData, error: fetchError } = await supabaseClient_1.supabase
                .from('profiles')
                .select('id, username, full_name, avatar_url, bio, public_profile, allow_pokes, reputation_stars')
                .neq('id', user.id)
                .eq('public_profile', true)
                .order('username', { ascending: true });
            if (fetchError)
                throw fetchError;
            // Para cada perfil, busca o nÃºmero de eventos participados
            const peopleWithStats = await Promise.all((profilesData || []).map(async (person) => {
                console.log(`ðŸ”Ž Contando eventos de ${person.username} (${person.id})...`);
                // Conta eventos onde o usuÃ¡rio participou (status aprovado)
                const { count: eventsCount, error: countError } = await supabaseClient_1.supabase
                    .from('event_participants')
                    .select('*', { count: 'exact', head: true })
                    .eq('user_id', person.id)
                    .eq('status', 'aprovado');
                if (countError) {
                    console.error(`âŒ Erro ao contar eventos de ${person.username}:`, countError);
                    return { ...person, events_participated: 0 };
                }
                console.log(`âœ… ${person.username}: ${eventsCount || 0} eventos aprovados`);
                return {
                    ...person,
                    events_participated: eventsCount || 0
                };
            }));
            setPeople(peopleWithStats);
        }
        catch (err) {
            console.error('âŒ Erro ao carregar pessoas:', err);
            setError(`NÃ£o foi possÃ­vel carregar as pessoas: ${err.message}`);
        }
        finally {
            setLoading(false);
        }
    }, [user]);
    (0, react_1.useEffect)(() => {
        fetchPeople();
    }, [user, fetchPeople]);
    const sendPoke = async (targetUserId, targetUsername) => {
        setPokingStates(prev => ({ ...prev, [targetUserId]: true }));
        try {
            const today = new Date().toISOString().split('T')[0];
            const { error: checkError, count } = await supabaseClient_1.supabase
                .from('pokes')
                .select('id', { count: 'exact', head: true })
                .eq('from_user_id', user.id)
                .eq('to_user_id', targetUserId)
                .gte('created_at', `${today}T00:00:00Z`);
            if (checkError)
                throw checkError;
            if (count > 0) {
                (0, use_toast_1.toast)({
                    variant: "destructive",
                    title: "Limite Atingido",
                    description: `VocÃª jÃ¡ enviou um Tok para ${targetUsername || 'esta pessoa'} hoje.`,
                });
                return;
            }
            const { error: insertError } = await supabaseClient_1.supabase
                .from('pokes')
                .insert({
                from_user_id: user.id,
                to_user_id: targetUserId,
            });
            if (insertError)
                throw insertError;
            (0, use_toast_1.toast)({
                title: "Tok Enviado!",
                description: `VocÃª enviou um Tok para ${targetUsername || 'esta pessoa'} ðŸ‘‹`,
            });
        }
        catch (err) {
            console.error('Erro ao enviar Tok:', err);
            (0, use_toast_1.toast)({
                variant: "destructive",
                title: "Erro",
                description: `NÃ£o foi possÃ­vel enviar o Tok: ${err.message}`,
            });
        }
        finally {
            setPokingStates(prev => ({ ...prev, [targetUserId]: false }));
        }
    };
    const createCrusher = (targetUserId) => {
        navigate(`/criar-evento/crusher?invite=${targetUserId}`);
    };
    const viewProfile = async (userId) => {
        try {
            const { data: profileData, error } = await supabaseClient_1.supabase
                .from('profiles')
                .select('*')
                .eq('id', userId)
                .single();
            if (error)
                throw error;
            if (!profileData)
                throw new Error("Perfil nÃ£o encontrado");
            // Busca o nÃºmero de eventos participados (status aprovado)
            const { count: eventsCount } = await supabaseClient_1.supabase
                .from('event_participants')
                .select('*', { count: 'exact', head: true })
                .eq('user_id', userId)
                .eq('status', 'aprovado');
            setSelectedProfile({
                ...profileData,
                events_participated: eventsCount || 0
            });
        }
        catch (err) {
            console.error('âŒ Erro ao carregar perfil:', err);
            (0, use_toast_1.toast)({
                variant: "destructive",
                title: "Erro",
                description: "NÃ£o foi possÃ­vel carregar o perfil.",
            });
        }
    };
    const closeProfileModal = () => {
        setSelectedProfile(null);
    };
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center min-h-[60vh]", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Loader2, { className: "w-8 h-8 animate-spin text-purple-500" }) }));
    }
    if (error) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "text-center py-12", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-red-400 mb-4", children: error }), (0, jsx_runtime_1.jsx)("button", { onClick: fetchPeople, className: "px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors", children: "Tentar Novamente" })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "py-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "mb-8", children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-3xl font-bold mb-2 gradient-text", children: "Pessoas Ativas" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60", children: "Conecte-se com outros membros da comunidade" })] }), !isPartner && ((0, jsx_runtime_1.jsx)("div", { className: "mb-6 p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-start gap-3", children: [(0, jsx_runtime_1.jsx)("div", { className: "p-2 bg-purple-500/20 rounded-lg", children: (0, jsx_runtime_1.jsx)("span", { className: "text-2xl", children: "\uD83D\uDC47" }) }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h3", { className: "font-semibold text-white mb-1", children: "Sobre as Intera\u00E7\u00F5es" }), (0, jsx_runtime_1.jsxs)("p", { className: "text-white/70 text-sm", children: [(0, jsx_runtime_1.jsx)("strong", { children: "Tok \uD83D\uDC47:" }), " Demonstre interesse de forma leve (1x por dia).", (0, jsx_runtime_1.jsx)("br", {}), (0, jsx_runtime_1.jsx)("strong", { children: "Crusher \uD83D\uDC98:" }), " Envie um convite especial direto para um evento exclusivo."] })] })] }) })), people.length === 0 ? ((0, jsx_runtime_1.jsxs)("div", { className: "text-center py-12", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "w-16 h-16 mx-auto mb-4 text-white/20" }), (0, jsx_runtime_1.jsx)("h3", { className: "text-xl font-semibold mb-2", children: "Nenhuma pessoa p\u00FAblica no momento" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white/60", children: "Nenhum usu\u00E1rio habilitou seu perfil como p\u00FAblico ainda." })] })) : ((0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6", children: people.map((person) => {
                    const allowsPokes = person.allow_pokes !== false;
                    const isPoking = pokingStates[person.id];
                    const avatarUrl = getAvatarUrl(person); // âœ… MUDANÃ‡A AQUI
                    return ((0, jsx_runtime_1.jsxs)("div", { className: "bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6 hover:bg-white/10 transition-all duration-300 flex flex-col justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-4 mb-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [avatarUrl ? ( // âœ… MUDANÃ‡A AQUI
                                                    (0, jsx_runtime_1.jsx)("img", { src: avatarUrl, alt: person.username || 'UsuÃ¡rio', className: "w-16 h-16 rounded-full object-cover border-2 border-purple-500/30", onError: (e) => {
                                                            e.target.style.display = 'none';
                                                            e.target.nextSibling.style.display = 'flex';
                                                        } })) : null, (0, jsx_runtime_1.jsx)("div", { className: "w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-xl font-bold", style: { display: avatarUrl ? 'none' : 'flex' }, children: (person.username || person.full_name || 'U')[0].toUpperCase() }), (0, jsx_runtime_1.jsx)("div", { className: "absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-background" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1 min-w-0", children: [(0, jsx_runtime_1.jsx)("h3", { className: "font-semibold text-lg truncate", children: person.full_name || person.username || 'UsuÃ¡rio' }), person.username && ((0, jsx_runtime_1.jsxs)("p", { className: "text-white/60 text-sm", children: ["@", person.username] })), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2 mt-2", children: [person.reputation_stars !== null && person.reputation_stars !== undefined && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-1 bg-yellow-500/10 px-2 py-0.5 rounded-full border border-yellow-500/20", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { className: "w-3 h-3 text-yellow-400 fill-yellow-400" }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs font-medium text-yellow-400", children: person.reputation_stars.toFixed(1) })] })), (0, jsx_runtime_1.jsx)("div", { className: "flex items-center gap-1 bg-purple-500/10 px-2 py-0.5 rounded-full border border-purple-500/20", children: (0, jsx_runtime_1.jsxs)("span", { className: "text-xs font-medium text-purple-400", children: [person.events_participated || 0, " ", person.events_participated === 1 ? 'evento' : 'eventos'] }) })] })] })] }), person.bio && ((0, jsx_runtime_1.jsx)("p", { className: "text-white/70 text-sm mb-4 line-clamp-2", children: person.bio }))] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2 mt-4", children: [!isPartner && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [allowsPokes && ((0, jsx_runtime_1.jsx)("button", { onClick: () => sendPoke(person.id, person.username || person.full_name), className: "px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg transition-colors flex items-center justify-center gap-1.5", title: "Enviar Tok", disabled: isPoking, children: isPoking ? ((0, jsx_runtime_1.jsx)(lucide_react_1.Loader2, { className: "w-4 h-4 animate-spin" })) : ('Tok ðŸ‘‡') })), (0, jsx_runtime_1.jsxs)("button", { onClick: () => createCrusher(person.id), className: "flex-1 px-4 py-2 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2", title: "Criar Evento Crusher", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Heart, { className: "w-4 h-4" }), "Mesapra2"] })] })), (0, jsx_runtime_1.jsx)("button", { onClick: () => viewProfile(person.id), className: `px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg transition-colors ${isPartner ? 'flex-1 w-full' : ''}`, title: "Ver Perfil", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "w-4 h-4" }) })] }), !isPartner && !allowsPokes && ((0, jsx_runtime_1.jsx)("div", { className: "mt-3 text-center", children: (0, jsx_runtime_1.jsx)("span", { className: "text-xs text-pink-400/80", children: "\uD83D\uDC98 N\u00E3o aceita Toks" }) }))] })] }, person.id));
                }) })), selectedProfile && ((0, jsx_runtime_1.jsx)("div", { className: "fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4", onClick: closeProfileModal, children: (0, jsx_runtime_1.jsxs)("div", { className: "bg-gradient-to-br from-[#1a112e] to-[#2e112a] rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-white/20 shadow-2xl flex flex-col", onClick: (e) => e.stopPropagation(), children: [(0, jsx_runtime_1.jsxs)("div", { className: "sticky top-0 bg-black/50 backdrop-blur-sm border-b border-white/10 p-4 sm:p-6 flex items-center justify-between z-10", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-xl sm:text-2xl font-bold gradient-text truncate", children: "Perfil" }), (0, jsx_runtime_1.jsx)("button", { onClick: closeProfileModal, className: "text-white/60 hover:text-white transition-colors p-1 rounded-full -mr-2", children: (0, jsx_runtime_1.jsx)(lucide_react_1.XCircle, { className: "w-6 h-6" }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "p-4 sm:p-6 overflow-y-auto", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col sm:flex-row items-center gap-4 sm:gap-6 mb-6", children: [(0, jsx_runtime_1.jsx)("div", { className: "relative flex-shrink-0", children: getAvatarUrl(selectedProfile) ? ( // âœ… MUDANÃ‡A AQUI
                                            (0, jsx_runtime_1.jsx)("img", { src: getAvatarUrl(selectedProfile), alt: selectedProfile.username, className: "w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-4 border-purple-500/50" })) : ((0, jsx_runtime_1.jsx)("div", { className: "w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-3xl font-bold", children: (selectedProfile.username || selectedProfile.full_name || 'U')[0].toUpperCase() })) }), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1 text-center sm:text-left min-w-0", children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-xl sm:text-2xl font-bold mb-1 truncate", children: selectedProfile.full_name || selectedProfile.username }), selectedProfile.username && ((0, jsx_runtime_1.jsxs)("p", { className: "text-white/60 truncate", children: ["@", selectedProfile.username] })), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-3 mt-3 justify-center sm:justify-start flex-wrap", children: [selectedProfile.reputation_stars !== null && selectedProfile.reputation_stars !== undefined && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-1.5 bg-yellow-500/10 px-3 py-1.5 rounded-full border border-yellow-500/20", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { className: "w-4 h-4 text-yellow-400 fill-yellow-400" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm font-medium text-yellow-400", children: selectedProfile.reputation_stars.toFixed(1) }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs text-yellow-400/70", children: "ranking" })] })), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-1.5 bg-purple-500/10 px-3 py-1.5 rounded-full border border-purple-500/20", children: [(0, jsx_runtime_1.jsx)("span", { className: "text-sm font-medium text-purple-400", children: selectedProfile.events_participated || 0 }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs text-purple-400/70", children: selectedProfile.events_participated === 1 ? 'evento' : 'eventos' })] })] })] })] }), selectedProfile.bio && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-6 p-4 bg-white/5 rounded-lg border border-white/10", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-semibold text-white/60 mb-2", children: "Sobre" }), (0, jsx_runtime_1.jsx)("p", { className: "text-white whitespace-pre-wrap", children: selectedProfile.bio })] })), selectedProfile.hashtags_interesse && selectedProfile.hashtags_interesse.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-semibold text-white/60 mb-3", children: "Interesses" }), (0, jsx_runtime_1.jsx)("div", { className: "flex flex-wrap gap-2", children: selectedProfile.hashtags_interesse.map((tag, index) => ((0, jsx_runtime_1.jsxs)("span", { className: "px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-sm border border-purple-500/30", children: ["#", tag] }, index))) })] })), selectedProfile.photos && Array.isArray(selectedProfile.photos) && selectedProfile.photos.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "mb-6", children: [(0, jsx_runtime_1.jsx)("h4", { className: "text-sm font-semibold text-white/60 mb-3", children: "Fotos" }), (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-2 md:grid-cols-3 gap-3", children: selectedProfile.photos.map((photoPath, index) => {
                                                // âœ… ConstrÃ³i URL das fotos corretamente
                                                const photoUrl = photoPath?.startsWith('http')
                                                    ? photoPath
                                                    : supabaseClient_1.supabase.storage.from('photos').getPublicUrl(photoPath).data.publicUrl;
                                                return photoUrl ? ((0, jsx_runtime_1.jsx)("a", { href: photoUrl, target: "_blank", rel: "noopener noreferrer", children: (0, jsx_runtime_1.jsx)("img", { src: photoUrl, alt: `Foto ${index + 1}`, className: "w-full h-32 object-cover rounded-lg border border-white/10 hover:opacity-80 transition-opacity" }) }, index)) : null;
                                            }) })] })), !isPartner && ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col sm:flex-row gap-3 pt-6 border-t border-white/10", children: [(0, jsx_runtime_1.jsxs)("button", { onClick: () => {
                                                sendPoke(selectedProfile.id, selectedProfile.username || selectedProfile.full_name);
                                            }, className: `flex-1 px-4 py-3 rounded-lg transition-colors flex items-center justify-center gap-2 font-semibold ${selectedProfile.allow_pokes === false
                                                ? 'bg-gray-600 text-gray-400 cursor-not-allowed'
                                                : 'bg-purple-600 hover:bg-purple-700 text-white'}`, disabled: selectedProfile.allow_pokes === false || pokingStates[selectedProfile.id], children: [pokingStates[selectedProfile.id] ? (0, jsx_runtime_1.jsx)(lucide_react_1.Loader2, { className: "w-5 h-5 animate-spin" }) : 'ðŸ‘‡', selectedProfile.allow_pokes === false ? 'NÃ£o aceita Toks' : 'Enviar Tok'] }), (0, jsx_runtime_1.jsxs)("button", { onClick: () => {
                                                createCrusher(selectedProfile.id);
                                                closeProfileModal();
                                            }, className: "flex-1 px-4 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2 font-semibold", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Heart, { className: "w-4 h-4" }), "Criar Mesapra2"] })] }))] })] }) }))] }));
};
exports.default = PeoplePage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxmZWF0dXJlc1xcc2hhcmVkXFxwYWdlc1xcUGVvcGxlUGFnZS5qc3giLCJtYXBwaW5ncyI6Ijs7O0FBQUEsaUNBQXlEO0FBQ3pELHlEQUFnRDtBQUNoRCx3REFBaUQ7QUFDakQsdURBQStDO0FBQy9DLCtDQUF5RTtBQUN6RSx5RUFBa0U7QUFFbEUsTUFBTSxVQUFVLEdBQUcsR0FBRyxFQUFFO0lBQ3RCLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsSUFBQSxxQkFBTyxHQUFFLENBQUM7SUFDcEMsTUFBTSxRQUFRLEdBQUcsSUFBQSw4QkFBVyxHQUFFLENBQUM7SUFDL0IsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsRUFBRSxDQUFDLENBQUM7SUFDekMsTUFBTSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0MsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsSUFBSSxDQUFDLENBQUM7SUFDekMsTUFBTSxDQUFDLGVBQWUsRUFBRSxrQkFBa0IsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxJQUFJLENBQUMsQ0FBQztJQUM3RCxNQUFNLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUVyRCxNQUFNLFNBQVMsR0FBRyxPQUFPLEVBQUUsWUFBWSxLQUFLLFNBQVMsQ0FBQztJQUV0RCx3RUFBd0U7SUFDeEUsTUFBTSxZQUFZLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRTtRQUM5QixJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxDQUFDO1lBQ3hCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELG9EQUFvRDtRQUNwRCxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsVUFBVSxD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YixpQ0FBSyxTQUFTLEVBQUMsK0RBQStELGFBQzVFLG9DQUNFLE9BQU8sRUFBRSxHQUFHLEVBQUU7Z0RBQ1osUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFLEVBQUUsZUFBZSxDQUFDLFFBQVEsSUFBSSxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7NENBQ3RGLENBQUMsRUFDRCxTQUFTLEVBQUUsc0dBQ1QsZUFBZSxDQUFDLFdBQVcsS0FBSyxLQUFLO2dEQUNuQyxDQUFDLENBQUMsOENBQThDO2dEQUNoRCxDQUFDLENBQUMsOENBQ04sRUFBRSxFQUNGLFFBQVEsRUFBRSxlQUFlLENBQUMsV0FBVyxLQUFLLEtBQUssSUFBSSxZQUFZLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxhQUVsRixZQUFZLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyx1QkFBQyxzQkFBTyxJQUFDLFNBQVMsRUFBQyxzQkFBc0IsR0FBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQ3JGLGVBQWUsQ0FBQyxXQUFXLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsWUFBWSxJQUNsRSxFQUNULG9DQUNFLE9BQU8sRUFBRSxHQUFHLEVBQUU7Z0RBQ1osYUFBYSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnREFDbEMsaUJBQWlCLEVBQUUsQ0FBQzs0Q0FDdEIsQ0FBQyxFQUNELFNBQVMsRUFBQyxvTUFBb00sYUFFOU0sdUJBQUMsb0JBQUssSUFBQyxTQUFTLEVBQUMsU0FBUyxHQUFHLHNCQUV0QixJQUNMLENBQ1AsSUFDRyxJQUNGLEdBQ0YsQ0FDUCxJQUNHLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGtCQUFlLFVBQVUsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcREVWTWl4XFxBcHAuTWVzYXByYTIuY29tXFxzcmNcXGZlYXR1cmVzXFxzaGFyZWRcXHBhZ2VzXFxQZW9wbGVQYWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZUNsaWVudCc7XHJcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2NvbnRleHRzL0F1dGhDb250ZXh0JztcclxuaW1wb3J0IHsgdXNlTmF2aWdhdGUgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgVXNlcnMsIExvYWRlcjIsIEhlYXJ0LCBFeWUsIFhDaXJjbGUsIFN0YXIgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xyXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ0AvZmVhdHVyZXMvc2hhcmVkL2NvbXBvbmVudHMvdWkvdXNlLXRvYXN0JztcclxuXHJcbmNvbnN0IFBlb3BsZVBhZ2UgPSAoKSA9PiB7XHJcbiAgY29uc3QgeyB1c2VyLCBwcm9maWxlIH0gPSB1c2VBdXRoKCk7XHJcbiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpO1xyXG4gIGNvbnN0IFtwZW9wbGUsIHNldFBlb3BsZV0gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbc2VsZWN0ZWRQcm9maWxlLCBzZXRTZWxlY3RlZFByb2ZpbGVdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgW3Bva2luZ1N0YXRlcywgc2V0UG9raW5nU3RhdGVzXSA9IHVzZVN0YXRlKHt9KTtcclxuXHJcbiAgY29uc3QgaXNQYXJ0bmVyID0gcHJvZmlsZT8ucHJvZmlsZV90eXBlID09PSAncGFydG5lcic7XHJcblxyXG4gIC8vIOKchSBGVU7Dh8ODTyBBRElDSU9OQURBOiBIZWxwZXIgcGFyYSBjb25zdHJ1aXIgVVJMIGRvIGF2YXRhciBjb3JyZXRhbWVudGVcclxuICBjb25zdCBnZXRBdmF0YXJVcmwgPSAocGVyc29uKSA9PiB7XHJcbiAgICBpZiAoIXBlcnNvbj8uYXZhdGFyX3VybCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZSBqw6Egw6kgVVJMIGNvbXBsZXRhIChodHRwL2h0dHBzKSwgcmV0b3JuYSBkaXJldG9cclxuICAgIGlmIChwZXJzb24uYXZhdGFyX3VybC5zdGFydHNXaXRoKCdodHRwJykpIHtcclxuICAgICAgcmV0dXJuIHBlcnNvbi5hdmF0YXJfdXJsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOKchSBDb25zdHLDs2kgYSBVUkwgcMO6YmxpY2EgZG8gU3VwYWJhc2VcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gc3VwYWJhc2Uuc3RvcmFnZS5mcm9tKCdhdmF0YXJzJykuZ2V0UHVibGljVXJsKHBlcnNvbi5hdmF0YXJfdXJsKTtcclxuICAgIHJldHVybiBgJHtkYXRhLnB1YmxpY1VybH0/dD0ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWA7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZmV0Y2hQZW9wbGUgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBzZXRQZW9wbGUoW10pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHNldEVycm9yKG51bGwpO1xyXG5cclxuICAgICAgLy8gQnVzY2Egb3MgcGVyZmlzIHDDumJsaWNvc1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGVzRGF0YSwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgdXNlcm5hbWUsIGZ1bGxfbmFtZSwgYXZhdGFyX3VybCwgYmlvLCBwdWJsaWNfcHJvZmlsZSwgYWxsb3dfcG9rZXMsIHJlcHV0YXRpb25fc3RhcnMnKVxyXG4gICAgICAgIC5uZXEoJ2lkJywgdXNlci5pZClcclxuICAgICAgICAuZXEoJ3B1YmxpY19wcm9maWxlJywgdHJ1ZSlcclxuICAgICAgICAub3JkZXIoJ3VzZXJuYW1lJywgeyBhc2NlbmRpbmc6IHRydWV9KTtcclxuXHJcbiAgICAgIGlmIChmZXRjaEVycm9yKSB0aHJvdyBmZXRjaEVycm9yO1xyXG5cclxuICAgICAgLy8gUGFyYSBjYWRhIHBlcmZpbCwgYnVzY2EgbyBuw7ptZXJvIGRlIGV2ZW50b3MgcGFydGljaXBhZG9zXHJcbiAgICAgIGNvbnN0IHBlb3BsZVdpdGhTdGF0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICAgIChwcm9maWxlc0RhdGEgfHwgW10pLm1hcChhc3luYyAocGVyc29uKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjiBDb250YW5kbyBldmVudG9zIGRlICR7cGVyc29uLnVzZXJuYW1lfSAoJHtwZXJzb24uaWR9KS4uLmApO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDb250YSBldmVudG9zIG9uZGUgbyB1c3XDoXJpbyBwYXJ0aWNpcG91IChzdGF0dXMgYXByb3ZhZG8pXHJcbiAgICAgICAgICBjb25zdCB7IGNvdW50OiBldmVudHNDb3VudCwgZXJyb3I6IGNvdW50RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdldmVudF9wYXJ0aWNpcGFudHMnKVxyXG4gICAgICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAgICAgICAuZXEoJ3VzZXJfaWQnLCBwZXJzb24uaWQpXHJcbiAgICAgICAgICAgIC5lcSgnc3RhdHVzJywgJ2Fwcm92YWRvJyk7XHJcblxyXG4gICAgICAgICAgaWYgKGNvdW50RXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm8gYW8gY29udGFyIGV2ZW50b3MgZGUgJHtwZXJzb24udXNlcm5hbWV9OmAsIGNvdW50RXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4geyAuLi5wZXJzb24sIGV2ZW50c19wYXJ0aWNpcGF0ZWQ6IDAgfTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFICR7cGVyc29uLnVzZXJuYW1lfTogJHtldmVudHNDb3VudCB8fCAwfSBldmVudG9zIGFwcm92YWRvc2ApO1xyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC4uLnBlcnNvbixcclxuICAgICAgICAgICAgZXZlbnRzX3BhcnRpY2lwYXRlZDogZXZlbnRzQ291bnQgfHwgMFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG5cclxuICAgICAgc2V0UGVvcGxlKHBlb3BsZVdpdGhTdGF0cyk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm8gYW8gY2FycmVnYXIgcGVzc29hczonLCBlcnIpO1xyXG4gICAgICBzZXRFcnJvcihgTsOjbyBmb2kgcG9zc8OtdmVsIGNhcnJlZ2FyIGFzIHBlc3NvYXM6ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9LCBbdXNlcl0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hQZW9wbGUoKTtcclxuICB9LCBbdXNlciwgZmV0Y2hQZW9wbGVdKTtcclxuXHJcbiAgY29uc3Qgc2VuZFBva2UgPSBhc3luYyAodGFyZ2V0VXNlcklkLCB0YXJnZXRVc2VybmFtZSkgPT4ge1xyXG4gICAgc2V0UG9raW5nU3RhdGVzKHByZXYgPT4gKHsgLi4ucHJldiwgW3RhcmdldFVzZXJJZF06IHRydWUgfSkpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgICAgY29uc3QgeyBlcnJvcjogY2hlY2tFcnJvciwgY291bnQgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Bva2VzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCcsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSlcclxuICAgICAgICAuZXEoJ2Zyb21fdXNlcl9pZCcsIHVzZXIuaWQpXHJcbiAgICAgICAgLmVxKCd0b191c2VyX2lkJywgdGFyZ2V0VXNlcklkKVxyXG4gICAgICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBgJHt0b2RheX1UMDA6MDA6MDBaYCk7XHJcblxyXG4gICAgICBpZiAoY2hlY2tFcnJvcikgdGhyb3cgY2hlY2tFcnJvcjtcclxuXHJcbiAgICAgIGlmIChjb3VudCA+IDApIHtcclxuICAgICAgICB0b2FzdCh7XHJcbiAgICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiTGltaXRlIEF0aW5naWRvXCIsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgVm9jw6ogasOhIGVudmlvdSB1bSBUb2sgcGFyYSAke3RhcmdldFVzZXJuYW1lIHx8ICdlc3RhIHBlc3NvYSd9IGhvamUuYCxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwb2tlcycpXHJcbiAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICAgIGZyb21fdXNlcl9pZDogdXNlci5pZCxcclxuICAgICAgICAgICAgdG9fdXNlcl9pZDogdGFyZ2V0VXNlcklkLFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoaW5zZXJ0RXJyb3IpIHRocm93IGluc2VydEVycm9yO1xyXG5cclxuICAgICAgdG9hc3Qoe1xyXG4gICAgICAgICAgdGl0bGU6IFwiVG9rIEVudmlhZG8hXCIsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYFZvY8OqIGVudmlvdSB1bSBUb2sgcGFyYSAke3RhcmdldFVzZXJuYW1lIHx8ICdlc3RhIHBlc3NvYSd9IPCfkYtgLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBlbnZpYXIgVG9rOicsIGVycik7XHJcbiAgICAgIHRvYXN0KHtcclxuICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcclxuICAgICAgICAgIHRpdGxlOiBcIkVycm9cIixcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgTsOjbyBmb2kgcG9zc8OtdmVsIGVudmlhciBvIFRvazogJHtlcnIubWVzc2FnZX1gLFxyXG4gICAgICB9KTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgICBzZXRQb2tpbmdTdGF0ZXMocHJldiA9PiAoeyAuLi5wcmV2LCBbdGFyZ2V0VXNlcklkXTogZmFsc2UgfSkpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNyZWF0ZUNydXNoZXIgPSAodGFyZ2V0VXNlcklkKSA9PiB7XHJcbiAgICBuYXZpZ2F0ZShgL2NyaWFyLWV2ZW50by9jcnVzaGVyP2ludml0ZT0ke3RhcmdldFVzZXJJZH1gKTtcclxuICB9O1xyXG5cclxuICBjb25zdCB2aWV3UHJvZmlsZSA9IGFzeW5jICh1c2VySWQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZURhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgLmVxKCdpZCcsIHVzZXJJZClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICBpZiAoIXByb2ZpbGVEYXRhKSB0aHJvdyBuZXcgRXJyb3IoXCJQZXJmaWwgbsOjbyBlbmNvbnRyYWRvXCIpO1xyXG5cclxuICAgICAgLy8gQnVzY2EgbyBuw7ptZXJvIGRlIGV2ZW50b3MgcGFydGljaXBhZG9zIChzdGF0dXMgYXByb3ZhZG8pXHJcbiAgICAgIGNvbnN0IHsgY291bnQ6IGV2ZW50c0NvdW50IH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdldmVudF9wYXJ0aWNpcGFudHMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXHJcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxyXG4gICAgICAgIC5lcSgnc3RhdHVzJywgJ2Fwcm92YWRvJyk7XHJcblxyXG4gICAgICBzZXRTZWxlY3RlZFByb2ZpbGUoe1xyXG4gICAgICAgIC4uLnByb2ZpbGVEYXRhLFxyXG4gICAgICAgIGV2ZW50c19wYXJ0aWNpcGF0ZWQ6IGV2ZW50c0NvdW50IHx8IDBcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm8gYW8gY2FycmVnYXIgcGVyZmlsOicsIGVycik7XHJcbiAgICAgIHRvYXN0KHtcclxuICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcclxuICAgICAgICAgIHRpdGxlOiBcIkVycm9cIixcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIk7Do28gZm9pIHBvc3PDrXZlbCBjYXJyZWdhciBvIHBlcmZpbC5cIixcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VQcm9maWxlTW9kYWwgPSAoKSA9PiB7XHJcbiAgICBzZXRTZWxlY3RlZFByb2ZpbGUobnVsbCk7XHJcbiAgfTtcclxuXHJcbiAgaWYgKGxvYWRpbmcpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWluLWgtWzYwdmhdXCI+XHJcbiAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwidy04IGgtOCBhbmltYXRlLXNwaW4gdGV4dC1wdXJwbGUtNTAwXCIgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTEyXCI+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNDAwIG1iLTRcIj57ZXJyb3J9PC9wPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIG9uQ2xpY2s9e2ZldGNoUGVvcGxlfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGhvdmVyOmJnLXB1cnBsZS03MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIFRlbnRhciBOb3ZhbWVudGVcclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwicHktNlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLThcIj5cclxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIG1iLTIgZ3JhZGllbnQtdGV4dFwiPlBlc3NvYXMgQXRpdmFzPC9oMT5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzYwXCI+Q29uZWN0ZS1zZSBjb20gb3V0cm9zIG1lbWJyb3MgZGEgY29tdW5pZGFkZTwvcD5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7IWlzUGFydG5lciAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02IHAtNCBiZy1wdXJwbGUtNTAwLzEwIGJvcmRlciBib3JkZXItcHVycGxlLTUwMC8yMCByb3VuZGVkLWxnXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgYmctcHVycGxlLTUwMC8yMCByb3VuZGVkLWxnXCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGxcIj7wn5GHPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlIG1iLTFcIj5Tb2JyZSBhcyBJbnRlcmHDp8O1ZXM8L2gzPlxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvNzAgdGV4dC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz5Ub2sg8J+Rhzo8L3N0cm9uZz4gRGVtb25zdHJlIGludGVyZXNzZSBkZSBmb3JtYSBsZXZlICgxeCBwb3IgZGlhKS48YnIvPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz5DcnVzaGVyIPCfkpg6PC9zdHJvbmc+IEVudmllIHVtIGNvbnZpdGUgZXNwZWNpYWwgZGlyZXRvIHBhcmEgdW0gZXZlbnRvIGV4Y2x1c2l2by5cclxuICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcblxyXG4gICAgICB7cGVvcGxlLmxlbmd0aCA9PT0gMCA/IChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTEyXCI+XHJcbiAgICAgICAgICA8VXNlcnMgY2xhc3NOYW1lPVwidy0xNiBoLTE2IG14LWF1dG8gbWItNCB0ZXh0LXdoaXRlLzIwXCIgLz5cclxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItMlwiPk5lbmh1bWEgcGVzc29hIHDDumJsaWNhIG5vIG1vbWVudG88L2gzPlxyXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MFwiPlxyXG4gICAgICAgICAgICBOZW5odW0gdXN1w6FyaW8gaGFiaWxpdG91IHNldSBwZXJmaWwgY29tbyBww7pibGljbyBhaW5kYS5cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKSA6IChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTMgZ2FwLTZcIj5cclxuICAgICAgICAgIHtwZW9wbGUubWFwKChwZXJzb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYWxsb3dzUG9rZXMgPSBwZXJzb24uYWxsb3dfcG9rZXMgIT09IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBpc1Bva2luZyA9IHBva2luZ1N0YXRlc1twZXJzb24uaWRdO1xyXG4gICAgICAgICAgICBjb25zdCBhdmF0YXJVcmwgPSBnZXRBdmF0YXJVcmwocGVyc29uKTsgLy8g4pyFIE1VREFOw4dBIEFRVUlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAga2V5PXtwZXJzb24uaWR9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy13aGl0ZS81IGJhY2tkcm9wLWJsdXItc20gYm9yZGVyIGJvcmRlci13aGl0ZS8xMCByb3VuZGVkLXhsIHAtNiBob3ZlcjpiZy13aGl0ZS8xMCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWJldHdlZW5cIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQgbWItNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHthdmF0YXJVcmwgPyAoIC8vIOKchSBNVURBTsOHQSBBUVVJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2F2YXRhclVybH0gLy8g4pyFIE1VREFOw4dBIEFRVUlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e3BlcnNvbi51c2VybmFtZSB8fCAnVXN1w6FyaW8nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTYgaC0xNiByb3VuZGVkLWZ1bGwgb2JqZWN0LWNvdmVyIGJvcmRlci0yIGJvcmRlci1wdXJwbGUtNTAwLzMwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQubmV4dFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTYgaC0xNiByb3VuZGVkLWZ1bGwgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1wdXJwbGUtNTAwIHRvLXBpbmstNTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgdGV4dC14bCBmb250LWJvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiBhdmF0YXJVcmwgPyAnbm9uZScgOiAnZmxleCcgfX0gLy8g4pyFIE1VREFOw4dBIEFRVUlcclxuICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyhwZXJzb24udXNlcm5hbWUgfHwgcGVyc29uLmZ1bGxfbmFtZSB8fCAnVScpWzBdLnRvVXBwZXJDYXNlKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLWJvdHRvbS0xIC1yaWdodC0xIHctNCBoLTQgYmctZ3JlZW4tNTAwIHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItYmFja2dyb3VuZFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtbGcgdHJ1bmNhdGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3BlcnNvbi5mdWxsX25hbWUgfHwgcGVyc29uLnVzZXJuYW1lIHx8ICdVc3XDoXJpbyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAge3BlcnNvbi51c2VybmFtZSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvNjAgdGV4dC1zbVwiPkB7cGVyc29uLnVzZXJuYW1lfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICB7LyogRXN0YXTDrXN0aWNhczogUmFua2luZyBlIEV2ZW50b3MgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTIgbXQtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogUmFua2luZyBkZSBRdWFsaWZpY2HDp8OjbyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAge3BlcnNvbi5yZXB1dGF0aW9uX3N0YXJzICE9PSBudWxsICYmIHBlcnNvbi5yZXB1dGF0aW9uX3N0YXJzICE9PSB1bmRlZmluZWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgYmcteWVsbG93LTUwMC8xMCBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci15ZWxsb3ctNTAwLzIwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U3RhciBjbGFzc05hbWU9XCJ3LTMgaC0zIHRleHQteWVsbG93LTQwMCBmaWxsLXllbGxvdy00MDBcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LXllbGxvdy00MDBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3BlcnNvbi5yZXB1dGF0aW9uX3N0YXJzLnRvRml4ZWQoMSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBFdmVudG9zIFBhcnRpY2lwYWRvcyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBiZy1wdXJwbGUtNTAwLzEwIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLXB1cnBsZS01MDAvMjBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtcHVycGxlLTQwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3BlcnNvbi5ldmVudHNfcGFydGljaXBhdGVkIHx8IDB9IHtwZXJzb24uZXZlbnRzX3BhcnRpY2lwYXRlZCA9PT0gMSA/ICdldmVudG8nIDogJ2V2ZW50b3MnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICB7cGVyc29uLmJpbyAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS83MCB0ZXh0LXNtIG1iLTQgbGluZS1jbGFtcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7cGVyc29uLmJpb31cclxuICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTIgbXQtNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHshaXNQYXJ0bmVyICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBCb3TDo28gVG9rIC0gc8OzIGFwYXJlY2Ugc2UgYSBwZXNzb2EgYWNlaXRhIFRva3MgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHthbGxvd3NQb2tlcyAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2VuZFBva2UocGVyc29uLmlkLCBwZXJzb24udXNlcm5hbWUgfHwgcGVyc29uLmZ1bGxfbmFtZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctd2hpdGUvNSBob3ZlcjpiZy13aGl0ZS8xMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTEuNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkVudmlhciBUb2tcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUG9raW5nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1Bva2luZyA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwidy00IGgtNCBhbmltYXRlLXNwaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RvayDwn5GHJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBCb3TDo28gQ3J1c2hlciAtIFNFTVBSRSBhcGFyZWNlIHBhcmEgdG9kb3MgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBjcmVhdGVDcnVzaGVyKHBlcnNvbi5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIHB4LTQgcHktMiBiZy1ncmFkaWVudC10by1yIGZyb20tcGluay02MDAgdG8tcHVycGxlLTYwMCBob3Zlcjpmcm9tLXBpbmstNzAwIGhvdmVyOnRvLXB1cnBsZS03MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkNyaWFyIEV2ZW50byBDcnVzaGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWFydCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNhcHJhMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHZpZXdQcm9maWxlKHBlcnNvbi5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgYmctd2hpdGUvNSBob3ZlcjpiZy13aGl0ZS8xMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgJHtpc1BhcnRuZXIgPyAnZmxleC0xIHctZnVsbCcgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJWZXIgUGVyZmlsXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8RXllIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHshaXNQYXJ0bmVyICYmICFhbGxvd3NQb2tlcyAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcGluay00MDAvODBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAg8J+SmCBOw6NvIGFjZWl0YSBUb2tzXHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG5cclxuICAgICAgey8qIE1vZGFsIGRlIFBlcmZpbCAqL31cclxuICAgICAge3NlbGVjdGVkUHJvZmlsZSAmJiAoXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay84MCBiYWNrZHJvcC1ibHVyLXNtIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2Nsb3NlUHJvZmlsZU1vZGFsfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1bIzFhMTEyZV0gdG8tWyMyZTExMmFdIHJvdW5kZWQtMnhsIG1heC13LTJ4bCB3LWZ1bGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byBib3JkZXIgYm9yZGVyLXdoaXRlLzIwIHNoYWRvdy0yeGwgZmxleCBmbGV4LWNvbFwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0aWNreSB0b3AtMCBiZy1ibGFjay81MCBiYWNrZHJvcC1ibHVyLXNtIGJvcmRlci1iIGJvcmRlci13aGl0ZS8xMCBwLTQgc206cC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiB6LTEwXCI+XHJcbiAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgc206dGV4dC0yeGwgZm9udC1ib2xkIGdyYWRpZW50LXRleHQgdHJ1bmNhdGVcIj5QZXJmaWw8L2gyPlxyXG4gICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2Nsb3NlUHJvZmlsZU1vZGFsfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZS82MCBob3Zlcjp0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzIHAtMSByb3VuZGVkLWZ1bGwgLW1yLTJcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxYQ2lyY2xlIGNsYXNzTmFtZT1cInctNiBoLTZcIiAvPlxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IHNtOnAtNiBvdmVyZmxvdy15LWF1dG9cIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgc206ZmxleC1yb3cgaXRlbXMtY2VudGVyIGdhcC00IHNtOmdhcC02IG1iLTZcIj5cclxuICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXgtc2hyaW5rLTBcIj5cclxuICAgICAgICAgICAgICAgICAge2dldEF2YXRhclVybChzZWxlY3RlZFByb2ZpbGUpID8gKCAvLyDinIUgTVVEQU7Dh0EgQVFVSVxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgICAgICAgIHNyYz17Z2V0QXZhdGFyVXJsKHNlbGVjdGVkUHJvZmlsZSl9IC8vIOKchSBNVURBTsOHQSBBUVVJXHJcbiAgICAgICAgICAgICAgICAgICAgICBhbHQ9e3NlbGVjdGVkUHJvZmlsZS51c2VybmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMjAgaC0yMCBzbTp3LTI0IHNtOmgtMjQgcm91bmRlZC1mdWxsIG9iamVjdC1jb3ZlciBib3JkZXItNCBib3JkZXItcHVycGxlLTUwMC81MFwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMjAgaC0yMCBzbTp3LTI0IHNtOmgtMjQgcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tcHVycGxlLTUwMCB0by1waW5rLTUwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQtM3hsIGZvbnQtYm9sZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgeyhzZWxlY3RlZFByb2ZpbGUudXNlcm5hbWUgfHwgc2VsZWN0ZWRQcm9maWxlLmZ1bGxfbmFtZSB8fCAnVScpWzBdLnRvVXBwZXJDYXNlKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIHRleHQtY2VudGVyIHNtOnRleHQtbGVmdCBtaW4tdy0wXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIHNtOnRleHQtMnhsIGZvbnQtYm9sZCBtYi0xIHRydW5jYXRlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkUHJvZmlsZS5mdWxsX25hbWUgfHwgc2VsZWN0ZWRQcm9maWxlLnVzZXJuYW1lfVxyXG4gICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRQcm9maWxlLnVzZXJuYW1lICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlLzYwIHRydW5jYXRlXCI+QHtzZWxlY3RlZFByb2ZpbGUudXNlcm5hbWV9PC9wPlxyXG4gICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICB7LyogRXN0YXTDrXN0aWNhczogUmFua2luZyBlIEV2ZW50b3MgKi99XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMyBtdC0zIGp1c3RpZnktY2VudGVyIHNtOmp1c3RpZnktc3RhcnQgZmxleC13cmFwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgey8qIFJhbmtpbmcgZGUgUXVhbGlmaWNhw6fDo28gKi99XHJcbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkUHJvZmlsZS5yZXB1dGF0aW9uX3N0YXJzICE9PSBudWxsICYmIHNlbGVjdGVkUHJvZmlsZS5yZXB1dGF0aW9uX3N0YXJzICE9PSB1bmRlZmluZWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41IGJnLXllbGxvdy01MDAvMTAgcHgtMyBweS0xLjUgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXIteWVsbG93LTUwMC8yMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8U3RhciBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQteWVsbG93LTQwMCBmaWxsLXllbGxvdy00MDBcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC15ZWxsb3ctNDAwXCI+e3NlbGVjdGVkUHJvZmlsZS5yZXB1dGF0aW9uX3N0YXJzLnRvRml4ZWQoMSl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQteWVsbG93LTQwMC83MFwiPnJhbmtpbmc8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIHsvKiBFdmVudG9zIFBhcnRpY2lwYWRvcyAqL31cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgYmctcHVycGxlLTUwMC8xMCBweC0zIHB5LTEuNSByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci1wdXJwbGUtNTAwLzIwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtcHVycGxlLTQwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRQcm9maWxlLmV2ZW50c19wYXJ0aWNpcGF0ZWQgfHwgMH1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1wdXJwbGUtNDAwLzcwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFByb2ZpbGUuZXZlbnRzX3BhcnRpY2lwYXRlZCA9PT0gMSA/ICdldmVudG8nIDogJ2V2ZW50b3MnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICB7c2VsZWN0ZWRQcm9maWxlLmJpbyAmJiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTYgcC00IGJnLXdoaXRlLzUgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXdoaXRlLzEwXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZS82MCBtYi0yXCI+U29icmU8L2g0PlxyXG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIHdoaXRlc3BhY2UtcHJlLXdyYXBcIj57c2VsZWN0ZWRQcm9maWxlLmJpb308L3A+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICB7c2VsZWN0ZWRQcm9maWxlLmhhc2h0YWdzX2ludGVyZXNzZSAmJiBzZWxlY3RlZFByb2ZpbGUuaGFzaHRhZ3NfaW50ZXJlc3NlLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZS82MCBtYi0zXCI+SW50ZXJlc3NlczwvaDQ+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRQcm9maWxlLmhhc2h0YWdzX2ludGVyZXNzZS5tYXAoKHRhZywgaW5kZXgpID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMSBiZy1wdXJwbGUtNTAwLzIwIHRleHQtcHVycGxlLTMwMCByb3VuZGVkLWZ1bGwgdGV4dC1zbSBib3JkZXIgYm9yZGVyLXB1cnBsZS01MDAvMzBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAje3RhZ31cclxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICB7Lyog4pyFIFNFw4fDg08gREUgRk9UT1MgQ09SUklHSURBICovfVxyXG4gICAgICAgICAgICAgIHtzZWxlY3RlZFByb2ZpbGUucGhvdG9zICYmIEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRQcm9maWxlLnBob3RvcykgJiYgc2VsZWN0ZWRQcm9maWxlLnBob3Rvcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxyXG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtd2hpdGUvNjAgbWItM1wiPkZvdG9zPC9oND5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIG1kOmdyaWQtY29scy0zIGdhcC0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkUHJvZmlsZS5waG90b3MubWFwKChwaG90b1BhdGgsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyDinIUgQ29uc3Ryw7NpIFVSTCBkYXMgZm90b3MgY29ycmV0YW1lbnRlXHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG90b1VybCA9IHBob3RvUGF0aD8uc3RhcnRzV2l0aCgnaHR0cCcpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHBob3RvUGF0aCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzdXBhYmFzZS5zdG9yYWdlLmZyb20oJ3Bob3RvcycpLmdldFB1YmxpY1VybChwaG90b1BhdGgpLmRhdGEucHVibGljVXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGhvdG9VcmwgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3Bob3RvVXJsfSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIga2V5PXtpbmRleH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtwaG90b1VybH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17YEZvdG8gJHtpbmRleCArIDF9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLTMyIG9iamVjdC1jb3ZlciByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItd2hpdGUvMTAgaG92ZXI6b3BhY2l0eS04MCB0cmFuc2l0aW9uLW9wYWNpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgIHshaXNQYXJ0bmVyICYmIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBzbTpmbGV4LXJvdyBnYXAtMyBwdC02IGJvcmRlci10IGJvcmRlci13aGl0ZS8xMFwiPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2VuZFBva2Uoc2VsZWN0ZWRQcm9maWxlLmlkLCBzZWxlY3RlZFByb2ZpbGUudXNlcm5hbWUgfHwgc2VsZWN0ZWRQcm9maWxlLmZ1bGxfbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4LTEgcHgtNCBweS0zIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgZm9udC1zZW1pYm9sZCAke1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQcm9maWxlLmFsbG93X3Bva2VzID09PSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ncmF5LTYwMCB0ZXh0LWdyYXktNDAwIGN1cnNvci1ub3QtYWxsb3dlZCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctcHVycGxlLTYwMCBob3ZlcjpiZy1wdXJwbGUtNzAwIHRleHQtd2hpdGUnXHJcbiAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NlbGVjdGVkUHJvZmlsZS5hbGxvd19wb2tlcyA9PT0gZmFsc2UgfHwgcG9raW5nU3RhdGVzW3NlbGVjdGVkUHJvZmlsZS5pZF19XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICB7cG9raW5nU3RhdGVzW3NlbGVjdGVkUHJvZmlsZS5pZF0gPyA8TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTUgaC01IGFuaW1hdGUtc3BpblwiLz4gOiAn8J+Rhyd9XHJcbiAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkUHJvZmlsZS5hbGxvd19wb2tlcyA9PT0gZmFsc2UgPyAnTsOjbyBhY2VpdGEgVG9rcycgOiAnRW52aWFyIFRvayd9XHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ3J1c2hlcihzZWxlY3RlZFByb2ZpbGUuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY2xvc2VQcm9maWxlTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBweC00IHB5LTMgYmctZ3JhZGllbnQtdG8tciBmcm9tLXBpbmstNjAwIHRvLXB1cnBsZS02MDAgaG92ZXI6ZnJvbS1waW5rLTcwMCBob3Zlcjp0by1wdXJwbGUtNzAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiBmb250LXNlbWlib2xkXCJcclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxIZWFydCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICBDcmlhciBNZXNhcHJhMlxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGVvcGxlUGFnZTsiXSwidmVyc2lvbiI6M30=