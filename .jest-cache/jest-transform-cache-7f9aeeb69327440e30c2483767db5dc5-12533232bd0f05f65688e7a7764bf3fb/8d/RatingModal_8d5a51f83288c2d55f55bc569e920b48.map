{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\features\\shared\\components\\events\\RatingModal.jsx","mappings":"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","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\features\\shared\\components\\events\\RatingModal.jsx"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Star } from 'lucide-react';\r\nimport { Button } from '@/features/shared/components/ui/button';\r\nimport { useToast } from '@/features/shared/components/ui/use-toast';\r\nimport RatingService from '@/services/RatingService';\r\n\r\nconst RatingModal = ({\r\n  isOpen,\r\n  onClose,\r\n  eventId,\r\n  raterId,\r\n  ratedId,\r\n  ratedName,\r\n  ratingType,\r\n  onRatingSubmit\r\n}) => {\r\n  const { toast } = useToast();\r\n  const [hoveredStar, setHoveredStar] = useState(0);\r\n  const [selectedScore, setSelectedScore] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [existingRating, setExistingRating] = useState(null);\r\n\r\n  const loadExistingRating = useCallback(async () => {\r\n    try {\r\n      const rating = await RatingService.getRating(\r\n        eventId,\r\n        raterId,\r\n        ratedId,\r\n        ratingType\r\n      );\r\n      if (rating) {\r\n        setSelectedScore(rating.score);\r\n        setExistingRating(rating);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar avalia√ß√£o:', error);\r\n    }\r\n  }, [eventId, raterId, ratedId, ratingType]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && eventId && raterId && ratedId) {\r\n      loadExistingRating();\r\n    }\r\n  }, [isOpen, eventId, raterId, ratedId, loadExistingRating]);\r\n\r\n  const handleStarClick = (score) => {\r\n    setSelectedScore(score);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!selectedScore) {\r\n      toast({\r\n        variant: 'destructive',\r\n        title: 'Selecione uma avalia√ß√£o',\r\n        description: 'Por favor, clique em uma estrela para avaliar'\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n\r\n      const result = await RatingService.createRating({\r\n        eventId,\r\n        raterId,\r\n        ratedId,\r\n        ratingType,\r\n        score: selectedScore\r\n      });\r\n\r\n      if (result.success) {\r\n        toast({\r\n          title: '‚úÖ Avalia√ß√£o enviada!',\r\n          description: `Voc√™ avaliou ${ratedName} com ${selectedScore} ‚≠ê`\r\n        });\r\n\r\n        if (onRatingSubmit) {\r\n          onRatingSubmit();\r\n        }\r\n\r\n        setTimeout(() => {\r\n          onClose();\r\n          setSelectedScore(0);\r\n        }, 500);\r\n      } else {\r\n        toast({\r\n          variant: 'destructive',\r\n          title: 'Erro',\r\n          description: result.error?.message || 'N√£o foi poss√≠vel enviar a avalia√ß√£o'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao salvar avalia√ß√£o:', error);\r\n      toast({\r\n        variant: 'destructive',\r\n        title: 'Erro',\r\n        description: 'Ocorreu um erro ao enviar sua avalia√ß√£o'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const typeLabel = ratingType === 'host' ? 'Anfitri√£o' : 'Participante';\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"glass-effect rounded-2xl p-8 border border-white/10 max-w-sm w-full mx-4 space-y-6 animate-in fade-in zoom-in duration-300\">\r\n        \r\n        <div className=\"text-center space-y-2\">\r\n          <h2 className=\"text-2xl font-bold text-white\">Avaliar {typeLabel}</h2>\r\n          <p className=\"text-lg text-purple-200 font-semibold\">{ratedName}</p>\r\n          <p className=\"text-sm text-white/60\">\r\n            {ratingType === 'host'\r\n              ? 'Como foi sua experi√™ncia com o anfitri√£o?'\r\n              : 'Como foi sua experi√™ncia com este participante?'}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex justify-center gap-4\">\r\n          {[1, 2, 3, 4, 5].map((score) => (\r\n            <button\r\n              key={score}\r\n              onClick={() => handleStarClick(score)}\r\n              onMouseEnter={() => setHoveredStar(score)}\r\n              onMouseLeave={() => setHoveredStar(0)}\r\n              disabled={isLoading}\r\n              className=\"group relative transition-transform hover:scale-125 disabled:opacity-50\"\r\n            >\r\n              <Star\r\n                size={48}\r\n                className={`transition-all duration-200 ${\r\n                  score <= (hoveredStar || selectedScore)\r\n                    ? 'fill-yellow-400 text-yellow-400 drop-shadow-lg'\r\n                    : 'text-white/30 hover:text-yellow-300'\r\n                }`}\r\n              />\r\n              <span className=\"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-black/80 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\">\r\n                {score === 1 && 'Ruim'}\r\n                {score === 2 && 'Regular'}\r\n                {score === 3 && 'Bom'}\r\n                {score === 4 && 'Muito Bom'}\r\n                {score === 5 && 'Excelente'}\r\n              </span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {selectedScore > 0 && (\r\n          <div className=\"text-center bg-white/5 rounded-lg p-3 border border-white/10\">\r\n            <p className=\"text-white/80 text-sm\">Sua avalia√ß√£o:</p>\r\n            <p className=\"text-2xl font-bold text-yellow-400 mt-1\">{selectedScore} ‚≠ê</p>\r\n          </div>\r\n        )}\r\n\r\n        {existingRating && (\r\n          <div className=\"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3\">\r\n            <p className=\"text-sm text-blue-200\">\r\n              üí° Voc√™ j√° avaliou este {ratingType === 'host' ? 'anfitri√£o' : 'participante'}. \r\n              Clique em &apos;Enviar&apos; para atualizar sua avalia√ß√£o.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex gap-3 pt-4\">\r\n          <Button\r\n            onClick={onClose}\r\n            disabled={isLoading}\r\n            variant=\"outline\"\r\n            className=\"flex-1 border-white/20 text-white hover:bg-white/10\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={handleSubmit}\r\n            disabled={!selectedScore || isLoading}\r\n            className=\"flex-1 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white font-semibold\"\r\n          >\r\n            {isLoading ? 'Enviando...' : 'Enviar'}\r\n          </Button>\r\n        </div>\r\n\r\n        <button\r\n          onClick={onClose}\r\n          disabled={isLoading}\r\n          className=\"absolute top-4 right-4 text-white/60 hover:text-white disabled:opacity-50 transition-colors\"\r\n        >\r\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nRatingModal.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  eventId: PropTypes.number.isRequired,\r\n  raterId: PropTypes.string.isRequired,\r\n  ratedId: PropTypes.string.isRequired,\r\n  ratedName: PropTypes.string.isRequired,\r\n  ratingType: PropTypes.oneOf(['host', 'participant']).isRequired,\r\n  onRatingSubmit: PropTypes.func\r\n};\r\n\r\nexport default RatingModal;"],"version":3}