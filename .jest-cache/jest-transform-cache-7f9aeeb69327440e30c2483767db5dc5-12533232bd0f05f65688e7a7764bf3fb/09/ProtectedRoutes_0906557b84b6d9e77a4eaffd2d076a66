961ae4118f0bff4505577e31e7ded2bf
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProtectedPartnerRoute = exports.ProtectedUserRoute = exports.ProtectedRoute = void 0;
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
// src/ProtectedRoutes.jsx
const prop_types_1 = tslib_1.__importDefault(require("prop-types")); // Importe PropTypes
const react_router_dom_1 = require("react-router-dom");
const AuthContext_1 = require("@/contexts/AuthContext");
const ProtectedRoute = ({ children }) => {
    const { user, loading, profile } = (0, AuthContext_1.useAuth)();
    const isLoading = loading || (user && !profile);
    if (isLoading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "w-screen h-screen flex items-center justify-center bg-background", children: (0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary" }) }));
    }
    if (!user) {
        return (0, jsx_runtime_1.jsx)(react_router_dom_1.Navigate, { to: "/login", replace: true });
    }
    return children ? children : (0, jsx_runtime_1.jsx)(react_router_dom_1.Outlet, {});
};
exports.ProtectedRoute = ProtectedRoute;
exports.ProtectedRoute.propTypes = {
    children: prop_types_1.default.node,
};
const ProtectedUserRoute = ({ children }) => {
    const { profile } = (0, AuthContext_1.useAuth)();
    const isPartner = profile?.profile_type === 'partner' || profile?.partner_id != null;
    if (isPartner) {
        return (0, jsx_runtime_1.jsx)(react_router_dom_1.Navigate, { to: "/partner/dashboard", replace: true });
    }
    return (0, jsx_runtime_1.jsx)(exports.ProtectedRoute, { children: children });
};
exports.ProtectedUserRoute = ProtectedUserRoute;
exports.ProtectedUserRoute.propTypes = {
    children: prop_types_1.default.node.isRequired,
};
const ProtectedPartnerRoute = ({ children }) => {
    const { profile } = (0, AuthContext_1.useAuth)();
    const isPartner = profile?.profile_type === 'partner' || profile?.partner_id != null;
    if (!isPartner) {
        return (0, jsx_runtime_1.jsx)(react_router_dom_1.Navigate, { to: "/dashboard", replace: true });
    }
    return (0, jsx_runtime_1.jsx)(exports.ProtectedRoute, { children: children });
};
exports.ProtectedPartnerRoute = ProtectedPartnerRoute;
exports.ProtectedPartnerRoute.propTypes = {
    children: prop_types_1.default.node.isRequired,
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxQcm90ZWN0ZWRSb3V0ZXMuanN4IiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsMEJBQTBCO0FBQzFCLG9FQUFtQyxDQUFDLG9CQUFvQjtBQUN4RCx1REFBb0Q7QUFDcEQsd0RBQWlEO0FBRTFDLE1BQU0sY0FBYyxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFO0lBQzdDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUEscUJBQU8sR0FBRSxDQUFDO0lBQzdDLE1BQU0sU0FBUyxHQUFHLE9BQU8sSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRWhELElBQUksU0FBUyxFQUFFLENBQUM7UUFDZCxPQUFPLENBQ0wsZ0NBQUssU0FBUyxFQUFDLGtFQUFrRSxZQUMvRSxnQ0FBSyxTQUFTLEVBQUMsMEVBQTBFLEdBQU8sR0FDNUYsQ0FDUCxDQUFDO0lBQ0osQ0FBQztJQUVELElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNWLE9BQU8sdUJBQUMsMkJBQVEsSUFBQyxFQUFFLEVBQUMsUUFBUSxFQUFDLE9BQU8sU0FBRyxDQUFDO0lBQzFDLENBQUM7SUFFRCxPQUFPLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyx1QkFBQyx5QkFBTSxLQUFHLENBQUM7QUFDMUMsQ0FBQyxDQUFDO0FBakJXLFFBQUEsY0FBYyxrQkFpQnpCO0FBRUYsc0JBQWMsQ0FBQyxTQUFTLEdBQUc7SUFDekIsUUFBUSxFQUFFLG9CQUFTLENBQUMsSUFBSTtDQUN6QixDQUFDO0FBRUssTUFBTSxrQkFBa0IsR0FBRyxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTtJQUNqRCxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsSUFBQSxxQkFBTyxHQUFFLENBQUM7SUFDOUIsTUFBTSxTQUFTLEdBQUcsT0FBTyxFQUFFLFlBQVksS0FBSyxTQUFTLElBQUksT0FBTyxFQUFFLFVBQVUsSUFBSSxJQUFJLENBQUM7SUFFckYsSUFBSSxTQUFTLEVBQUUsQ0FBQztRQUNkLE9BQU8sdUJBQUMsMkJBQVEsSUFBQyxFQUFFLEVBQUMsb0JBQW9CLEVBQUMsT0FBTyxTQUFHLENBQUM7SUFDdEQsQ0FBQztJQUVELE9BQU8sdUJBQUMsc0JBQWMsY0FBRSxRQUFRLEdBQWtCLENBQUM7QUFDckQsQ0FBQyxDQUFDO0FBVFcsUUFBQSxrQkFBa0Isc0JBUzdCO0FBRUYsMEJBQWtCLENBQUMsU0FBUyxHQUFHO0lBQzdCLFFBQVEsRUFBRSxvQkFBUyxDQUFDLElBQUksQ0FBQyxVQUFVO0NBQ3BDLENBQUM7QUFFSyxNQUFNLHFCQUFxQixHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFO0lBQ3BELE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFBLHFCQUFPLEdBQUUsQ0FBQztJQUM5QixNQUFNLFNBQVMsR0FBRyxPQUFPLEVBQUUsWUFBWSxLQUFLLFNBQVMsSUFBSSxPQUFPLEVBQUUsVUFBVSxJQUFJLElBQUksQ0FBQztJQUVyRixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDZixPQUFPLHVCQUFDLDJCQUFRLElBQUMsRUFBRSxFQUFDLFlBQVksRUFBQyxPQUFPLFNBQUcsQ0FBQztJQUM5QyxDQUFDO0lBRUQsT0FBTyx1QkFBQyxzQkFBYyxjQUFFLFFBQVEsR0FBa0IsQ0FBQztBQUNyRCxDQUFDLENBQUM7QUFUVyxRQUFBLHFCQUFxQix5QkFTaEM7QUFFRiw2QkFBcUIsQ0FBQyxTQUFTLEdBQUc7SUFDaEMsUUFBUSxFQUFFLG9CQUFTLENBQUMsSUFBSSxDQUFDLFVBQVU7Q0FDcEMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcREVWTWl4XFxBcHAuTWVzYXByYTIuY29tXFxzcmNcXFByb3RlY3RlZFJvdXRlcy5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL1Byb3RlY3RlZFJvdXRlcy5qc3hcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsgLy8gSW1wb3J0ZSBQcm9wVHlwZXNcclxuaW1wb3J0IHsgTmF2aWdhdGUsIE91dGxldCB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9jb250ZXh0cy9BdXRoQ29udGV4dCc7XHJcblxyXG5leHBvcnQgY29uc3QgUHJvdGVjdGVkUm91dGUgPSAoeyBjaGlsZHJlbiB9KSA9PiB7XHJcbiAgY29uc3QgeyB1c2VyLCBsb2FkaW5nLCBwcm9maWxlIH0gPSB1c2VBdXRoKCk7XHJcbiAgY29uc3QgaXNMb2FkaW5nID0gbG9hZGluZyB8fCAodXNlciAmJiAhcHJvZmlsZSk7XHJcblxyXG4gIGlmIChpc0xvYWRpbmcpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1zY3JlZW4gaC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmFja2dyb3VuZFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1wcmltYXJ5XCI+PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmICghdXNlcikge1xyXG4gICAgcmV0dXJuIDxOYXZpZ2F0ZSB0bz1cIi9sb2dpblwiIHJlcGxhY2UgLz47XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2hpbGRyZW4gPyBjaGlsZHJlbiA6IDxPdXRsZXQgLz47XHJcbn07XHJcblxyXG5Qcm90ZWN0ZWRSb3V0ZS5wcm9wVHlwZXMgPSB7XHJcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFByb3RlY3RlZFVzZXJSb3V0ZSA9ICh7IGNoaWxkcmVuIH0pID0+IHtcclxuICBjb25zdCB7IHByb2ZpbGUgfSA9IHVzZUF1dGgoKTtcclxuICBjb25zdCBpc1BhcnRuZXIgPSBwcm9maWxlPy5wcm9maWxlX3R5cGUgPT09ICdwYXJ0bmVyJyB8fCBwcm9maWxlPy5wYXJ0bmVyX2lkICE9IG51bGw7XHJcblxyXG4gIGlmIChpc1BhcnRuZXIpIHtcclxuICAgIHJldHVybiA8TmF2aWdhdGUgdG89XCIvcGFydG5lci9kYXNoYm9hcmRcIiByZXBsYWNlIC8+O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIDxQcm90ZWN0ZWRSb3V0ZT57Y2hpbGRyZW59PC9Qcm90ZWN0ZWRSb3V0ZT47XHJcbn07XHJcblxyXG5Qcm90ZWN0ZWRVc2VyUm91dGUucHJvcFR5cGVzID0ge1xyXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFByb3RlY3RlZFBhcnRuZXJSb3V0ZSA9ICh7IGNoaWxkcmVuIH0pID0+IHtcclxuICBjb25zdCB7IHByb2ZpbGUgfSA9IHVzZUF1dGgoKTtcclxuICBjb25zdCBpc1BhcnRuZXIgPSBwcm9maWxlPy5wcm9maWxlX3R5cGUgPT09ICdwYXJ0bmVyJyB8fCBwcm9maWxlPy5wYXJ0bmVyX2lkICE9IG51bGw7XHJcblxyXG4gIGlmICghaXNQYXJ0bmVyKSB7XHJcbiAgICByZXR1cm4gPE5hdmlnYXRlIHRvPVwiL2Rhc2hib2FyZFwiIHJlcGxhY2UgLz47XHJcbiAgfVxyXG5cclxuICByZXR1cm4gPFByb3RlY3RlZFJvdXRlPntjaGlsZHJlbn08L1Byb3RlY3RlZFJvdXRlPjtcclxufTtcclxuXHJcblByb3RlY3RlZFBhcnRuZXJSb3V0ZS5wcm9wVHlwZXMgPSB7XHJcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsXHJcbn07Il0sInZlcnNpb24iOjN9