9f81995508498e05b25bdaefe6c13114
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const jsx_runtime_1 = require("react/jsx-runtime");
// src/components/Layout.jsx
const react_1 = require("react");
const react_router_dom_1 = require("react-router-dom");
const prop_types_1 = tslib_1.__importDefault(require("prop-types"));
const lucide_react_1 = require("lucide-react");
const AuthContext_1 = require("@/contexts/AuthContext");
const Navbar_1 = tslib_1.__importDefault(require("@/features/shared/components/ui/Navbar"));
// === NavLink Component ===
const NavLink = ({ to, icon: Icon, label, onClick }) => {
    const location = (0, react_router_dom_1.useLocation)();
    const isActive = location.pathname === to ||
        (to === '/chats' && location.pathname.includes('/chat'));
    return ((0, jsx_runtime_1.jsxs)(react_router_dom_1.Link, { to: to, onClick: onClick, className: `flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${isActive
            ? 'text-white bg-purple-600/30'
            : 'text-white/70 hover:text-white hover:bg-white/10'}`, children: [(0, jsx_runtime_1.jsx)(Icon, { className: "mr-3 h-6 w-6 flex-shrink-0" }), label] }));
};
NavLink.propTypes = {
    to: prop_types_1.default.string.isRequired,
    icon: prop_types_1.default.elementType.isRequired,
    label: prop_types_1.default.string.isRequired,
    onClick: prop_types_1.default.func,
};
// === SidebarContent Component ===
const SidebarContent = ({ onLinkClick, navLinks, bottomLinks, isPremium, isPremiumPartner }) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col h-full", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex items-center h-16 flex-shrink-0 px-4", children: (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-2xl font-bold gradient-text", children: "Mesapra2" }), isPremiumPartner ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-1 mt-1", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { className: "w-3 h-3 fill-yellow-500 text-yellow-500" }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs font-semibold text-yellow-500", children: "Premium Partner" })] })) : isPremium ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-1 mt-1", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Star, { className: "w-3 h-3 fill-yellow-500 text-yellow-500" }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs font-semibold text-yellow-500", children: "Premium" })] })) : null] }) }), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1 overflow-y-auto", children: [(0, jsx_runtime_1.jsx)("nav", { className: "flex-1 px-2 py-4 space-y-2", children: navLinks.map((link) => ((0, jsx_runtime_1.jsx)(NavLink, { ...link, onClick: onLinkClick }, link.to))) }), bottomLinks.length > 0 && ((0, jsx_runtime_1.jsx)("nav", { className: "px-2 py-4 space-y-1 border-t border-white/10", children: bottomLinks.map((link) => ((0, jsx_runtime_1.jsx)(NavLink, { ...link, onClick: onLinkClick }, link.to))) }))] })] }));
SidebarContent.propTypes = {
    onLinkClick: prop_types_1.default.func,
    navLinks: prop_types_1.default.arrayOf(prop_types_1.default.object).isRequired,
    bottomLinks: prop_types_1.default.arrayOf(prop_types_1.default.object).isRequired,
    isPartner: prop_types_1.default.bool.isRequired,
    isPremium: prop_types_1.default.bool.isRequired,
    isPremiumPartner: prop_types_1.default.bool.isRequired,
};
// === Main Layout Component ===
const Layout = () => {
    const { user, profile, loading } = (0, AuthContext_1.useAuth)();
    const [isSidebarOpen, setSidebarOpen] = (0, react_1.useState)(false);
    // === Derivações do perfil ===
    const isPartner = profile?.profile_type === 'partner' || profile?.partner_id != null;
    const isPremium = profile?.is_premium === true;
    const isPremiumPartner = profile?.isPremiumPartner === true;
    // === Links da navegação (memoizados) ===
    const { navLinks, bottomLinks } = (0, react_1.useMemo)(() => {
        // ✅ LINKS BASE COMPARTILHADOS
        const baseLinks = [
            { to: '/events', icon: lucide_react_1.Calendar, label: 'Eventos' },
            { to: '/restaurants', icon: lucide_react_1.UtensilsCrossed, label: 'Restaurantes' },
            { to: '/people', icon: lucide_react_1.Users, label: 'Pessoas' },
            { to: '/chats', icon: lucide_react_1.MessageSquare, label: 'Chats' },
        ];
        if (isPartner) {
            // === NAVEGAÇÃO PARA PARCEIROS ===
            const partnerNavLinks = [
                { to: '/partner/dashboard', icon: lucide_react_1.Home, label: 'Dashboard' },
                ...baseLinks,
            ];
            // ✅ SE FOR PREMIUM PARTNER, ADICIONA "MEUS EVENTOS" E "CRIAR EVENTO"
            if (isPremiumPartner) {
                partnerNavLinks.splice(1, 0, {
                    to: '/meus-eventos',
                    icon: lucide_react_1.Calendar,
                    label: 'Meus Eventos'
                });
                partnerNavLinks.splice(2, 0, {
                    to: '/partner/create-event',
                    icon: lucide_react_1.Plus,
                    label: 'Criar Evento'
                });
            }
            return {
                navLinks: partnerNavLinks,
                bottomLinks: user
                    ? [
                        {
                            to: `/restaurant/${profile.partner_id}`,
                            icon: lucide_react_1.Store,
                            label: 'Meu Restaurante'
                        },
                        {
                            to: '/partner/settings',
                            icon: lucide_react_1.Settings,
                            label: 'Minha Conta'
                        },
                    ]
                    : [],
            };
        }
        // === NAVEGAÇÃO PARA USUÁRIOS NORMAIS ===
        // ✅ CORREÇÃO: Cada link aponta para sua rota correta
        const userNavLinks = [
            { to: '/dashboard', icon: lucide_react_1.Home, label: 'Dashboard' },
            { to: '/meus-eventos', icon: lucide_react_1.Calendar, label: 'Meus Eventos' },
            { to: '/events', icon: lucide_react_1.Calendar, label: 'Eventos' },
            { to: '/restaurants', icon: lucide_react_1.UtensilsCrossed, label: 'Restaurantes' },
            { to: '/people', icon: lucide_react_1.Users, label: 'Pessoas' },
            { to: '/chats', icon: lucide_react_1.MessageSquare, label: 'Chats' },
        ];
        const userBottomLinks = user
            ? [
                { to: `/profile/${user.id}`, icon: lucide_react_1.User, label: 'Meu Perfil' },
                { to: '/settings', icon: lucide_react_1.Settings, label: 'Minha Conta' },
            ]
            : [];
        return {
            navLinks: userNavLinks,
            bottomLinks: userBottomLinks,
        };
    }, [isPartner, isPremiumPartner, user, profile]);
    const toggleSidebar = () => setSidebarOpen((prev) => !prev);
    // === Loading State ===
    if (loading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center w-screen h-screen bg-background", children: (0, jsx_runtime_1.jsx)("div", { className: "w-12 h-12 border-t-2 border-b-2 rounded-full border-primary animate-spin" }) }));
    }
    // === Unauthenticated User (Login/Register) ===
    if (!user) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "min-h-screen bg-background text-foreground", children: (0, jsx_runtime_1.jsx)("main", { className: "flex-1", children: (0, jsx_runtime_1.jsx)("div", { className: "container px-4 mx-auto sm:px-6 lg:px-8", children: (0, jsx_runtime_1.jsx)(react_router_dom_1.Outlet, {}) }) }) }));
    }
    // === Authenticated Layout ===
    return ((0, jsx_runtime_1.jsxs)("div", { className: "flex min-h-screen bg-background text-foreground", children: [(0, jsx_runtime_1.jsx)("aside", { className: "hidden md:flex md:flex-shrink-0 w-64 border-r border-white/10", children: (0, jsx_runtime_1.jsx)(SidebarContent, { navLinks: navLinks, bottomLinks: bottomLinks, isPartner: isPartner, isPremium: isPremium, isPremiumPartner: isPremiumPartner }) }), isSidebarOpen && ((0, jsx_runtime_1.jsx)("div", { className: "fixed inset-0 z-40 bg-black/60 md:hidden", onClick: toggleSidebar, "aria-hidden": "true" })), (0, jsx_runtime_1.jsx)("aside", { className: `fixed top-0 left-0 z-50 w-64 h-full bg-background border-r border-white/10 transform transition-transform duration-300 ease-in-out md:hidden ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'}`, children: (0, jsx_runtime_1.jsx)(SidebarContent, { onLinkClick: toggleSidebar, navLinks: navLinks, bottomLinks: bottomLinks, isPartner: isPartner, isPremium: isPremium, isPremiumPartner: isPremiumPartner }) }), (0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col flex-1", children: [(0, jsx_runtime_1.jsx)("div", { className: "relative z-50", children: (0, jsx_runtime_1.jsx)(Navbar_1.default, { toggleSidebar: toggleSidebar }) }), (0, jsx_runtime_1.jsx)("main", { className: "flex-1 pt-4 pb-6 overflow-y-auto md:pt-6", children: (0, jsx_runtime_1.jsx)("div", { className: "container px-4 mx-auto sm:px-6 lg:px-8", children: (0, jsx_runtime_1.jsx)(react_router_dom_1.Outlet, {}) }) })] })] }));
};
exports.default = Layout;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXERFVk1peFxcQXBwLk1lc2FwcmEyLmNvbVxcc3JjXFxjb21wb25lbnRzXFxMYXlvdXQuanN4IiwibWFwcGluZ3MiOiI7Ozs7QUFBQSw0QkFBNEI7QUFDNUIsaUNBQTBDO0FBQzFDLHVEQUE2RDtBQUM3RCxvRUFBbUM7QUFDbkMsK0NBV3NCO0FBQ3RCLHdEQUFpRDtBQUNqRCw0RkFBNEQ7QUFFNUQsNEJBQTRCO0FBQzVCLE1BQU0sT0FBTyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUNyRCxNQUFNLFFBQVEsR0FBRyxJQUFBLDhCQUFXLEdBQUUsQ0FBQztJQUMvQixNQUFNLFFBQVEsR0FDWixRQUFRLENBQUMsUUFBUSxLQUFLLEVBQUU7UUFDeEIsQ0FBQyxFQUFFLEtBQUssUUFBUSxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFFM0QsT0FBTyxDQUNMLHdCQUFDLHVCQUFJLElBQ0gsRUFBRSxFQUFFLEVBQUUsRUFDTixPQUFPLEVBQUUsT0FBTyxFQUNoQixTQUFTLEVBQUUsNkZBQ1QsUUFBUTtZQUNOLENBQUMsQ0FBQyw2QkFBNkI7WUFDL0IsQ0FBQyxDQUFDLGtEQUNOLEVBQUUsYUFFRix1QkFBQyxJQUFJLElBQUMsU0FBUyxFQUFDLDRCQUE0QixHQUFHLEVBQzlDLEtBQUssSUFDRCxDQUNSLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixPQUFPLENBQUMsU0FBUyxHQUFHO0lBQ2xCLEVBQUUsRUFBRSxvQkFBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0lBQy9CLElBQUksRUFBRSxvQkFBUyxDQUFDLFdBQVcsQ0FBQyxVQUFVO0lBQ3RDLEtBQUssRUFBRSxvQkFBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO0lBQ2xDLE9BQU8sRUFBRSxvQkFBUyxDQUFDLElBQUk7Q0FDeEIsQ0FBQztBQUVGLG1DQUFtQztBQUNuQyxNQUFNLGNBQWMsR0FB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QUFFLFlBRUYsdUJBQUMsY0FBYyxJQUNiLFdBQVcsRUFBRSxhQUFhLEVBQzFCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLGdCQUFnQixFQUFFLGdCQUFnQixHQUNsQyxHQUNJLEVBR1IsaUNBQUssU0FBUyxFQUFDLHNCQUFzQixhQUNuQyxnQ0FBSyxTQUFTLEVBQUMsZUFBZSxZQUM1Qix1QkFBQyxnQkFBTSxJQUFDLGFBQWEsRUFBRSxhQUFhLEdBQUksR0FDcEMsRUFFTixpQ0FBTSxTQUFTLEVBQUMsMENBQTBDLFlBQ3hELGdDQUFLLFNBQVMsRUFBQyx3Q0FBd0MsWUFDckQsdUJBQUMseUJBQU0sS0FBRyxHQUNOLEdBQ0QsSUFDSCxJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGtCQUFlLE1BQU0sQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcREVWTWl4XFxBcHAuTWVzYXByYTIuY29tXFxzcmNcXGNvbXBvbmVudHNcXExheW91dC5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvTGF5b3V0LmpzeFxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgT3V0bGV0LCBMaW5rLCB1c2VMb2NhdGlvbiB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQge1xyXG4gIEhvbWUsXHJcbiAgQ2FsZW5kYXIsXHJcbiAgVXNlcixcclxuICBTZXR0aW5ncyxcclxuICBVdGVuc2lsc0Nyb3NzZWQsXHJcbiAgVXNlcnMsXHJcbiAgTWVzc2FnZVNxdWFyZSxcclxuICBTdGFyLFxyXG4gIFN0b3JlLFxyXG4gIFBsdXMsXHJcbn0gZnJvbSAnbHVjaWRlLXJlYWN0JztcclxuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xyXG5pbXBvcnQgTmF2YmFyIGZyb20gJ0AvZmVhdHVyZXMvc2hhcmVkL2NvbXBvbmVudHMvdWkvTmF2YmFyJztcclxuXHJcbi8vID09PSBOYXZMaW5rIENvbXBvbmVudCA9PT1cclxuY29uc3QgTmF2TGluayA9ICh7IHRvLCBpY29uOiBJY29uLCBsYWJlbCwgb25DbGljayB9KSA9PiB7XHJcbiAgY29uc3QgbG9jYXRpb24gPSB1c2VMb2NhdGlvbigpO1xyXG4gIGNvbnN0IGlzQWN0aXZlID1cclxuICAgIGxvY2F0aW9uLnBhdGhuYW1lID09PSB0byB8fFxyXG4gICAgKHRvID09PSAnL2NoYXRzJyAmJiBsb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygnL2NoYXQnKSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8TGlua1xyXG4gICAgICB0bz17dG99XHJcbiAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XHJcbiAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIHB4LTMgcHktMiB0ZXh0LXNtIGZvbnQtbWVkaXVtIHJvdW5kZWQtbWQgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwICR7XHJcbiAgICAgICAgaXNBY3RpdmVcclxuICAgICAgICAgID8gJ3RleHQtd2hpdGUgYmctcHVycGxlLTYwMC8zMCdcclxuICAgICAgICAgIDogJ3RleHQtd2hpdGUvNzAgaG92ZXI6dGV4dC13aGl0ZSBob3ZlcjpiZy13aGl0ZS8xMCdcclxuICAgICAgfWB9XHJcbiAgICA+XHJcbiAgICAgIDxJY29uIGNsYXNzTmFtZT1cIm1yLTMgaC02IHctNiBmbGV4LXNocmluay0wXCIgLz5cclxuICAgICAge2xhYmVsfVxyXG4gICAgPC9MaW5rPlxyXG4gICk7XHJcbn07XHJcblxyXG5OYXZMaW5rLnByb3BUeXBlcyA9IHtcclxuICB0bzogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gIGljb246IFByb3BUeXBlcy5lbGVtZW50VHlwZS5pc1JlcXVpcmVkLFxyXG4gIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgb25DbGljazogUHJvcFR5cGVzLmZ1bmMsXHJcbn07XHJcblxyXG4vLyA9PT0gU2lkZWJhckNvbnRlbnQgQ29tcG9uZW50ID09PVxyXG5jb25zdCBTaWRlYmFyQ29udGVudCA9ICh7IG9uTGlua0NsaWNrLCBuYXZMaW5rcywgYm90dG9tTGlua3MsIGlzUHJlbWl1bSwgaXNQcmVtaXVtUGFydG5lciB9KSA9PiAoXHJcbiAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbFwiPlxyXG4gICAgey8qIExvZ28gKyBQcmVtaXVtIEJhZGdlICovfVxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBoLTE2IGZsZXgtc2hyaW5rLTAgcHgtNFwiPlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgZ3JhZGllbnQtdGV4dFwiPk1lc2FwcmEyPC9oMT5cclxuICAgICAgICB7LyogTW9zdHJhIGJhZGdlIFByZW1pdW0gUGFydG5lciBzZSBmb3IgcGFyY2Vpcm8gcHJlbWl1bSwgc2Vuw6NvIG1vc3RyYSBQcmVtaXVtIG5vcm1hbCAqL31cclxuICAgICAgICB7aXNQcmVtaXVtUGFydG5lciA/IChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgbXQtMVwiPlxyXG4gICAgICAgICAgICA8U3RhciBjbGFzc05hbWU9XCJ3LTMgaC0zIGZpbGwteWVsbG93LTUwMCB0ZXh0LXllbGxvdy01MDBcIiAvPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC15ZWxsb3ctNTAwXCI+UHJlbWl1bSBQYXJ0bmVyPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSA6IGlzUHJlbWl1bSA/IChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgbXQtMVwiPlxyXG4gICAgICAgICAgICA8U3RhciBjbGFzc05hbWU9XCJ3LTMgaC0zIGZpbGwteWVsbG93LTUwMCB0ZXh0LXllbGxvdy01MDBcIiAvPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC15ZWxsb3ctNTAwXCI+UHJlbWl1bTwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICkgOiBudWxsfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIHsvKiBNYWluIE5hdmlnYXRpb24gKi99XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG9cIj5cclxuICAgICAgPG5hdiBjbGFzc05hbWU9XCJmbGV4LTEgcHgtMiBweS00IHNwYWNlLXktMlwiPlxyXG4gICAgICAgIHtuYXZMaW5rcy5tYXAoKGxpbmspID0+IChcclxuICAgICAgICAgIDxOYXZMaW5rIGtleT17bGluay50b30gey4uLmxpbmt9IG9uQ2xpY2s9e29uTGlua0NsaWNrfSAvPlxyXG4gICAgICAgICkpfVxyXG4gICAgICA8L25hdj5cclxuXHJcbiAgICAgIHsvKiBCb3R0b20gTGlua3MgKi99XHJcbiAgICAgIHtib3R0b21MaW5rcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICA8bmF2IGNsYXNzTmFtZT1cInB4LTIgcHktNCBzcGFjZS15LTEgYm9yZGVyLXQgYm9yZGVyLXdoaXRlLzEwXCI+XHJcbiAgICAgICAgICB7Ym90dG9tTGlua3MubWFwKChsaW5rKSA9PiAoXHJcbiAgICAgICAgICAgIDxOYXZMaW5rIGtleT17bGluay50b30gey4uLmxpbmt9IG9uQ2xpY2s9e29uTGlua0NsaWNrfSAvPlxyXG4gICAgICAgICAgKSl9XHJcbiAgICAgICAgPC9uYXY+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuKTtcclxuXHJcblNpZGViYXJDb250ZW50LnByb3BUeXBlcyA9IHtcclxuICBvbkxpbmtDbGljazogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgbmF2TGlua3M6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5vYmplY3QpLmlzUmVxdWlyZWQsXHJcbiAgYm90dG9tTGlua3M6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5vYmplY3QpLmlzUmVxdWlyZWQsXHJcbiAgaXNQYXJ0bmVyOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxyXG4gIGlzUHJlbWl1bTogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcclxuICBpc1ByZW1pdW1QYXJ0bmVyOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxyXG59O1xyXG5cclxuLy8gPT09IE1haW4gTGF5b3V0IENvbXBvbmVudCA9PT1cclxuY29uc3QgTGF5b3V0ID0gKCkgPT4ge1xyXG4gIGNvbnN0IHsgdXNlciwgcHJvZmlsZSwgbG9hZGluZyB9ID0gdXNlQXV0aCgpO1xyXG4gIGNvbnN0IFtpc1NpZGViYXJPcGVuLCBzZXRTaWRlYmFyT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIC8vID09PSBEZXJpdmHDp8O1ZXMgZG8gcGVyZmlsID09PVxyXG4gIGNvbnN0IGlzUGFydG5lciA9IHByb2ZpbGU/LnByb2ZpbGVfdHlwZSA9PT0gJ3BhcnRuZXInIHx8IHByb2ZpbGU/LnBhcnRuZXJfaWQgIT0gbnVsbDtcclxuICBjb25zdCBpc1ByZW1pdW0gPSBwcm9maWxlPy5pc19wcmVtaXVtID09PSB0cnVlO1xyXG4gIGNvbnN0IGlzUHJlbWl1bVBhcnRuZXIgPSBwcm9maWxlPy5pc1ByZW1pdW1QYXJ0bmVyID09PSB0cnVlO1xyXG5cclxuICAvLyA9PT0gTGlua3MgZGEgbmF2ZWdhw6fDo28gKG1lbW9pemFkb3MpID09PVxyXG4gIGNvbnN0IHsgbmF2TGlua3MsIGJvdHRvbUxpbmtzIH0gPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIC8vIOKchSBMSU5LUyBCQVNFIENPTVBBUlRJTEhBRE9TXHJcbiAgICBjb25zdCBiYXNlTGlua3MgPSBbXHJcbiAgICAgIHsgdG86ICcvZXZlbnRzJywgaWNvbjogQ2FsZW5kYXIsIGxhYmVsOiAnRXZlbnRvcycgfSxcclxuICAgICAgeyB0bzogJy9yZXN0YXVyYW50cycsIGljb246IFV0ZW5zaWxzQ3Jvc3NlZCwgbGFiZWw6ICdSZXN0YXVyYW50ZXMnIH0sXHJcbiAgICAgIHsgdG86ICcvcGVvcGxlJywgaWNvbjogVXNlcnMsIGxhYmVsOiAnUGVzc29hcycgfSxcclxuICAgICAgeyB0bzogJy9jaGF0cycsIGljb246IE1lc3NhZ2VTcXVhcmUsIGxhYmVsOiAnQ2hhdHMnIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIGlmIChpc1BhcnRuZXIpIHtcclxuICAgICAgLy8gPT09IE5BVkVHQcOHw4NPIFBBUkEgUEFSQ0VJUk9TID09PVxyXG4gICAgICBjb25zdCBwYXJ0bmVyTmF2TGlua3MgPSBbXHJcbiAgICAgICAgeyB0bzogJy9wYXJ0bmVyL2Rhc2hib2FyZCcsIGljb246IEhvbWUsIGxhYmVsOiAnRGFzaGJvYXJkJyB9LFxyXG4gICAgICAgIC4uLmJhc2VMaW5rcyxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIC8vIOKchSBTRSBGT1IgUFJFTUlVTSBQQVJUTkVSLCBBRElDSU9OQSBcIk1FVVMgRVZFTlRPU1wiIEUgXCJDUklBUiBFVkVOVE9cIlxyXG4gICAgICBpZiAoaXNQcmVtaXVtUGFydG5lcikge1xyXG4gICAgICAgIHBhcnRuZXJOYXZMaW5rcy5zcGxpY2UoMSwgMCwgeyBcclxuICAgICAgICAgIHRvOiAnL21ldXMtZXZlbnRvcycsIFxyXG4gICAgICAgICAgaWNvbjogQ2FsZW5kYXIsIFxyXG4gICAgICAgICAgbGFiZWw6ICdNZXVzIEV2ZW50b3MnIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBhcnRuZXJOYXZMaW5rcy5zcGxpY2UoMiwgMCwgeyBcclxuICAgICAgICAgIHRvOiAnL3BhcnRuZXIvY3JlYXRlLWV2ZW50JywgXHJcbiAgICAgICAgICBpY29uOiBQbHVzLCBcclxuICAgICAgICAgIGxhYmVsOiAnQ3JpYXIgRXZlbnRvJyBcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBuYXZMaW5rczogcGFydG5lck5hdkxpbmtzLFxyXG4gICAgICAgIGJvdHRvbUxpbmtzOiB1c2VyXHJcbiAgICAgICAgICA/IFtcclxuICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgdG86IGAvcmVzdGF1cmFudC8ke3Byb2ZpbGUucGFydG5lcl9pZH1gLCBcclxuICAgICAgICAgICAgICAgIGljb246IFN0b3JlLCBcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnTWV1IFJlc3RhdXJhbnRlJyBcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICB0bzogJy9wYXJ0bmVyL3NldHRpbmdzJywgXHJcbiAgICAgICAgICAgICAgICBpY29uOiBTZXR0aW5ncywgXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ01pbmhhIENvbnRhJyBcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICA6IFtdLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vID09PSBOQVZFR0HDh8ODTyBQQVJBIFVTVcOBUklPUyBOT1JNQUlTID09PVxyXG4gICAgLy8g4pyFIENPUlJFw4fDg086IENhZGEgbGluayBhcG9udGEgcGFyYSBzdWEgcm90YSBjb3JyZXRhXHJcbiAgICBjb25zdCB1c2VyTmF2TGlua3MgPSBbXHJcbiAgICAgIHsgdG86ICcvZGFzaGJvYXJkJywgaWNvbjogSG9tZSwgbGFiZWw6ICdEYXNoYm9hcmQnIH0sXHJcbiAgICAgIHsgdG86ICcvbWV1cy1ldmVudG9zJywgaWNvbjogQ2FsZW5kYXIsIGxhYmVsOiAnTWV1cyBFdmVudG9zJyB9LFxyXG4gICAgICB7IHRvOiAnL2V2ZW50cycsIGljb246IENhbGVuZGFyLCBsYWJlbDogJ0V2ZW50b3MnIH0sXHJcbiAgICAgIHsgdG86ICcvcmVzdGF1cmFudHMnLCBpY29uOiBVdGVuc2lsc0Nyb3NzZWQsIGxhYmVsOiAnUmVzdGF1cmFudGVzJyB9LFxyXG4gICAgICB7IHRvOiAnL3Blb3BsZScsIGljb246IFVzZXJzLCBsYWJlbDogJ1Blc3NvYXMnIH0sXHJcbiAgICAgIHsgdG86ICcvY2hhdHMnLCBpY29uOiBNZXNzYWdlU3F1YXJlLCBsYWJlbDogJ0NoYXRzJyB9LFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCB1c2VyQm90dG9tTGlua3MgPSB1c2VyXHJcbiAgICAgID8gW1xyXG4gICAgICAgICAgeyB0bzogYC9wcm9maWxlLyR7dXNlci5pZH1gLCBpY29uOiBVc2VyLCBsYWJlbDogJ01ldSBQZXJmaWwnIH0sXHJcbiAgICAgICAgICB7IHRvOiAnL3NldHRpbmdzJywgaWNvbjogU2V0dGluZ3MsIGxhYmVsOiAnTWluaGEgQ29udGEnIH0sXHJcbiAgICAgICAgXVxyXG4gICAgICA6IFtdO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hdkxpbmtzOiB1c2VyTmF2TGlua3MsXHJcbiAgICAgIGJvdHRvbUxpbmtzOiB1c2VyQm90dG9tTGlua3MsXHJcbiAgICB9O1xyXG4gIH0sIFtpc1BhcnRuZXIsIGlzUHJlbWl1bVBhcnRuZXIsIHVzZXIsIHByb2ZpbGVdKTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlU2lkZWJhciA9ICgpID0+IHNldFNpZGViYXJPcGVuKChwcmV2KSA9PiAhcHJldik7XHJcblxyXG4gIC8vID09PSBMb2FkaW5nIFN0YXRlID09PVxyXG4gIGlmIChsb2FkaW5nKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHctc2NyZWVuIGgtc2NyZWVuIGJnLWJhY2tncm91bmRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTIgaC0xMiBib3JkZXItdC0yIGJvcmRlci1iLTIgcm91bmRlZC1mdWxsIGJvcmRlci1wcmltYXJ5IGFuaW1hdGUtc3BpblwiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyA9PT0gVW5hdXRoZW50aWNhdGVkIFVzZXIgKExvZ2luL1JlZ2lzdGVyKSA9PT1cclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWJhY2tncm91bmQgdGV4dC1mb3JlZ3JvdW5kXCI+XHJcbiAgICAgICAgPG1haW4gY2xhc3NOYW1lPVwiZmxleC0xXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lciBweC00IG14LWF1dG8gc206cHgtNiBsZzpweC04XCI+XHJcbiAgICAgICAgICAgIDxPdXRsZXQgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvbWFpbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gPT09IEF1dGhlbnRpY2F0ZWQgTGF5b3V0ID09PVxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWluLWgtc2NyZWVuIGJnLWJhY2tncm91bmQgdGV4dC1mb3JlZ3JvdW5kXCI+XHJcbiAgICAgIHsvKiBEZXNrdG9wIFNpZGViYXIgKi99XHJcbiAgICAgIDxhc2lkZSBjbGFzc05hbWU9XCJoaWRkZW4gbWQ6ZmxleCBtZDpmbGV4LXNocmluay0wIHctNjQgYm9yZGVyLXIgYm9yZGVyLXdoaXRlLzEwXCI+XHJcbiAgICAgICAgPFNpZGViYXJDb250ZW50XHJcbiAgICAgICAgICBuYXZMaW5rcz17bmF2TGlua3N9XHJcbiAgICAgICAgICBib3R0b21MaW5rcz17Ym90dG9tTGlua3N9XHJcbiAgICAgICAgICBpc1BhcnRuZXI9e2lzUGFydG5lcn1cclxuICAgICAgICAgIGlzUHJlbWl1bT17aXNQcmVtaXVtfVxyXG4gICAgICAgICAgaXNQcmVtaXVtUGFydG5lcj17aXNQcmVtaXVtUGFydG5lcn1cclxuICAgICAgICAvPlxyXG4gICAgICA8L2FzaWRlPlxyXG5cclxuICAgICAgey8qIE1vYmlsZSBPdmVybGF5ICovfVxyXG4gICAgICB7aXNTaWRlYmFyT3BlbiAmJiAoXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LTQwIGJnLWJsYWNrLzYwIG1kOmhpZGRlblwiXHJcbiAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVTaWRlYmFyfVxyXG4gICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG5cclxuICAgICAgey8qIE1vYmlsZSBTaWRlYmFyICovfVxyXG4gICAgICA8YXNpZGVcclxuICAgICAgICBjbGFzc05hbWU9e2BmaXhlZCB0b3AtMCBsZWZ0LTAgei01MCB3LTY0IGgtZnVsbCBiZy1iYWNrZ3JvdW5kIGJvcmRlci1yIGJvcmRlci13aGl0ZS8xMCB0cmFuc2Zvcm0gdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMzAwIGVhc2UtaW4tb3V0IG1kOmhpZGRlbiAke1xyXG4gICAgICAgICAgaXNTaWRlYmFyT3BlbiA/ICd0cmFuc2xhdGUteC0wJyA6ICctdHJhbnNsYXRlLXgtZnVsbCdcclxuICAgICAgICB9YH1cclxuICAgICAgPlxyXG4gICAgICAgIDxTaWRlYmFyQ29udGVudFxyXG4gICAgICAgICAgb25MaW5rQ2xpY2s9e3RvZ2dsZVNpZGViYXJ9XHJcbiAgICAgICAgICBuYXZMaW5rcz17bmF2TGlua3N9XHJcbiAgICAgICAgICBib3R0b21MaW5rcz17Ym90dG9tTGlua3N9XHJcbiAgICAgICAgICBpc1BhcnRuZXI9e2lzUGFydG5lcn1cclxuICAgICAgICAgIGlzUHJlbWl1bT17aXNQcmVtaXVtfVxyXG4gICAgICAgICAgaXNQcmVtaXVtUGFydG5lcj17aXNQcmVtaXVtUGFydG5lcn1cclxuICAgICAgICAvPlxyXG4gICAgICA8L2FzaWRlPlxyXG5cclxuICAgICAgey8qIE1haW4gQ29udGVudCBBcmVhICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZmxleC0xXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSB6LTUwXCI+XHJcbiAgICAgICAgICA8TmF2YmFyIHRvZ2dsZVNpZGViYXI9e3RvZ2dsZVNpZGViYXJ9IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPG1haW4gY2xhc3NOYW1lPVwiZmxleC0xIHB0LTQgcGItNiBvdmVyZmxvdy15LWF1dG8gbWQ6cHQtNlwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXIgcHgtNCBteC1hdXRvIHNtOnB4LTYgbGc6cHgtOFwiPlxyXG4gICAgICAgICAgICA8T3V0bGV0IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L21haW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IExheW91dDsiXSwidmVyc2lvbiI6M30=