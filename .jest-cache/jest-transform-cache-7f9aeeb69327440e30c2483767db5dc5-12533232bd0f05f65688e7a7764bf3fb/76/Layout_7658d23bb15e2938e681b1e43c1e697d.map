{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\components\\Layout.jsx","mappings":"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","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\components\\Layout.jsx"],"sourcesContent":["// src/components/Layout.jsx\r\nimport { useState, useMemo } from 'react';\r\nimport { Outlet, Link, useLocation } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Home,\r\n  Calendar,\r\n  User,\r\n  Settings,\r\n  UtensilsCrossed,\r\n  Users,\r\n  MessageSquare,\r\n  Star,\r\n  Store,\r\n  Plus,\r\n} from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport Navbar from '@/features/shared/components/ui/Navbar';\r\n\r\n// === NavLink Component ===\r\nconst NavLink = ({ to, icon: Icon, label, onClick }) => {\r\n  const location = useLocation();\r\n  const isActive =\r\n    location.pathname === to ||\r\n    (to === '/chats' && location.pathname.includes('/chat'));\r\n\r\n  return (\r\n    <Link\r\n      to={to}\r\n      onClick={onClick}\r\n      className={`flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${\r\n        isActive\r\n          ? 'text-white bg-purple-600/30'\r\n          : 'text-white/70 hover:text-white hover:bg-white/10'\r\n      }`}\r\n    >\r\n      <Icon className=\"mr-3 h-6 w-6 flex-shrink-0\" />\r\n      {label}\r\n    </Link>\r\n  );\r\n};\r\n\r\nNavLink.propTypes = {\r\n  to: PropTypes.string.isRequired,\r\n  icon: PropTypes.elementType.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func,\r\n};\r\n\r\n// === SidebarContent Component ===\r\nconst SidebarContent = ({ onLinkClick, navLinks, bottomLinks, isPremium, isPremiumPartner }) => (\r\n  <div className=\"flex flex-col h-full\">\r\n    {/* Logo + Premium Badge */}\r\n    <div className=\"flex items-center h-16 flex-shrink-0 px-4\">\r\n      <div>\r\n        <h1 className=\"text-2xl font-bold gradient-text\">Mesapra2</h1>\r\n        {/* Mostra badge Premium Partner se for parceiro premium, senão mostra Premium normal */}\r\n        {isPremiumPartner ? (\r\n          <div className=\"flex items-center gap-1 mt-1\">\r\n            <Star className=\"w-3 h-3 fill-yellow-500 text-yellow-500\" />\r\n            <span className=\"text-xs font-semibold text-yellow-500\">Premium Partner</span>\r\n          </div>\r\n        ) : isPremium ? (\r\n          <div className=\"flex items-center gap-1 mt-1\">\r\n            <Star className=\"w-3 h-3 fill-yellow-500 text-yellow-500\" />\r\n            <span className=\"text-xs font-semibold text-yellow-500\">Premium</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n\r\n    {/* Main Navigation */}\r\n    <div className=\"flex-1 overflow-y-auto\">\r\n      <nav className=\"flex-1 px-2 py-4 space-y-2\">\r\n        {navLinks.map((link) => (\r\n          <NavLink key={link.to} {...link} onClick={onLinkClick} />\r\n        ))}\r\n      </nav>\r\n\r\n      {/* Bottom Links */}\r\n      {bottomLinks.length > 0 && (\r\n        <nav className=\"px-2 py-4 space-y-1 border-t border-white/10\">\r\n          {bottomLinks.map((link) => (\r\n            <NavLink key={link.to} {...link} onClick={onLinkClick} />\r\n          ))}\r\n        </nav>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nSidebarContent.propTypes = {\r\n  onLinkClick: PropTypes.func,\r\n  navLinks: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  bottomLinks: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  isPartner: PropTypes.bool.isRequired,\r\n  isPremium: PropTypes.bool.isRequired,\r\n  isPremiumPartner: PropTypes.bool.isRequired,\r\n};\r\n\r\n// === Main Layout Component ===\r\nconst Layout = () => {\r\n  const { user, profile, loading } = useAuth();\r\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // === Derivações do perfil ===\r\n  const isPartner = profile?.profile_type === 'partner' || profile?.partner_id != null;\r\n  const isPremium = profile?.is_premium === true;\r\n  const isPremiumPartner = profile?.isPremiumPartner === true;\r\n\r\n  // === Links da navegação (memoizados) ===\r\n  const { navLinks, bottomLinks } = useMemo(() => {\r\n    // ✅ LINKS BASE COMPARTILHADOS\r\n    const baseLinks = [\r\n      { to: '/events', icon: Calendar, label: 'Eventos' },\r\n      { to: '/restaurants', icon: UtensilsCrossed, label: 'Restaurantes' },\r\n      { to: '/people', icon: Users, label: 'Pessoas' },\r\n      { to: '/chats', icon: MessageSquare, label: 'Chats' },\r\n    ];\r\n\r\n    if (isPartner) {\r\n      // === NAVEGAÇÃO PARA PARCEIROS ===\r\n      const partnerNavLinks = [\r\n        { to: '/partner/dashboard', icon: Home, label: 'Dashboard' },\r\n        ...baseLinks,\r\n      ];\r\n\r\n      // ✅ SE FOR PREMIUM PARTNER, ADICIONA \"MEUS EVENTOS\" E \"CRIAR EVENTO\"\r\n      if (isPremiumPartner) {\r\n        partnerNavLinks.splice(1, 0, { \r\n          to: '/meus-eventos', \r\n          icon: Calendar, \r\n          label: 'Meus Eventos' \r\n        });\r\n        partnerNavLinks.splice(2, 0, { \r\n          to: '/partner/create-event', \r\n          icon: Plus, \r\n          label: 'Criar Evento' \r\n        });\r\n      }\r\n\r\n      return {\r\n        navLinks: partnerNavLinks,\r\n        bottomLinks: user\r\n          ? [\r\n              { \r\n                to: `/restaurant/${profile.partner_id}`, \r\n                icon: Store, \r\n                label: 'Meu Restaurante' \r\n              },\r\n              { \r\n                to: '/partner/settings', \r\n                icon: Settings, \r\n                label: 'Minha Conta' \r\n              },\r\n            ]\r\n          : [],\r\n      };\r\n    }\r\n\r\n    // === NAVEGAÇÃO PARA USUÁRIOS NORMAIS ===\r\n    // ✅ CORREÇÃO: Cada link aponta para sua rota correta\r\n    const userNavLinks = [\r\n      { to: '/dashboard', icon: Home, label: 'Dashboard' },\r\n      { to: '/meus-eventos', icon: Calendar, label: 'Meus Eventos' },\r\n      { to: '/events', icon: Calendar, label: 'Eventos' },\r\n      { to: '/restaurants', icon: UtensilsCrossed, label: 'Restaurantes' },\r\n      { to: '/people', icon: Users, label: 'Pessoas' },\r\n      { to: '/chats', icon: MessageSquare, label: 'Chats' },\r\n    ];\r\n\r\n    const userBottomLinks = user\r\n      ? [\r\n          { to: `/profile/${user.id}`, icon: User, label: 'Meu Perfil' },\r\n          { to: '/settings', icon: Settings, label: 'Minha Conta' },\r\n        ]\r\n      : [];\r\n\r\n    return {\r\n      navLinks: userNavLinks,\r\n      bottomLinks: userBottomLinks,\r\n    };\r\n  }, [isPartner, isPremiumPartner, user, profile]);\r\n\r\n  const toggleSidebar = () => setSidebarOpen((prev) => !prev);\r\n\r\n  // === Loading State ===\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center w-screen h-screen bg-background\">\r\n        <div className=\"w-12 h-12 border-t-2 border-b-2 rounded-full border-primary animate-spin\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // === Unauthenticated User (Login/Register) ===\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background text-foreground\">\r\n        <main className=\"flex-1\">\r\n          <div className=\"container px-4 mx-auto sm:px-6 lg:px-8\">\r\n            <Outlet />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // === Authenticated Layout ===\r\n  return (\r\n    <div className=\"flex min-h-screen bg-background text-foreground\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:flex md:flex-shrink-0 w-64 border-r border-white/10\">\r\n        <SidebarContent\r\n          navLinks={navLinks}\r\n          bottomLinks={bottomLinks}\r\n          isPartner={isPartner}\r\n          isPremium={isPremium}\r\n          isPremiumPartner={isPremiumPartner}\r\n        />\r\n      </aside>\r\n\r\n      {/* Mobile Overlay */}\r\n      {isSidebarOpen && (\r\n        <div\r\n          className=\"fixed inset-0 z-40 bg-black/60 md:hidden\"\r\n          onClick={toggleSidebar}\r\n          aria-hidden=\"true\"\r\n        />\r\n      )}\r\n\r\n      {/* Mobile Sidebar */}\r\n      <aside\r\n        className={`fixed top-0 left-0 z-50 w-64 h-full bg-background border-r border-white/10 transform transition-transform duration-300 ease-in-out md:hidden ${\r\n          isSidebarOpen ? 'translate-x-0' : '-translate-x-full'\r\n        }`}\r\n      >\r\n        <SidebarContent\r\n          onLinkClick={toggleSidebar}\r\n          navLinks={navLinks}\r\n          bottomLinks={bottomLinks}\r\n          isPartner={isPartner}\r\n          isPremium={isPremium}\r\n          isPremiumPartner={isPremiumPartner}\r\n        />\r\n      </aside>\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex flex-col flex-1\">\r\n        <div className=\"relative z-50\">\r\n          <Navbar toggleSidebar={toggleSidebar} />\r\n        </div>\r\n        \r\n        <main className=\"flex-1 pt-4 pb-6 overflow-y-auto md:pt-6\">\r\n          <div className=\"container px-4 mx-auto sm:px-6 lg:px-8\">\r\n            <Outlet />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;"],"version":3}