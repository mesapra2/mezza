{"file":"C:\\DEVMix\\App.Mesapra2.com\\src\\features\\partner\\pages\\FeedPartnerEvent.jsx","mappings":"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","names":[],"sources":["C:\\DEVMix\\App.Mesapra2.com\\src\\features\\partner\\pages\\FeedPartnerEvent.jsx"],"sourcesContent":["// src/pages/FeedPartnerEvent.jsx\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { motion } from 'framer-motion';\r\nimport { Link } from 'react-router-dom';\r\nimport { Search, Calendar, Users, MapPin, Tag, Clock } from 'lucide-react';\r\nimport { Input } from '@/features/shared/components/ui/input';\r\nimport { Button } from '@/features/shared/components/ui/button';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport { format } from 'date-fns';\r\nimport { ptBR } from 'date-fns/locale';\r\nimport Avatar from '@/features/shared/components/profile/Avatar';\r\n\r\nconst FeedPartnerEvent = () => {\r\n  const [events, setEvents] = useState([]);\r\n  const [filteredEvents, setFilteredEvents] = useState([]);\r\n  const [eventParticipantsMap, setEventParticipantsMap] = useState({});\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Helper para Avatar\r\n  const getAvatarUrl = (profile, nameFallback = 'U') => {\r\n    if (profile?.avatar_url) return profile.avatar_url;\r\n    return `https://ui-avatars.com/api/?name=${encodeURIComponent(\r\n      profile?.username || profile?.full_name || nameFallback\r\n    )}&background=8b5cf6&color=fff&size=40`;\r\n  };\r\n\r\n  const loadEvents = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      let { data, error: fetchError } = await supabase\r\n        .from('events')\r\n        .select(`\r\n          *,\r\n          partner:partners(id, name, address),\r\n          creator:profiles!events_creator_id_fkey(\r\n            id,\r\n            username,\r\n            avatar_url,\r\n            full_name,\r\n            public_profile\r\n          )\r\n        `)\r\n        .eq('event_type', 'institucional') // <-- FILTRO PRINCIPAL\r\n        .order('start_time', { ascending: true });\r\n\r\n      // Fallbacks (mantidos por segurança)\r\n      if (fetchError && !data) {\r\n        const fallback = await supabase.from('events').select(`*, partner:partners(id, name, address)`).eq('event_type', 'institucional').order('start_time', { ascending: true });\r\n        data = fallback.data;\r\n        fetchError = fallback.error;\r\n      }\r\n      if (fetchError && !data) {\r\n        const simple = await supabase.from('events').select('*').eq('event_type', 'institucional').order('start_time', { ascending: true });\r\n        data = simple.data;\r\n        fetchError = simple.error;\r\n      }\r\n      if (fetchError) throw fetchError;\r\n      if (!data) data = [];\r\n\r\n      const now = new Date();\r\n      const validEvents = data.filter(event => {\r\n        try {\r\n            const eventDate = new Date(event.start_time);\r\n            if (isNaN(eventDate.getTime())) return false;\r\n            const isFuture = eventDate >= now;\r\n            const statusLower = typeof event.status === 'string' ? event.status.toLowerCase() : '';\r\n            const hasValidStatus = ['aberto', 'confirmado'].includes(statusLower);\r\n            return isFuture && hasValidStatus;\r\n        } catch(e) {\r\n            return false;\r\n        }\r\n      });\r\n\r\n      setEvents(validEvents);\r\n\r\n      // Busca participantes em lote\r\n      if (validEvents.length > 0) {\r\n        const eventIds = validEvents.map(e => e.id);\r\n        const { data: participationsData, error: participantsError } = await supabase\r\n          .from('event_participants')\r\n          .select('event_id, profile:profiles(id, username, avatar_url, full_name, public_profile)')\r\n          .in('event_id', eventIds)\r\n          .eq('status', 'aprovado');\r\n\r\n        if (participantsError) {\r\n          console.error(\"Erro ao buscar participantes:\", participantsError);\r\n        } else if (participationsData) {\r\n          const participantsMap = participationsData.reduce((acc, participation) => {\r\n            if (!participation.profile) return acc;\r\n            const eventId = participation.event_id;\r\n            if (!acc[eventId]) acc[eventId] = [];\r\n            acc[eventId].push(participation.profile);\r\n            return acc;\r\n          }, {});\r\n          setEventParticipantsMap(participantsMap);\r\n        }\r\n      } else {\r\n        setEventParticipantsMap({});\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Erro ao carregar eventos:', error);\r\n      setError('Erro ao carregar eventos. Tente novamente.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []); // Roda só uma vez\r\n\r\n  useEffect(() => {\r\n    loadEvents();\r\n  }, [loadEvents]);\r\n\r\n  const filterEvents = useCallback(() => {\r\n    let filtered = events;\r\n    if (searchTerm) {\r\n      const lowerSearch = searchTerm.toLowerCase();\r\n      filtered = filtered.filter(e =>\r\n        e.title?.toLowerCase().includes(lowerSearch) ||\r\n        e.description?.toLowerCase().includes(lowerSearch) ||\r\n        e.hashtags?.some(tag => tag.toLowerCase().includes(lowerSearch)) ||\r\n        e.creator?.username?.toLowerCase().includes(lowerSearch) ||\r\n        e.partner?.name?.toLowerCase().includes(lowerSearch)\r\n      );\r\n    }\r\n    setFilteredEvents(filtered);\r\n  }, [events, searchTerm]);\r\n\r\n\r\n  useEffect(() => {\r\n    filterEvents();\r\n  }, [filterEvents]);\r\n\r\n\r\n  const getPartnerAddress = (partner) => {\r\n    if (!partner) return 'Local não informado';\r\n    if (!partner.address) return partner.name;\r\n    if (typeof partner.address === 'string') {\r\n        try {\r\n            const parsed = JSON.parse(partner.address);\r\n            if (parsed.city || parsed.cidade) return `${partner.name} - ${parsed.city || parsed.cidade}`;\r\n        } catch (e) { /* ignora erro de parse */ }\r\n        return `${partner.name} - ${partner.address}`;\r\n    }\r\n    if (typeof partner.address === 'object') {\r\n      const parts = [\r\n        partner.address.street || partner.address.rua,\r\n        partner.address.city || partner.address.cidade,\r\n      ].filter(Boolean);\r\n      return parts.length > 0 ? `${partner.name} - ${parts.join(', ')}` : partner.name;\r\n    }\r\n    return partner.name;\r\n  };\r\n\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[calc(100vh-200px)]\">\r\n        <Calendar className=\"w-16 h-16 text-white/40 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]\">\r\n        <Calendar className=\"w-16 h-16 text-red-400 mb-4\" />\r\n        <p className=\"text-white/60 text-lg mb-4\">{error}</p>\r\n        <Button onClick={loadEvents} className=\"bg-purple-600 hover:bg-purple-700\">\r\n          Tentar Novamente\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Eventos Institucionais - Mesapra2</title>\r\n        <meta name=\"description\" content=\"Descubra eventos institucionais de parceiros.\" />\r\n      </Helmet>\r\n\r\n      <div className=\"space-y-8 py-6 px-4\">\r\n        {/* HEADER */}\r\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n          <div>\r\n            <h1 className=\"text-4xl font-bold gradient-text mb-2\">\r\n              Eventos Institucionais\r\n            </h1>\r\n            <p className=\"text-white/60 text-lg\">\r\n              Veja os eventos criados por outros parceiros\r\n            </p>\r\n            {filteredEvents.length > 0 && (\r\n              <p className=\"text-white/40 text-sm mt-2\">\r\n                {filteredEvents.length} {filteredEvents.length === 1 ? 'evento encontrado' : 'eventos encontrados'}\r\n              </p>\r\n            )}\r\n          </div>\r\n          {/* Botão de Criar removido daqui */}\r\n        </div>\r\n\r\n        {/* Search */}\r\n        <div className=\"glass-effect rounded-2xl p-6 border border-white/10\">\r\n          <div className=\"flex-1 relative\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40\" />\r\n            <Input\r\n              placeholder=\"Buscar eventos, hashtags, local, criador...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"pl-10 glass-effect border-white/10\"\r\n            />\r\n          </div>\r\n          {/* Filtros de tipo removidos */}\r\n        </div>\r\n\r\n        {/* Events Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {filteredEvents.map((event, index) => {\r\n            const participantsForEvent = eventParticipantsMap[event.id] || [];\r\n            return (\r\n              <motion.div\r\n                key={event.id}\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: index * 0.05 }}\r\n              >\r\n                <Link to={`/event/${event.id}`}>\r\n                  <div className=\"glass-effect rounded-2xl p-6 border border-white/10 hover:bg-white/5 transition-colors cursor-pointer h-full flex flex-col justify-between\">\r\n                    <div>\r\n                      {event.creator && (\r\n                        <div className=\"flex items-center gap-2 mb-4\">\r\n                           <Avatar\r\n                              url={getAvatarUrl(event.creator)}\r\n                              name={event.creator.username || event.creator.full_name}\r\n                              size=\"sm\"\r\n                              isPublic={event.creator.public_profile}\r\n                           />\r\n                          <div className='min-w-0'>\r\n                            <p className=\"text-white/80 text-sm font-medium truncate\">\r\n                              {event.creator.username || event.creator.full_name || 'Anfitrião'}\r\n                            </p>\r\n                            <p className=\"text-white/50 text-xs\">Organizador</p>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"flex items-start justify-between mb-4\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\r\n                             <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300\">\r\n                               Institucional\r\n                             </span>\r\n                            <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-300\">\r\n                              {event.status}\r\n                            </span>\r\n                          </div>\r\n                          <h3 className=\"text-lg font-semibold text-white mb-2 line-clamp-2\">\r\n                            {event.title}\r\n                          </h3>\r\n                          <p className=\"text-white/60 text-sm line-clamp-2 mb-3\">\r\n                            {event.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center text-white/60 text-sm\">\r\n                          <Calendar className=\"w-4 h-4 mr-2 flex-shrink-0\" />\r\n                          <span className=\"truncate\">\r\n                            {format(new Date(event.start_time), \"dd/MM 'às' HH:mm\", { locale: ptBR })}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"flex items-center text-white/60 text-sm\">\r\n                          <Clock className=\"w-4 h-4 mr-2 flex-shrink-0\" />\r\n                          <span className=\"truncate\">\r\n                            até {format(new Date(event.end_time), \"HH:mm\", { locale: ptBR })}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"flex items-center text-white/60 text-sm\">\r\n                          <MapPin className=\"w-4 h-4 mr-2 flex-shrink-0\" />\r\n                          <span className=\"truncate\">\r\n                            {getPartnerAddress(event.partner)}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"flex items-center text-white/60 text-sm\">\r\n                          <Users className=\"w-4 h-4 mr-2 flex-shrink-0\" />\r\n                          {event.vagas} {event.vagas === 1 ? 'vaga disponível' : 'vagas disponíveis'}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {event.hashtags && event.hashtags.length > 0 && (\r\n                          <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                            {event.hashtags.slice(0, 3).map((tag, i) => (\r\n                              <span\r\n                                key={i}\r\n                                className=\"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs flex items-center\"\r\n                              >\r\n                                <Tag className=\"w-3 h-3 mr-1\" />\r\n                                #{tag}\r\n                              </span>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 pt-4 border-t border-white/10\">\r\n                      {participantsForEvent.length > 0 ? (\r\n                        <>\r\n                          <h4 className=\"text-sm font-medium text-white/80 mb-2\">\r\n                              Participantes ({participantsForEvent.length})\r\n                          </h4>\r\n                          <div className=\"flex flex-wrap gap-2\">\r\n                              {participantsForEvent.slice(0, 5).map(participant => (\r\n                                <Avatar\r\n                                    key={participant.id}\r\n                                    url={getAvatarUrl(participant)}\r\n                                    name={participant.username || participant.full_name}\r\n                                    size=\"xs\"\r\n                                    isPublic={participant.public_profile}\r\n                                />\r\n                              ))}\r\n                          </div>\r\n                        </>\r\n                      ) : (\r\n                           <p className=\"text-xs text-white/50\">Seja o primeiro a participar!</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              </motion.div>\r\n            )\r\n          })}\r\n        </div>\r\n\r\n        {filteredEvents.length === 0 && !loading && (\r\n          <div className=\"glass-effect rounded-2xl p-12 border border-white/10 text-center mt-8\">\r\n            <Calendar className=\"w-16 h-16 text-white/20 mx-auto mb-4\" />\r\n            <p className=\"text-white/60 text-lg mb-4\">\r\n              Nenhum evento institucional encontrado\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FeedPartnerEvent;"],"version":3}